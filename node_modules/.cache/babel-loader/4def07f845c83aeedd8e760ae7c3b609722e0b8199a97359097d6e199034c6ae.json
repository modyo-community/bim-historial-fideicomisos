{"ast":null,"code":"/*\n * liquidjs@9.43.0, https://github.com/harttle/liquidjs\n * (c) 2016-2022 harttle\n * Released under the MIT License.\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nclass Drop {\n  liquidMethodMissing(key) {\n    return undefined;\n  }\n}\nconst toString$1 = Object.prototype.toString;\nconst toLowerCase = String.prototype.toLowerCase;\nconst hasOwnProperty = Object.hasOwnProperty;\nfunction isString(value) {\n  return typeof value === 'string';\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isPromise(val) {\n  return val && isFunction(val.then);\n}\nfunction isIterator(val) {\n  return val && isFunction(val.next) && isFunction(val.throw) && isFunction(val.return);\n}\nfunction escapeRegex(str) {\n  return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\nfunction stringify(value) {\n  value = toValue(value);\n  if (isString(value)) return value;\n  if (isNil(value)) return '';\n  if (isArray(value)) return value.map(x => stringify(x)).join('');\n  return String(value);\n}\nfunction toValue(value) {\n  return value instanceof Drop && isFunction(value.valueOf) ? value.valueOf() : value;\n}\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\nfunction toLiquid(value) {\n  if (value && isFunction(value.toLiquid)) return toLiquid(value.toLiquid());\n  return value;\n}\nfunction isNil(value) {\n  return value == null;\n}\nfunction isArray(value) {\n  // be compatible with IE 8\n  return toString$1.call(value) === '[object Array]';\n}\nfunction isIterable(value) {\n  return isObject(value) && Symbol.iterator in value;\n}\n/*\r\n * Iterates over own enumerable string keyed properties of an object and invokes iteratee for each property.\r\n * The iteratee is invoked with three arguments: (value, key, object).\r\n * Iteratee functions may exit iteration early by explicitly returning false.\r\n * @param {Object} object The object to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @return {Object} Returns object.\r\n */\nfunction forOwn(obj, iteratee) {\n  obj = obj || {};\n  for (const k in obj) {\n    if (hasOwnProperty.call(obj, k)) {\n      if (iteratee(obj[k], k, obj) === false) break;\n    }\n  }\n  return obj;\n}\nfunction last$1(arr) {\n  return arr[arr.length - 1];\n}\n/*\r\n * Checks if value is the language type of Object.\r\n * (e.g. arrays, functions, objects, regexes, new Number(0), and new String(''))\r\n * @param {any} value The value to check.\r\n * @return {Boolean} Returns true if value is an object, else false.\r\n */\nfunction isObject(value) {\n  const type = typeof value;\n  return value !== null && (type === 'object' || type === 'function');\n}\nfunction range(start, stop, step = 1) {\n  const arr = [];\n  for (let i = start; i < stop; i += step) {\n    arr.push(i);\n  }\n  return arr;\n}\nfunction padStart(str, length, ch = ' ') {\n  return pad(str, length, ch, (str, ch) => ch + str);\n}\nfunction padEnd(str, length, ch = ' ') {\n  return pad(str, length, ch, (str, ch) => str + ch);\n}\nfunction pad(str, length, ch, add) {\n  str = String(str);\n  let n = length - str.length;\n  while (n-- > 0) str = add(str, ch);\n  return str;\n}\nfunction identify(val) {\n  return val;\n}\nfunction snakeCase(str) {\n  return str.replace(/(\\w?)([A-Z])/g, (_, a, b) => (a ? a + '_' : '') + b.toLowerCase());\n}\nfunction changeCase(str) {\n  const hasLowerCase = [...str].some(ch => ch >= 'a' && ch <= 'z');\n  return hasLowerCase ? str.toUpperCase() : str.toLowerCase();\n}\nfunction ellipsis(str, N) {\n  return str.length > N ? str.slice(0, N - 3) + '...' : str;\n}\n// compare string in case-insensitive way, undefined values to the tail\nfunction caseInsensitiveCompare(a, b) {\n  if (a == null && b == null) return 0;\n  if (a == null) return 1;\n  if (b == null) return -1;\n  a = toLowerCase.call(a);\n  b = toLowerCase.call(b);\n  if (a < b) return -1;\n  if (a > b) return 1;\n  return 0;\n}\nfunction argumentsToValue(fn) {\n  return (...args) => fn(...args.map(toValue));\n}\nfunction escapeRegExp(text) {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\nclass Node {\n  constructor(key, value, next, prev) {\n    this.key = key;\n    this.value = value;\n    this.next = next;\n    this.prev = prev;\n  }\n}\nclass LRU {\n  constructor(limit, size = 0) {\n    this.limit = limit;\n    this.size = size;\n    this.cache = {};\n    this.head = new Node('HEAD', null, null, null);\n    this.tail = new Node('TAIL', null, null, null);\n    this.head.next = this.tail;\n    this.tail.prev = this.head;\n  }\n  write(key, value) {\n    if (this.cache[key]) {\n      this.cache[key].value = value;\n    } else {\n      const node = new Node(key, value, this.head.next, this.head);\n      this.head.next.prev = node;\n      this.head.next = node;\n      this.cache[key] = node;\n      this.size++;\n      this.ensureLimit();\n    }\n  }\n  read(key) {\n    if (!this.cache[key]) return;\n    const {\n      value\n    } = this.cache[key];\n    this.remove(key);\n    this.write(key, value);\n    return value;\n  }\n  remove(key) {\n    const node = this.cache[key];\n    node.prev.next = node.next;\n    node.next.prev = node.prev;\n    delete this.cache[key];\n    this.size--;\n  }\n  clear() {\n    this.head.next = this.tail;\n    this.tail.prev = this.head;\n    this.size = 0;\n    this.cache = {};\n  }\n  ensureLimit() {\n    if (this.size > this.limit) this.remove(this.tail.prev.key);\n  }\n}\nfunction domResolve(root, path) {\n  const base = document.createElement('base');\n  base.href = root;\n  const head = document.getElementsByTagName('head')[0];\n  head.insertBefore(base, head.firstChild);\n  const a = document.createElement('a');\n  a.href = path;\n  const resolved = a.href;\n  head.removeChild(base);\n  return resolved;\n}\nfunction resolve(root, filepath, ext) {\n  if (root.length && last$1(root) !== '/') root += '/';\n  const url = domResolve(root, filepath);\n  return url.replace(/^(\\w+:\\/\\/[^/]+)(\\/[^?]+)/, (str, origin, path) => {\n    const last = path.split('/').pop();\n    if (/\\.\\w+$/.test(last)) return str;\n    return origin + path + ext;\n  });\n}\nfunction readFile(url) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.onload = () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve(xhr.responseText);\n        } else {\n          reject(new Error(xhr.statusText));\n        }\n      };\n      xhr.onerror = () => {\n        reject(new Error('An error occurred whilst receiving the response.'));\n      };\n      xhr.open('GET', url);\n      xhr.send();\n    });\n  });\n}\nfunction readFileSync(url) {\n  const xhr = new XMLHttpRequest();\n  xhr.open('GET', url, false);\n  xhr.send();\n  if (xhr.status < 200 || xhr.status >= 300) {\n    throw new Error(xhr.statusText);\n  }\n  return xhr.responseText;\n}\nfunction exists(filepath) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return true;\n  });\n}\nfunction existsSync(filepath) {\n  return true;\n}\nfunction dirname(filepath) {\n  return domResolve(filepath, '.');\n}\nconst sep = '/';\nvar fs = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  resolve: resolve,\n  readFile: readFile,\n  readFileSync: readFileSync,\n  exists: exists,\n  existsSync: existsSync,\n  dirname: dirname,\n  sep: sep\n});\nfunction isComparable(arg) {\n  return arg && isFunction(arg.equals);\n}\nfunction isTruthy(val, ctx) {\n  return !isFalsy(val, ctx);\n}\nfunction isFalsy(val, ctx) {\n  if (ctx.opts.jsTruthy) {\n    return !val;\n  } else {\n    return val === false || undefined === val || val === null;\n  }\n}\nconst defaultOperators = {\n  '==': (l, r) => {\n    if (isComparable(l)) return l.equals(r);\n    if (isComparable(r)) return r.equals(l);\n    return toValue(l) === toValue(r);\n  },\n  '!=': (l, r) => {\n    if (isComparable(l)) return !l.equals(r);\n    if (isComparable(r)) return !r.equals(l);\n    return toValue(l) !== toValue(r);\n  },\n  '>': (l, r) => {\n    if (isComparable(l)) return l.gt(r);\n    if (isComparable(r)) return r.lt(l);\n    return toValue(l) > toValue(r);\n  },\n  '<': (l, r) => {\n    if (isComparable(l)) return l.lt(r);\n    if (isComparable(r)) return r.gt(l);\n    return toValue(l) < toValue(r);\n  },\n  '>=': (l, r) => {\n    if (isComparable(l)) return l.geq(r);\n    if (isComparable(r)) return r.leq(l);\n    return toValue(l) >= toValue(r);\n  },\n  '<=': (l, r) => {\n    if (isComparable(l)) return l.leq(r);\n    if (isComparable(r)) return r.geq(l);\n    return toValue(l) <= toValue(r);\n  },\n  'contains': (l, r) => {\n    l = toValue(l);\n    r = toValue(r);\n    return l && isFunction(l.indexOf) ? l.indexOf(r) > -1 : false;\n  },\n  'and': (l, r, ctx) => isTruthy(toValue(l), ctx) && isTruthy(toValue(r), ctx),\n  'or': (l, r, ctx) => isTruthy(toValue(l), ctx) || isTruthy(toValue(r), ctx)\n};\n\n// **DO NOT CHANGE THIS FILE**\n//\n// This file is generated by bin/character-gen.js\n// bitmask character types to boost performance\nconst TYPES = [0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 4, 4, 4, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 2, 8, 0, 0, 0, 0, 8, 0, 0, 0, 64, 0, 65, 0, 0, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 0, 0, 2, 2, 2, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0];\nconst IDENTIFIER = 1;\nconst BLANK = 4;\nconst QUOTE = 8;\nconst INLINE_BLANK = 16;\nconst NUMBER = 32;\nconst SIGN = 64;\nTYPES[160] = TYPES[5760] = TYPES[6158] = TYPES[8192] = TYPES[8193] = TYPES[8194] = TYPES[8195] = TYPES[8196] = TYPES[8197] = TYPES[8198] = TYPES[8199] = TYPES[8200] = TYPES[8201] = TYPES[8202] = TYPES[8232] = TYPES[8233] = TYPES[8239] = TYPES[8287] = TYPES[12288] = BLANK;\nfunction createTrie(operators) {\n  const trie = {};\n  for (const [name, handler] of Object.entries(operators)) {\n    let node = trie;\n    for (let i = 0; i < name.length; i++) {\n      const c = name[i];\n      node[c] = node[c] || {};\n      if (i === name.length - 1 && TYPES[name.charCodeAt(i)] & IDENTIFIER) {\n        node[c].needBoundary = true;\n      }\n      node = node[c];\n    }\n    node.handler = handler;\n    node.end = true;\n  }\n  return trie;\n}\nconst escapeMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&#34;',\n  \"'\": '&#39;'\n};\nconst unescapeMap = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&#34;': '\"',\n  '&#39;': \"'\"\n};\nfunction escape(str) {\n  return stringify(str).replace(/&|<|>|\"|'/g, m => escapeMap[m]);\n}\nfunction unescape(str) {\n  return stringify(str).replace(/&(amp|lt|gt|#34|#39);/g, m => unescapeMap[m]);\n}\nfunction escapeOnce(str) {\n  return escape(unescape(stringify(str)));\n}\nfunction newlineToBr(v) {\n  return stringify(v).replace(/\\n/g, '<br />\\n');\n}\nfunction stripHtml(v) {\n  return stringify(v).replace(/<script.*?<\\/script>|<!--.*?-->|<style.*?<\\/style>|<.*?>/g, '');\n}\nconst abs = argumentsToValue(Math.abs);\nconst atLeast = argumentsToValue(Math.max);\nconst atMost = argumentsToValue(Math.min);\nconst ceil = argumentsToValue(Math.ceil);\nconst dividedBy = argumentsToValue((dividend, divisor, integerArithmetic = false) => integerArithmetic ? Math.floor(dividend / divisor) : dividend / divisor);\nconst floor = argumentsToValue(Math.floor);\nconst minus = argumentsToValue((v, arg) => v - arg);\nconst modulo = argumentsToValue((v, arg) => v % arg);\nconst times = argumentsToValue((v, arg) => v * arg);\nfunction round(v, arg = 0) {\n  v = toValue(v);\n  arg = toValue(arg);\n  const amp = Math.pow(10, arg);\n  return Math.round(v * amp) / amp;\n}\nfunction plus(v, arg) {\n  v = toValue(v);\n  arg = toValue(arg);\n  return Number(v) + Number(arg);\n}\nconst urlDecode = x => stringify(x).split('+').map(decodeURIComponent).join(' ');\nconst urlEncode = x => stringify(x).split(' ').map(encodeURIComponent).join('+');\nfunction toEnumerable(val) {\n  val = toValue(val);\n  if (isArray(val)) return val;\n  if (isString(val) && val.length > 0) return [val];\n  if (isIterable(val)) return Array.from(val);\n  if (isObject(val)) return Object.keys(val).map(key => [key, val[key]]);\n  return [];\n}\nfunction toArray(val) {\n  if (isNil(val)) return [];\n  if (isArray(val)) return val;\n  return [val];\n}\nconst join = argumentsToValue((v, arg) => toArray(v).join(arg === undefined ? ' ' : arg));\nconst last = argumentsToValue(v => isArray(v) ? last$1(v) : '');\nconst first = argumentsToValue(v => isArray(v) ? v[0] : '');\nconst reverse = argumentsToValue(v => [...toArray(v)].reverse());\nfunction* sort(arr, property) {\n  const values = [];\n  for (const item of toArray(toValue(arr))) {\n    values.push([item, property ? yield this.context._getFromScope(item, stringify(property).split('.')) : item]);\n  }\n  return values.sort((lhs, rhs) => {\n    const lvalue = lhs[1];\n    const rvalue = rhs[1];\n    return lvalue < rvalue ? -1 : lvalue > rvalue ? 1 : 0;\n  }).map(tuple => tuple[0]);\n}\nfunction sortNatural(input, property) {\n  input = toValue(input);\n  const propertyString = stringify(property);\n  const compare = property === undefined ? caseInsensitiveCompare : (lhs, rhs) => caseInsensitiveCompare(lhs[propertyString], rhs[propertyString]);\n  return [...toArray(input)].sort(compare);\n}\nconst size = v => v && v.length || 0;\nfunction* map(arr, property) {\n  const results = [];\n  for (const item of toArray(toValue(arr))) {\n    results.push(yield this.context._getFromScope(item, stringify(property).split('.')));\n  }\n  return results;\n}\nfunction compact(arr) {\n  arr = toValue(arr);\n  return toArray(arr).filter(x => !isNil(toValue(x)));\n}\nfunction concat(v, arg = []) {\n  v = toValue(v);\n  arg = toArray(arg).map(v => toValue(v));\n  return toArray(v).concat(arg);\n}\nfunction slice(v, begin, length = 1) {\n  v = toValue(v);\n  if (isNil(v)) return [];\n  if (!isArray(v)) v = stringify(v);\n  begin = begin < 0 ? v.length + begin : begin;\n  return v.slice(begin, begin + length);\n}\nfunction* where(arr, property, expected) {\n  const values = [];\n  arr = toArray(toValue(arr));\n  for (const item of arr) {\n    values.push(yield this.context._getFromScope(item, stringify(property).split('.')));\n  }\n  return arr.filter((_, i) => {\n    if (expected === undefined) return isTruthy(values[i], this.context);\n    if (isComparable(expected)) return expected.equals(values[i]);\n    return values[i] === expected;\n  });\n}\nfunction uniq(arr) {\n  arr = toValue(arr);\n  const u = {};\n  return (arr || []).filter(val => {\n    if (hasOwnProperty.call(u, String(val))) return false;\n    u[String(val)] = true;\n    return true;\n  });\n}\nconst rFormat = /%([-_0^#:]+)?(\\d+)?([EO])?(.)/;\nconst monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nconst dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nconst monthNamesShort = monthNames.map(abbr);\nconst dayNamesShort = dayNames.map(abbr);\nconst suffixes = {\n  1: 'st',\n  2: 'nd',\n  3: 'rd',\n  'default': 'th'\n};\nfunction abbr(str) {\n  return str.slice(0, 3);\n}\n// prototype extensions\nfunction daysInMonth(d) {\n  const feb = isLeapYear(d) ? 29 : 28;\n  return [31, feb, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n}\nfunction getDayOfYear(d) {\n  let num = 0;\n  for (let i = 0; i < d.getMonth(); ++i) {\n    num += daysInMonth(d)[i];\n  }\n  return num + d.getDate();\n}\nfunction getWeekOfYear(d, startDay) {\n  // Skip to startDay of this week\n  const now = getDayOfYear(d) + (startDay - d.getDay());\n  // Find the first startDay of the year\n  const jan1 = new Date(d.getFullYear(), 0, 1);\n  const then = 7 - jan1.getDay() + startDay;\n  return String(Math.floor((now - then) / 7) + 1);\n}\nfunction isLeapYear(d) {\n  const year = d.getFullYear();\n  return !!((year & 3) === 0 && (year % 100 || year % 400 === 0 && year));\n}\nfunction getSuffix(d) {\n  const str = d.getDate().toString();\n  const index = parseInt(str.slice(-1));\n  return suffixes[index] || suffixes['default'];\n}\nfunction century(d) {\n  return parseInt(d.getFullYear().toString().substring(0, 2), 10);\n}\n// default to 0\nconst padWidths = {\n  d: 2,\n  e: 2,\n  H: 2,\n  I: 2,\n  j: 3,\n  k: 2,\n  l: 2,\n  L: 3,\n  m: 2,\n  M: 2,\n  S: 2,\n  U: 2,\n  W: 2\n};\n// default to '0'\nconst padChars = {\n  a: ' ',\n  A: ' ',\n  b: ' ',\n  B: ' ',\n  c: ' ',\n  e: ' ',\n  k: ' ',\n  l: ' ',\n  p: ' ',\n  P: ' '\n};\nconst formatCodes = {\n  a: d => dayNamesShort[d.getDay()],\n  A: d => dayNames[d.getDay()],\n  b: d => monthNamesShort[d.getMonth()],\n  B: d => monthNames[d.getMonth()],\n  c: d => d.toLocaleString(),\n  C: d => century(d),\n  d: d => d.getDate(),\n  e: d => d.getDate(),\n  H: d => d.getHours(),\n  I: d => String(d.getHours() % 12 || 12),\n  j: d => getDayOfYear(d),\n  k: d => d.getHours(),\n  l: d => String(d.getHours() % 12 || 12),\n  L: d => d.getMilliseconds(),\n  m: d => d.getMonth() + 1,\n  M: d => d.getMinutes(),\n  N: (d, opts) => {\n    const width = Number(opts.width) || 9;\n    const str = String(d.getMilliseconds()).slice(0, width);\n    return padEnd(str, width, '0');\n  },\n  p: d => d.getHours() < 12 ? 'AM' : 'PM',\n  P: d => d.getHours() < 12 ? 'am' : 'pm',\n  q: d => getSuffix(d),\n  s: d => Math.round(d.getTime() / 1000),\n  S: d => d.getSeconds(),\n  u: d => d.getDay() || 7,\n  U: d => getWeekOfYear(d, 0),\n  w: d => d.getDay(),\n  W: d => getWeekOfYear(d, 1),\n  x: d => d.toLocaleDateString(),\n  X: d => d.toLocaleTimeString(),\n  y: d => d.getFullYear().toString().slice(2, 4),\n  Y: d => d.getFullYear(),\n  z: (d, opts) => {\n    const nOffset = Math.abs(d.getTimezoneOffset());\n    const h = Math.floor(nOffset / 60);\n    const m = nOffset % 60;\n    return (d.getTimezoneOffset() > 0 ? '-' : '+') + padStart(h, 2, '0') + (opts.flags[':'] ? ':' : '') + padStart(m, 2, '0');\n  },\n  't': () => '\\t',\n  'n': () => '\\n',\n  '%': () => '%'\n};\nformatCodes.h = formatCodes.b;\nfunction strftime(d, formatStr) {\n  let output = '';\n  let remaining = formatStr;\n  let match;\n  while (match = rFormat.exec(remaining)) {\n    output += remaining.slice(0, match.index);\n    remaining = remaining.slice(match.index + match[0].length);\n    output += format(d, match);\n  }\n  return output + remaining;\n}\nfunction format(d, match) {\n  const [input, flagStr = '', width, modifier, conversion] = match;\n  const convert = formatCodes[conversion];\n  if (!convert) return input;\n  const flags = {};\n  for (const flag of flagStr) flags[flag] = true;\n  let ret = String(convert(d, {\n    flags,\n    width,\n    modifier\n  }));\n  let padChar = padChars[conversion] || '0';\n  let padWidth = width || padWidths[conversion] || 0;\n  if (flags['^']) ret = ret.toUpperCase();else if (flags['#']) ret = changeCase(ret);\n  if (flags['_']) padChar = ' ';else if (flags['0']) padChar = '0';\n  if (flags['-']) padWidth = 0;\n  return padStart(ret, padWidth, padChar);\n}\n\n// one minute in milliseconds\nconst OneMinute = 60000;\nconst hostTimezoneOffset = new Date().getTimezoneOffset();\nconst ISO8601_TIMEZONE_PATTERN = /([zZ]|([+-])(\\d{2}):(\\d{2}))$/;\n/**\r\n * A date implementation with timezone info, just like Ruby date\r\n *\r\n * Implementation:\r\n * - create a Date offset by it's timezone difference, avoiding overriding a bunch of methods\r\n * - rewrite getTimezoneOffset() to trick strftime\r\n */\nclass TimezoneDate {\n  constructor(init, timezoneOffset) {\n    if (init instanceof TimezoneDate) {\n      this.date = init.date;\n      timezoneOffset = init.timezoneOffset;\n    } else {\n      const diff = (hostTimezoneOffset - timezoneOffset) * OneMinute;\n      const time = new Date(init).getTime() + diff;\n      this.date = new Date(time);\n    }\n    this.timezoneOffset = timezoneOffset;\n  }\n  getTime() {\n    return this.date.getTime();\n  }\n  getMilliseconds() {\n    return this.date.getMilliseconds();\n  }\n  getSeconds() {\n    return this.date.getSeconds();\n  }\n  getMinutes() {\n    return this.date.getMinutes();\n  }\n  getHours() {\n    return this.date.getHours();\n  }\n  getDay() {\n    return this.date.getDay();\n  }\n  getDate() {\n    return this.date.getDate();\n  }\n  getMonth() {\n    return this.date.getMonth();\n  }\n  getFullYear() {\n    return this.date.getFullYear();\n  }\n  toLocaleTimeString(locale) {\n    return this.date.toLocaleTimeString(locale);\n  }\n  toLocaleDateString(locale) {\n    return this.date.toLocaleDateString(locale);\n  }\n  getTimezoneOffset() {\n    return this.timezoneOffset;\n  }\n  /**\r\n   * Create a Date object fixed to it's declared Timezone. Both\r\n   * - 2021-08-06T02:29:00.000Z and\r\n   * - 2021-08-06T02:29:00.000+08:00\r\n   * will always be displayed as\r\n   * - 2021-08-06 02:29:00\r\n   * regardless timezoneOffset in JavaScript realm\r\n   *\r\n   * The implementation hack:\r\n   * Instead of calling `.getMonth()`/`.getUTCMonth()` respect to `preserveTimezones`,\r\n   * we create a different Date to trick strftime, it's both simpler and more performant.\r\n   * Given that a template is expected to be parsed fewer times than rendered.\r\n   */\n  static createDateFixedToTimezone(dateString) {\n    const m = dateString.match(ISO8601_TIMEZONE_PATTERN);\n    // representing a UTC timestamp\n    if (m && m[1] === 'Z') {\n      return new TimezoneDate(+new Date(dateString), 0);\n    }\n    // has a timezone specified\n    if (m && m[2] && m[3] && m[4]) {\n      const [,, sign, hours, minutes] = m;\n      const delta = (sign === '+' ? -1 : 1) * (parseInt(hours, 10) * 60 + parseInt(minutes, 10));\n      return new TimezoneDate(+new Date(dateString), delta);\n    }\n    return new Date(dateString);\n  }\n}\nfunction date(v, format, timeZoneOffset) {\n  const opts = this.context.opts;\n  let date;\n  v = toValue(v);\n  format = stringify(format);\n  if (v === 'now' || v === 'today') {\n    date = new Date();\n  } else if (isNumber(v)) {\n    date = new Date(v * 1000);\n  } else if (isString(v)) {\n    if (/^\\d+$/.test(v)) {\n      date = new Date(+v * 1000);\n    } else if (opts.preserveTimezones) {\n      date = TimezoneDate.createDateFixedToTimezone(v);\n    } else {\n      date = new Date(v);\n    }\n  } else {\n    date = v;\n  }\n  if (!isValidDate(date)) return v;\n  if (timeZoneOffset !== undefined) {\n    date = new TimezoneDate(date, timeZoneOffset);\n  } else if (opts.timezoneOffset !== undefined) {\n    date = new TimezoneDate(date, opts.timezoneOffset);\n  }\n  return strftime(date, format);\n}\nfunction isValidDate(date) {\n  return (date instanceof Date || date instanceof TimezoneDate) && !isNaN(date.getTime());\n}\nfunction Default(value, defaultValue, ...args) {\n  value = toValue(value);\n  if (isArray(value) || isString(value)) return value.length ? value : defaultValue;\n  if (value === false && new Map(args).get('allow_false')) return false;\n  return isFalsy(value, this.context) ? defaultValue : value;\n}\nfunction json(value) {\n  return JSON.stringify(value);\n}\nconst raw$1 = identify;\nclass LiquidError extends Error {\n  constructor(err, token) {\n    super(err.message);\n    this.originalError = err;\n    this.token = token;\n    this.context = '';\n  }\n  update() {\n    const err = this.originalError;\n    this.context = mkContext(this.token);\n    this.message = mkMessage(err.message, this.token);\n    this.stack = this.message + '\\n' + this.context + '\\n' + this.stack + '\\nFrom ' + err.stack;\n  }\n}\nclass TokenizationError extends LiquidError {\n  constructor(message, token) {\n    super(new Error(message), token);\n    this.name = 'TokenizationError';\n    super.update();\n  }\n}\nclass ParseError extends LiquidError {\n  constructor(err, token) {\n    super(err, token);\n    this.name = 'ParseError';\n    this.message = err.message;\n    super.update();\n  }\n}\nclass RenderError extends LiquidError {\n  constructor(err, tpl) {\n    super(err, tpl.token);\n    this.name = 'RenderError';\n    this.message = err.message;\n    super.update();\n  }\n  static is(obj) {\n    return obj.name === 'RenderError';\n  }\n}\nclass UndefinedVariableError extends LiquidError {\n  constructor(err, token) {\n    super(err, token);\n    this.name = 'UndefinedVariableError';\n    this.message = err.message;\n    super.update();\n  }\n}\n// only used internally; raised where we don't have token information,\n// so it can't be an UndefinedVariableError.\nclass InternalUndefinedVariableError extends Error {\n  constructor(variableName) {\n    super(`undefined variable: ${variableName}`);\n    this.name = 'InternalUndefinedVariableError';\n    this.variableName = variableName;\n  }\n}\nclass AssertionError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'AssertionError';\n    this.message = message + '';\n  }\n}\nfunction mkContext(token) {\n  const [line] = token.getPosition();\n  const lines = token.input.split('\\n');\n  const begin = Math.max(line - 2, 1);\n  const end = Math.min(line + 3, lines.length);\n  const context = range(begin, end + 1).map(lineNumber => {\n    const indicator = lineNumber === line ? '>> ' : '   ';\n    const num = padStart(String(lineNumber), String(end).length);\n    const text = lines[lineNumber - 1];\n    return `${indicator}${num}| ${text}`;\n  }).join('\\n');\n  return context;\n}\nfunction mkMessage(msg, token) {\n  if (token.file) msg += `, file:${token.file}`;\n  const [line, col] = token.getPosition();\n  msg += `, line:${line}, col:${col}`;\n  return msg;\n}\nfunction assert(predicate, message) {\n  if (!predicate) {\n    const msg = typeof message === 'function' ? message() : message || `expect ${predicate} to be true`;\n    throw new AssertionError(msg);\n  }\n}\n\n/**\r\n * String related filters\r\n *\r\n * * prefer stringify() to String() since `undefined`, `null` should eval ''\r\n */\nfunction append(v, arg) {\n  assert(arguments.length === 2, 'append expect 2 arguments');\n  return stringify(v) + stringify(arg);\n}\nfunction prepend(v, arg) {\n  assert(arguments.length === 2, 'prepend expect 2 arguments');\n  return stringify(arg) + stringify(v);\n}\nfunction lstrip(v, chars) {\n  if (chars) {\n    chars = escapeRegExp(stringify(chars));\n    return stringify(v).replace(new RegExp(`^[${chars}]+`, 'g'), '');\n  }\n  return stringify(v).replace(/^\\s+/, '');\n}\nfunction downcase(v) {\n  return stringify(v).toLowerCase();\n}\nfunction upcase(str) {\n  return stringify(str).toUpperCase();\n}\nfunction remove(v, arg) {\n  return stringify(v).split(String(arg)).join('');\n}\nfunction removeFirst(v, l) {\n  return stringify(v).replace(String(l), '');\n}\nfunction rstrip(str, chars) {\n  if (chars) {\n    chars = escapeRegExp(stringify(chars));\n    return stringify(str).replace(new RegExp(`[${chars}]+$`, 'g'), '');\n  }\n  return stringify(str).replace(/\\s+$/, '');\n}\nfunction split(v, arg) {\n  const arr = stringify(v).split(String(arg));\n  // align to ruby split, which is the behavior of shopify/liquid\n  // see: https://ruby-doc.org/core-2.4.0/String.html#method-i-split\n  while (arr.length && arr[arr.length - 1] === '') arr.pop();\n  return arr;\n}\nfunction strip(v, chars) {\n  if (chars) {\n    chars = escapeRegExp(stringify(chars));\n    return stringify(v).replace(new RegExp(`^[${chars}]+`, 'g'), '').replace(new RegExp(`[${chars}]+$`, 'g'), '');\n  }\n  return stringify(v).trim();\n}\nfunction stripNewlines(v) {\n  return stringify(v).replace(/\\n/g, '');\n}\nfunction capitalize(str) {\n  str = stringify(str);\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n}\nfunction replace(v, pattern, replacement) {\n  return stringify(v).split(String(pattern)).join(replacement);\n}\nfunction replaceFirst(v, arg1, arg2) {\n  return stringify(v).replace(String(arg1), arg2);\n}\nfunction truncate(v, l = 50, o = '...') {\n  v = stringify(v);\n  if (v.length <= l) return v;\n  return v.substring(0, l - o.length) + o;\n}\nfunction truncatewords(v, words = 15, o = '...') {\n  const arr = stringify(v).split(/\\s+/);\n  if (words <= 0) words = 1;\n  let ret = arr.slice(0, words).join(' ');\n  if (arr.length >= words) ret += o;\n  return ret;\n}\nvar builtinFilters = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  escape: escape,\n  escapeOnce: escapeOnce,\n  newlineToBr: newlineToBr,\n  stripHtml: stripHtml,\n  abs: abs,\n  atLeast: atLeast,\n  atMost: atMost,\n  ceil: ceil,\n  dividedBy: dividedBy,\n  floor: floor,\n  minus: minus,\n  modulo: modulo,\n  times: times,\n  round: round,\n  plus: plus,\n  urlDecode: urlDecode,\n  urlEncode: urlEncode,\n  join: join,\n  last: last,\n  first: first,\n  reverse: reverse,\n  sort: sort,\n  sortNatural: sortNatural,\n  size: size,\n  map: map,\n  compact: compact,\n  concat: concat,\n  slice: slice,\n  where: where,\n  uniq: uniq,\n  date: date,\n  Default: Default,\n  json: json,\n  raw: raw$1,\n  append: append,\n  prepend: prepend,\n  lstrip: lstrip,\n  downcase: downcase,\n  upcase: upcase,\n  remove: remove,\n  removeFirst: removeFirst,\n  rstrip: rstrip,\n  split: split,\n  strip: strip,\n  stripNewlines: stripNewlines,\n  capitalize: capitalize,\n  replace: replace,\n  replaceFirst: replaceFirst,\n  truncate: truncate,\n  truncatewords: truncatewords\n});\nvar TokenKind;\n(function (TokenKind) {\n  TokenKind[TokenKind[\"Number\"] = 1] = \"Number\";\n  TokenKind[TokenKind[\"Literal\"] = 2] = \"Literal\";\n  TokenKind[TokenKind[\"Tag\"] = 4] = \"Tag\";\n  TokenKind[TokenKind[\"Output\"] = 8] = \"Output\";\n  TokenKind[TokenKind[\"HTML\"] = 16] = \"HTML\";\n  TokenKind[TokenKind[\"Filter\"] = 32] = \"Filter\";\n  TokenKind[TokenKind[\"Hash\"] = 64] = \"Hash\";\n  TokenKind[TokenKind[\"PropertyAccess\"] = 128] = \"PropertyAccess\";\n  TokenKind[TokenKind[\"Word\"] = 256] = \"Word\";\n  TokenKind[TokenKind[\"Range\"] = 512] = \"Range\";\n  TokenKind[TokenKind[\"Quoted\"] = 1024] = \"Quoted\";\n  TokenKind[TokenKind[\"Operator\"] = 2048] = \"Operator\";\n  TokenKind[TokenKind[\"Delimited\"] = 12] = \"Delimited\";\n})(TokenKind || (TokenKind = {}));\nfunction isDelimitedToken(val) {\n  return !!(getKind(val) & TokenKind.Delimited);\n}\nfunction isOperatorToken(val) {\n  return getKind(val) === TokenKind.Operator;\n}\nfunction isHTMLToken(val) {\n  return getKind(val) === TokenKind.HTML;\n}\nfunction isOutputToken(val) {\n  return getKind(val) === TokenKind.Output;\n}\nfunction isTagToken(val) {\n  return getKind(val) === TokenKind.Tag;\n}\nfunction isQuotedToken(val) {\n  return getKind(val) === TokenKind.Quoted;\n}\nfunction isLiteralToken(val) {\n  return getKind(val) === TokenKind.Literal;\n}\nfunction isNumberToken(val) {\n  return getKind(val) === TokenKind.Number;\n}\nfunction isPropertyAccessToken(val) {\n  return getKind(val) === TokenKind.PropertyAccess;\n}\nfunction isWordToken(val) {\n  return getKind(val) === TokenKind.Word;\n}\nfunction isRangeToken(val) {\n  return getKind(val) === TokenKind.Range;\n}\nfunction getKind(val) {\n  return val ? val.kind : -1;\n}\nvar typeGuards = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isDelimitedToken: isDelimitedToken,\n  isOperatorToken: isOperatorToken,\n  isHTMLToken: isHTMLToken,\n  isOutputToken: isOutputToken,\n  isTagToken: isTagToken,\n  isQuotedToken: isQuotedToken,\n  isLiteralToken: isLiteralToken,\n  isNumberToken: isNumberToken,\n  isPropertyAccessToken: isPropertyAccessToken,\n  isWordToken: isWordToken,\n  isRangeToken: isRangeToken\n});\nclass NullDrop extends Drop {\n  equals(value) {\n    return isNil(toValue(value));\n  }\n  gt() {\n    return false;\n  }\n  geq() {\n    return false;\n  }\n  lt() {\n    return false;\n  }\n  leq() {\n    return false;\n  }\n  valueOf() {\n    return null;\n  }\n}\nclass EmptyDrop extends Drop {\n  equals(value) {\n    if (value instanceof EmptyDrop) return false;\n    value = toValue(value);\n    if (isString(value) || isArray(value)) return value.length === 0;\n    if (isObject(value)) return Object.keys(value).length === 0;\n    return false;\n  }\n  gt() {\n    return false;\n  }\n  geq() {\n    return false;\n  }\n  lt() {\n    return false;\n  }\n  leq() {\n    return false;\n  }\n  valueOf() {\n    return '';\n  }\n}\nclass BlankDrop extends EmptyDrop {\n  equals(value) {\n    if (value === false) return true;\n    if (isNil(toValue(value))) return true;\n    if (isString(value)) return /^\\s*$/.test(value);\n    return super.equals(value);\n  }\n}\nconst nil = new NullDrop();\nconst literalValues = {\n  'true': true,\n  'false': false,\n  'nil': nil,\n  'null': nil,\n  'empty': new EmptyDrop(),\n  'blank': new BlankDrop()\n};\nconst rHex = /[\\da-fA-F]/;\nconst rOct = /[0-7]/;\nconst escapeChar = {\n  b: '\\b',\n  f: '\\f',\n  n: '\\n',\n  r: '\\r',\n  t: '\\t',\n  v: '\\x0B'\n};\nfunction hexVal(c) {\n  const code = c.charCodeAt(0);\n  if (code >= 97) return code - 87;\n  if (code >= 65) return code - 55;\n  return code - 48;\n}\nfunction parseStringLiteral(str) {\n  let ret = '';\n  for (let i = 1; i < str.length - 1; i++) {\n    if (str[i] !== '\\\\') {\n      ret += str[i];\n      continue;\n    }\n    if (escapeChar[str[i + 1]] !== undefined) {\n      ret += escapeChar[str[++i]];\n    } else if (str[i + 1] === 'u') {\n      let val = 0;\n      let j = i + 2;\n      while (j <= i + 5 && rHex.test(str[j])) {\n        val = val * 16 + hexVal(str[j++]);\n      }\n      i = j - 1;\n      ret += String.fromCharCode(val);\n    } else if (!rOct.test(str[i + 1])) {\n      ret += str[++i];\n    } else {\n      let j = i + 1;\n      let val = 0;\n      while (j <= i + 3 && rOct.test(str[j])) {\n        val = val * 8 + hexVal(str[j++]);\n      }\n      i = j - 1;\n      ret += String.fromCharCode(val);\n    }\n  }\n  return ret;\n}\n\n// convert an async iterator to a Promise\nfunction toPromise(val) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (!isIterator(val)) return val;\n    let value;\n    let done = false;\n    let next = 'next';\n    do {\n      const state = val[next](value);\n      done = state.done;\n      value = state.value;\n      next = 'next';\n      try {\n        if (isIterator(value)) value = toPromise(value);\n        if (isPromise(value)) value = yield value;\n      } catch (err) {\n        next = 'throw';\n        value = err;\n      }\n    } while (!done);\n    return value;\n  });\n}\n// convert an async iterator to a value in a synchronous manner\nfunction toValueSync(val) {\n  if (!isIterator(val)) return val;\n  let value;\n  let done = false;\n  let next = 'next';\n  do {\n    const state = val[next](value);\n    done = state.done;\n    value = state.value;\n    next = 'next';\n    if (isIterator(value)) {\n      try {\n        value = toValueSync(value);\n      } catch (err) {\n        next = 'throw';\n        value = err;\n      }\n    }\n  } while (!done);\n  return value;\n}\nconst toThenable = toPromise;\nclass Expression {\n  constructor(tokens) {\n    this.postfix = [...toPostfix(tokens)];\n  }\n  *evaluate(ctx, lenient) {\n    assert(ctx, 'unable to evaluate: context not defined');\n    const operands = [];\n    for (const token of this.postfix) {\n      if (isOperatorToken(token)) {\n        const r = operands.pop();\n        const l = operands.pop();\n        const result = yield evalOperatorToken(ctx.opts.operators, token, l, r, ctx);\n        operands.push(result);\n      } else {\n        operands.push(yield _evalToken(token, ctx, lenient && this.postfix.length === 1));\n      }\n    }\n    return operands[0];\n  }\n}\n/**\r\n * @deprecated use `_evalToken` instead\r\n */\nfunction* evalToken(token, ctx, lenient = false) {\n  return toValueSync(_evalToken(token, ctx, lenient));\n}\nfunction* _evalToken(token, ctx, lenient = false) {\n  if (isPropertyAccessToken(token)) return yield evalPropertyAccessToken(token, ctx, lenient);\n  if (isRangeToken(token)) return yield evalRangeToken(token, ctx);\n  if (isLiteralToken(token)) return evalLiteralToken(token);\n  if (isNumberToken(token)) return evalNumberToken(token);\n  if (isWordToken(token)) return token.getText();\n  if (isQuotedToken(token)) return evalQuotedToken(token);\n}\nfunction* evalPropertyAccessToken(token, ctx, lenient) {\n  const props = [];\n  for (const prop of token.props) {\n    props.push(yield _evalToken(prop, ctx, false));\n  }\n  try {\n    return yield ctx._get([token.propertyName, ...props]);\n  } catch (e) {\n    if (lenient && e.name === 'InternalUndefinedVariableError') return null;\n    throw new UndefinedVariableError(e, token);\n  }\n}\nfunction evalNumberToken(token) {\n  const str = token.whole.content + '.' + (token.decimal ? token.decimal.content : '');\n  return Number(str);\n}\nfunction evalQuotedToken(token) {\n  return parseStringLiteral(token.getText());\n}\nfunction evalOperatorToken(operators, token, lhs, rhs, ctx) {\n  const impl = operators[token.operator];\n  return impl(lhs, rhs, ctx);\n}\nfunction evalLiteralToken(token) {\n  return literalValues[token.literal];\n}\nfunction* evalRangeToken(token, ctx) {\n  const low = yield _evalToken(token.lhs, ctx);\n  const high = yield _evalToken(token.rhs, ctx);\n  return range(+low, +high + 1);\n}\nfunction* toPostfix(tokens) {\n  const ops = [];\n  for (const token of tokens) {\n    if (isOperatorToken(token)) {\n      while (ops.length && ops[ops.length - 1].getPrecedence() > token.getPrecedence()) {\n        yield ops.pop();\n      }\n      ops.push(token);\n    } else yield token;\n  }\n  while (ops.length) {\n    yield ops.pop();\n  }\n}\nclass Token {\n  constructor(kind, input, begin, end, file) {\n    this.kind = kind;\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.file = file;\n  }\n  getText() {\n    return this.input.slice(this.begin, this.end);\n  }\n  getPosition() {\n    let [row, col] = [1, 1];\n    for (let i = 0; i < this.begin; i++) {\n      if (this.input[i] === '\\n') {\n        row++;\n        col = 1;\n      } else col++;\n    }\n    return [row, col];\n  }\n  size() {\n    return this.end - this.begin;\n  }\n}\nclass DelimitedToken extends Token {\n  constructor(kind, content, input, begin, end, trimLeft, trimRight, file) {\n    super(kind, input, begin, end, file);\n    this.trimLeft = false;\n    this.trimRight = false;\n    this.content = this.getText();\n    const tl = content[0] === '-';\n    const tr = last$1(content) === '-';\n    this.content = content.slice(tl ? 1 : 0, tr ? -1 : content.length).trim();\n    this.trimLeft = tl || trimLeft;\n    this.trimRight = tr || trimRight;\n  }\n}\nfunction whiteSpaceCtrl(tokens, options) {\n  let inRaw = false;\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (!isDelimitedToken(token)) continue;\n    if (!inRaw && token.trimLeft) {\n      trimLeft(tokens[i - 1], options.greedy);\n    }\n    if (isTagToken(token)) {\n      if (token.name === 'raw') inRaw = true;else if (token.name === 'endraw') inRaw = false;\n    }\n    if (!inRaw && token.trimRight) {\n      trimRight(tokens[i + 1], options.greedy);\n    }\n  }\n}\nfunction trimLeft(token, greedy) {\n  if (!token || !isHTMLToken(token)) return;\n  const mask = greedy ? BLANK : INLINE_BLANK;\n  while (TYPES[token.input.charCodeAt(token.end - 1 - token.trimRight)] & mask) token.trimRight++;\n}\nfunction trimRight(token, greedy) {\n  if (!token || !isHTMLToken(token)) return;\n  const mask = greedy ? BLANK : INLINE_BLANK;\n  while (TYPES[token.input.charCodeAt(token.begin + token.trimLeft)] & mask) token.trimLeft++;\n  if (token.input.charAt(token.begin + token.trimLeft) === '\\n') token.trimLeft++;\n}\nclass NumberToken extends Token {\n  constructor(whole, decimal) {\n    super(TokenKind.Number, whole.input, whole.begin, decimal ? decimal.end : whole.end, whole.file);\n    this.whole = whole;\n    this.decimal = decimal;\n  }\n}\nclass IdentifierToken extends Token {\n  constructor(input, begin, end, file) {\n    super(TokenKind.Word, input, begin, end, file);\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.file = file;\n    this.content = this.getText();\n  }\n  isNumber(allowSign = false) {\n    const begin = allowSign && TYPES[this.input.charCodeAt(this.begin)] & SIGN ? this.begin + 1 : this.begin;\n    for (let i = begin; i < this.end; i++) {\n      if (!(TYPES[this.input.charCodeAt(i)] & NUMBER)) return false;\n    }\n    return true;\n  }\n}\nclass LiteralToken extends Token {\n  constructor(input, begin, end, file) {\n    super(TokenKind.Literal, input, begin, end, file);\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.file = file;\n    this.literal = this.getText();\n  }\n}\nconst precedence = {\n  '==': 1,\n  '!=': 1,\n  '>': 1,\n  '<': 1,\n  '>=': 1,\n  '<=': 1,\n  'contains': 1,\n  'and': 0,\n  'or': 0\n};\nclass OperatorToken extends Token {\n  constructor(input, begin, end, file) {\n    super(TokenKind.Operator, input, begin, end, file);\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.file = file;\n    this.operator = this.getText();\n  }\n  getPrecedence() {\n    const key = this.getText();\n    return key in precedence ? precedence[key] : 1;\n  }\n}\nclass PropertyAccessToken extends Token {\n  constructor(variable, props, end) {\n    super(TokenKind.PropertyAccess, variable.input, variable.begin, end, variable.file);\n    this.variable = variable;\n    this.props = props;\n    this.propertyName = this.variable instanceof IdentifierToken ? this.variable.getText() : parseStringLiteral(this.variable.getText());\n  }\n}\nclass FilterToken extends Token {\n  constructor(name, args, input, begin, end, file) {\n    super(TokenKind.Filter, input, begin, end, file);\n    this.name = name;\n    this.args = args;\n  }\n}\nclass HashToken extends Token {\n  constructor(input, begin, end, name, value, file) {\n    super(TokenKind.Hash, input, begin, end, file);\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.name = name;\n    this.value = value;\n    this.file = file;\n  }\n}\nclass QuotedToken extends Token {\n  constructor(input, begin, end, file) {\n    super(TokenKind.Quoted, input, begin, end, file);\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.file = file;\n  }\n}\nclass HTMLToken extends Token {\n  constructor(input, begin, end, file) {\n    super(TokenKind.HTML, input, begin, end, file);\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.file = file;\n    this.trimLeft = 0;\n    this.trimRight = 0;\n  }\n  getContent() {\n    return this.input.slice(this.begin + this.trimLeft, this.end - this.trimRight);\n  }\n}\nclass RangeToken extends Token {\n  constructor(input, begin, end, lhs, rhs, file) {\n    super(TokenKind.Range, input, begin, end, file);\n    this.input = input;\n    this.begin = begin;\n    this.end = end;\n    this.lhs = lhs;\n    this.rhs = rhs;\n    this.file = file;\n  }\n}\nclass OutputToken extends DelimitedToken {\n  constructor(input, begin, end, options, file) {\n    const {\n      trimOutputLeft,\n      trimOutputRight,\n      outputDelimiterLeft,\n      outputDelimiterRight\n    } = options;\n    const value = input.slice(begin + outputDelimiterLeft.length, end - outputDelimiterRight.length);\n    super(TokenKind.Output, value, input, begin, end, trimOutputLeft, trimOutputRight, file);\n  }\n}\nfunction matchOperator(str, begin, trie, end = str.length) {\n  let node = trie;\n  let i = begin;\n  let info;\n  while (node[str[i]] && i < end) {\n    node = node[str[i++]];\n    if (node['end']) info = node;\n  }\n  if (!info) return -1;\n  if (info['needBoundary'] && TYPES[str.charCodeAt(i)] & IDENTIFIER) return -1;\n  return i;\n}\nclass LiquidTagToken extends DelimitedToken {\n  constructor(input, begin, end, options, file) {\n    const value = input.slice(begin, end);\n    super(TokenKind.Tag, value, input, begin, end, false, false, file);\n    if (!/\\S/.test(value)) {\n      // A line that contains only whitespace.\n      this.name = '';\n      this.args = '';\n    } else {\n      const tokenizer = new Tokenizer(this.content, options.operatorsTrie);\n      this.name = tokenizer.readTagName();\n      if (!this.name) throw new TokenizationError(`illegal liquid tag syntax`, this);\n      tokenizer.skipBlank();\n      this.args = tokenizer.remaining();\n    }\n  }\n}\nclass Tokenizer {\n  constructor(input, trie = defaultOptions.operatorsTrie, file = '') {\n    this.input = input;\n    this.trie = trie;\n    this.file = file;\n    this.p = 0;\n    this.rawBeginAt = -1;\n    this.N = input.length;\n  }\n  readExpression() {\n    return new Expression(this.readExpressionTokens());\n  }\n  *readExpressionTokens() {\n    const operand = this.readValue();\n    if (!operand) return;\n    yield operand;\n    while (this.p < this.N) {\n      const operator = this.readOperator();\n      if (!operator) return;\n      const operand = this.readValue();\n      if (!operand) return;\n      yield operator;\n      yield operand;\n    }\n  }\n  readOperator() {\n    this.skipBlank();\n    const end = matchOperator(this.input, this.p, this.trie);\n    if (end === -1) return;\n    return new OperatorToken(this.input, this.p, this.p = end, this.file);\n  }\n  readFilters() {\n    const filters = [];\n    while (true) {\n      const filter = this.readFilter();\n      if (!filter) return filters;\n      filters.push(filter);\n    }\n  }\n  readFilter() {\n    this.skipBlank();\n    if (this.end()) return null;\n    assert(this.peek() === '|', () => `unexpected token at ${this.snapshot()}`);\n    this.p++;\n    const begin = this.p;\n    const name = this.readIdentifier();\n    if (!name.size()) return null;\n    const args = [];\n    this.skipBlank();\n    if (this.peek() === ':') {\n      do {\n        ++this.p;\n        const arg = this.readFilterArg();\n        arg && args.push(arg);\n        this.skipBlank();\n        assert(this.end() || this.peek() === ',' || this.peek() === '|', () => `unexpected character ${this.snapshot()}`);\n      } while (this.peek() === ',');\n    }\n    return new FilterToken(name.getText(), args, this.input, begin, this.p, this.file);\n  }\n  readFilterArg() {\n    const key = this.readValue();\n    if (!key) return;\n    this.skipBlank();\n    if (this.peek() !== ':') return key;\n    ++this.p;\n    const value = this.readValue();\n    return [key.getText(), value];\n  }\n  readTopLevelTokens(options = defaultOptions) {\n    const tokens = [];\n    while (this.p < this.N) {\n      const token = this.readTopLevelToken(options);\n      tokens.push(token);\n    }\n    whiteSpaceCtrl(tokens, options);\n    return tokens;\n  }\n  readTopLevelToken(options) {\n    const {\n      tagDelimiterLeft,\n      outputDelimiterLeft\n    } = options;\n    if (this.rawBeginAt > -1) return this.readEndrawOrRawContent(options);\n    if (this.match(tagDelimiterLeft)) return this.readTagToken(options);\n    if (this.match(outputDelimiterLeft)) return this.readOutputToken(options);\n    return this.readHTMLToken([tagDelimiterLeft, outputDelimiterLeft]);\n  }\n  readHTMLToken(stopStrings) {\n    const begin = this.p;\n    while (this.p < this.N) {\n      if (stopStrings.some(str => this.match(str))) break;\n      ++this.p;\n    }\n    return new HTMLToken(this.input, begin, this.p, this.file);\n  }\n  readTagToken(options = defaultOptions) {\n    const {\n      file,\n      input\n    } = this;\n    const begin = this.p;\n    if (this.readToDelimiter(options.tagDelimiterRight) === -1) {\n      throw this.mkError(`tag ${this.snapshot(begin)} not closed`, begin);\n    }\n    const token = new TagToken(input, begin, this.p, options, file);\n    if (token.name === 'raw') this.rawBeginAt = begin;\n    return token;\n  }\n  readToDelimiter(delimiter) {\n    while (this.p < this.N) {\n      if (this.peekType() & QUOTE) {\n        this.readQuoted();\n        continue;\n      }\n      ++this.p;\n      if (this.rmatch(delimiter)) return this.p;\n    }\n    return -1;\n  }\n  readOutputToken(options = defaultOptions) {\n    const {\n      file,\n      input\n    } = this;\n    const {\n      outputDelimiterRight\n    } = options;\n    const begin = this.p;\n    if (this.readToDelimiter(outputDelimiterRight) === -1) {\n      throw this.mkError(`output ${this.snapshot(begin)} not closed`, begin);\n    }\n    return new OutputToken(input, begin, this.p, options, file);\n  }\n  readEndrawOrRawContent(options) {\n    const {\n      tagDelimiterLeft,\n      tagDelimiterRight\n    } = options;\n    const begin = this.p;\n    let leftPos = this.readTo(tagDelimiterLeft) - tagDelimiterLeft.length;\n    while (this.p < this.N) {\n      if (this.readIdentifier().getText() !== 'endraw') {\n        leftPos = this.readTo(tagDelimiterLeft) - tagDelimiterLeft.length;\n        continue;\n      }\n      while (this.p <= this.N) {\n        if (this.rmatch(tagDelimiterRight)) {\n          const end = this.p;\n          if (begin === leftPos) {\n            this.rawBeginAt = -1;\n            return new TagToken(this.input, begin, end, options, this.file);\n          } else {\n            this.p = leftPos;\n            return new HTMLToken(this.input, begin, leftPos, this.file);\n          }\n        }\n        if (this.rmatch(tagDelimiterLeft)) break;\n        this.p++;\n      }\n    }\n    throw this.mkError(`raw ${this.snapshot(this.rawBeginAt)} not closed`, begin);\n  }\n  readLiquidTagTokens(options = defaultOptions) {\n    const tokens = [];\n    while (this.p < this.N) {\n      const token = this.readLiquidTagToken(options);\n      if (token.name) tokens.push(token);\n    }\n    return tokens;\n  }\n  readLiquidTagToken(options) {\n    const {\n      file,\n      input\n    } = this;\n    const begin = this.p;\n    let end = this.N;\n    if (this.readToDelimiter('\\n') !== -1) end = this.p;\n    return new LiquidTagToken(input, begin, end, options, file);\n  }\n  mkError(msg, begin) {\n    return new TokenizationError(msg, new IdentifierToken(this.input, begin, this.N, this.file));\n  }\n  snapshot(begin = this.p) {\n    return JSON.stringify(ellipsis(this.input.slice(begin), 16));\n  }\n  /**\r\n   * @deprecated\r\n   */\n  readWord() {\n    console.warn('Tokenizer#readWord() will be removed, use #readIdentifier instead');\n    return this.readIdentifier();\n  }\n  readIdentifier() {\n    this.skipBlank();\n    const begin = this.p;\n    while (this.peekType() & IDENTIFIER) ++this.p;\n    return new IdentifierToken(this.input, begin, this.p, this.file);\n  }\n  readTagName() {\n    this.skipBlank();\n    // Handle inline comment tags\n    if (this.input[this.p] === '#') return this.input.slice(this.p, ++this.p);\n    return this.readIdentifier().getText();\n  }\n  readHashes(jekyllStyle) {\n    const hashes = [];\n    while (true) {\n      const hash = this.readHash(jekyllStyle);\n      if (!hash) return hashes;\n      hashes.push(hash);\n    }\n  }\n  readHash(jekyllStyle) {\n    this.skipBlank();\n    if (this.peek() === ',') ++this.p;\n    const begin = this.p;\n    const name = this.readIdentifier();\n    if (!name.size()) return;\n    let value;\n    this.skipBlank();\n    const sep = jekyllStyle ? '=' : ':';\n    if (this.peek() === sep) {\n      ++this.p;\n      value = this.readValue();\n    }\n    return new HashToken(this.input, begin, this.p, name, value, this.file);\n  }\n  remaining() {\n    return this.input.slice(this.p);\n  }\n  advance(i = 1) {\n    this.p += i;\n  }\n  end() {\n    return this.p >= this.N;\n  }\n  readTo(end) {\n    while (this.p < this.N) {\n      ++this.p;\n      if (this.rmatch(end)) return this.p;\n    }\n    return -1;\n  }\n  readValue() {\n    const value = this.readQuoted() || this.readRange();\n    if (value) return value;\n    if (this.peek() === '[') {\n      this.p++;\n      const prop = this.readQuoted();\n      if (!prop) return;\n      if (this.peek() !== ']') return;\n      this.p++;\n      return new PropertyAccessToken(prop, [], this.p);\n    }\n    const variable = this.readIdentifier();\n    if (!variable.size()) return;\n    let isNumber = variable.isNumber(true);\n    const props = [];\n    while (true) {\n      if (this.peek() === '[') {\n        isNumber = false;\n        this.p++;\n        const prop = this.readValue() || new IdentifierToken(this.input, this.p, this.p, this.file);\n        this.readTo(']');\n        props.push(prop);\n      } else if (this.peek() === '.' && this.peek(1) !== '.') {\n        // skip range syntax\n        this.p++;\n        const prop = this.readIdentifier();\n        if (!prop.size()) break;\n        if (!prop.isNumber()) isNumber = false;\n        props.push(prop);\n      } else break;\n    }\n    if (!props.length && literalValues.hasOwnProperty(variable.content)) {\n      return new LiteralToken(this.input, variable.begin, variable.end, this.file);\n    }\n    if (isNumber) return new NumberToken(variable, props[0]);\n    return new PropertyAccessToken(variable, props, this.p);\n  }\n  readRange() {\n    this.skipBlank();\n    const begin = this.p;\n    if (this.peek() !== '(') return;\n    ++this.p;\n    const lhs = this.readValueOrThrow();\n    this.p += 2;\n    const rhs = this.readValueOrThrow();\n    ++this.p;\n    return new RangeToken(this.input, begin, this.p, lhs, rhs, this.file);\n  }\n  readValueOrThrow() {\n    const value = this.readValue();\n    assert(value, () => `unexpected token ${this.snapshot()}, value expected`);\n    return value;\n  }\n  readQuoted() {\n    this.skipBlank();\n    const begin = this.p;\n    if (!(this.peekType() & QUOTE)) return;\n    ++this.p;\n    let escaped = false;\n    while (this.p < this.N) {\n      ++this.p;\n      if (this.input[this.p - 1] === this.input[begin] && !escaped) break;\n      if (escaped) escaped = false;else if (this.input[this.p - 1] === '\\\\') escaped = true;\n    }\n    return new QuotedToken(this.input, begin, this.p, this.file);\n  }\n  *readFileNameTemplate(options) {\n    const {\n      outputDelimiterLeft\n    } = options;\n    const htmlStopStrings = [',', ' ', outputDelimiterLeft];\n    const htmlStopStringSet = new Set(htmlStopStrings);\n    // break on ',' and ' ', outputDelimiterLeft only stops HTML token\n    while (this.p < this.N && !htmlStopStringSet.has(this.peek())) {\n      yield this.match(outputDelimiterLeft) ? this.readOutputToken(options) : this.readHTMLToken(htmlStopStrings);\n    }\n  }\n  match(word) {\n    for (let i = 0; i < word.length; i++) {\n      if (word[i] !== this.input[this.p + i]) return false;\n    }\n    return true;\n  }\n  rmatch(pattern) {\n    for (let i = 0; i < pattern.length; i++) {\n      if (pattern[pattern.length - 1 - i] !== this.input[this.p - 1 - i]) return false;\n    }\n    return true;\n  }\n  peekType(n = 0) {\n    return TYPES[this.input.charCodeAt(this.p + n)];\n  }\n  peek(n = 0) {\n    return this.input[this.p + n];\n  }\n  skipBlank() {\n    while (this.peekType() & BLANK) ++this.p;\n  }\n}\nclass TagToken extends DelimitedToken {\n  constructor(input, begin, end, options, file) {\n    const {\n      trimTagLeft,\n      trimTagRight,\n      tagDelimiterLeft,\n      tagDelimiterRight\n    } = options;\n    const value = input.slice(begin + tagDelimiterLeft.length, end - tagDelimiterRight.length);\n    super(TokenKind.Tag, value, input, begin, end, trimTagLeft, trimTagRight, file);\n    const tokenizer = new Tokenizer(this.content, options.operatorsTrie);\n    this.name = tokenizer.readTagName();\n    if (!this.name) throw new TokenizationError(`illegal tag syntax`, this);\n    tokenizer.skipBlank();\n    this.args = tokenizer.remaining();\n  }\n}\nclass ParseStream {\n  constructor(tokens, parseToken) {\n    this.handlers = {};\n    this.stopRequested = false;\n    this.tokens = tokens;\n    this.parseToken = parseToken;\n  }\n  on(name, cb) {\n    this.handlers[name] = cb;\n    return this;\n  }\n  trigger(event, arg) {\n    const h = this.handlers[event];\n    return h ? (h.call(this, arg), true) : false;\n  }\n  start() {\n    this.trigger('start');\n    let token;\n    while (!this.stopRequested && (token = this.tokens.shift())) {\n      if (this.trigger('token', token)) continue;\n      if (isTagToken(token) && this.trigger(`tag:${token.name}`, token)) {\n        continue;\n      }\n      const template = this.parseToken(token, this.tokens);\n      this.trigger('template', template);\n    }\n    if (!this.stopRequested) this.trigger('end');\n    return this;\n  }\n  stop() {\n    this.stopRequested = true;\n    return this;\n  }\n}\n\n/**\r\n * Key-Value Pairs Representing Tag Arguments\r\n * Example:\r\n *    For the markup `, foo:'bar', coo:2 reversed %}`,\r\n *    hash['foo'] === 'bar'\r\n *    hash['coo'] === 2\r\n *    hash['reversed'] === undefined\r\n */\nclass Hash {\n  constructor(markup, jekyllStyle) {\n    this.hash = {};\n    const tokenizer = new Tokenizer(markup, {});\n    for (const hash of tokenizer.readHashes(jekyllStyle)) {\n      this.hash[hash.name.content] = hash.value;\n    }\n  }\n  *render(ctx) {\n    const hash = {};\n    for (const key of Object.keys(this.hash)) {\n      hash[key] = this.hash[key] === undefined ? true : yield _evalToken(this.hash[key], ctx);\n    }\n    return hash;\n  }\n}\nfunction isKeyValuePair(arr) {\n  return isArray(arr);\n}\nclass Filter {\n  constructor(name, impl, args, liquid) {\n    this.name = name;\n    this.impl = impl || identify;\n    this.args = args;\n    this.liquid = liquid;\n  }\n  *render(value, context) {\n    const argv = [];\n    for (const arg of this.args) {\n      if (isKeyValuePair(arg)) argv.push([arg[0], yield _evalToken(arg[1], context)]);else argv.push(yield _evalToken(arg, context));\n    }\n    return this.impl.apply({\n      context,\n      liquid: this.liquid\n    }, [value, ...argv]);\n  }\n}\nclass Value {\n  /**\r\n   * @param str the value to be valuated, eg.: \"foobar\" | truncate: 3\r\n   */\n  constructor(str, liquid) {\n    this.filters = [];\n    const tokenizer = new Tokenizer(str, liquid.options.operatorsTrie);\n    this.initial = tokenizer.readExpression();\n    this.filters = tokenizer.readFilters().map(({\n      name,\n      args\n    }) => new Filter(name, liquid.filters.get(name), args, liquid));\n  }\n  *value(ctx, lenient) {\n    lenient = lenient || ctx.opts.lenientIf && this.filters.length > 0 && this.filters[0].name === 'default';\n    let val = yield this.initial.evaluate(ctx, lenient);\n    for (const filter of this.filters) {\n      val = yield filter.render(val, ctx);\n    }\n    return val;\n  }\n}\nvar assign = {\n  parse: function (token) {\n    const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\n    this.key = tokenizer.readIdentifier().content;\n    tokenizer.skipBlank();\n    assert(tokenizer.peek() === '=', () => `illegal token ${token.getText()}`);\n    tokenizer.advance();\n    this.value = new Value(tokenizer.remaining(), this.liquid);\n  },\n  render: function* (ctx) {\n    ctx.bottom()[this.key] = yield this.value.value(ctx, this.liquid.options.lenientIf);\n  }\n};\nclass ForloopDrop extends Drop {\n  constructor(length, collection, variable) {\n    super();\n    this.i = 0;\n    this.length = length;\n    this.name = `${variable}-${collection}`;\n  }\n  next() {\n    this.i++;\n  }\n  index0() {\n    return this.i;\n  }\n  index() {\n    return this.i + 1;\n  }\n  first() {\n    return this.i === 0;\n  }\n  last() {\n    return this.i === this.length - 1;\n  }\n  rindex() {\n    return this.length - this.i;\n  }\n  rindex0() {\n    return this.length - this.i - 1;\n  }\n  valueOf() {\n    return JSON.stringify(this);\n  }\n}\nconst MODIFIERS = ['offset', 'limit', 'reversed'];\nvar For = {\n  type: 'block',\n  parse: function (token, remainTokens) {\n    const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\n    const variable = tokenizer.readIdentifier();\n    const inStr = tokenizer.readIdentifier();\n    const collection = tokenizer.readValue();\n    assert(variable.size() && inStr.content === 'in' && collection, () => `illegal tag: ${token.getText()}`);\n    this.variable = variable.content;\n    this.collection = collection;\n    this.hash = new Hash(tokenizer.remaining());\n    this.templates = [];\n    this.elseTemplates = [];\n    let p;\n    const stream = this.liquid.parser.parseStream(remainTokens).on('start', () => p = this.templates).on('tag:else', () => p = this.elseTemplates).on('tag:endfor', () => stream.stop()).on('template', tpl => p.push(tpl)).on('end', () => {\n      throw new Error(`tag ${token.getText()} not closed`);\n    });\n    stream.start();\n  },\n  render: function* (ctx, emitter) {\n    const r = this.liquid.renderer;\n    let collection = toEnumerable(yield _evalToken(this.collection, ctx));\n    if (!collection.length) {\n      yield r.renderTemplates(this.elseTemplates, ctx, emitter);\n      return;\n    }\n    const continueKey = 'continue-' + this.variable + '-' + this.collection.getText();\n    ctx.push({\n      continue: ctx.getRegister(continueKey)\n    });\n    const hash = yield this.hash.render(ctx);\n    ctx.pop();\n    const modifiers = this.liquid.options.orderedFilterParameters ? Object.keys(hash).filter(x => MODIFIERS.includes(x)) : MODIFIERS.filter(x => hash[x] !== undefined);\n    collection = modifiers.reduce((collection, modifier) => {\n      if (modifier === 'offset') return offset(collection, hash['offset']);\n      if (modifier === 'limit') return limit(collection, hash['limit']);\n      return reversed(collection);\n    }, collection);\n    ctx.setRegister(continueKey, (hash['offset'] || 0) + collection.length);\n    const scope = {\n      forloop: new ForloopDrop(collection.length, this.collection.getText(), this.variable)\n    };\n    ctx.push(scope);\n    for (const item of collection) {\n      scope[this.variable] = item;\n      yield r.renderTemplates(this.templates, ctx, emitter);\n      if (emitter['break']) {\n        emitter['break'] = false;\n        break;\n      }\n      emitter['continue'] = false;\n      scope.forloop.next();\n    }\n    ctx.pop();\n  }\n};\nfunction reversed(arr) {\n  return [...arr].reverse();\n}\nfunction offset(arr, count) {\n  return arr.slice(count);\n}\nfunction limit(arr, count) {\n  return arr.slice(0, count);\n}\nvar capture = {\n  parse: function (tagToken, remainTokens) {\n    const tokenizer = new Tokenizer(tagToken.args, this.liquid.options.operatorsTrie);\n    this.variable = readVariableName(tokenizer);\n    assert(this.variable, () => `${tagToken.args} not valid identifier`);\n    this.templates = [];\n    const stream = this.liquid.parser.parseStream(remainTokens);\n    stream.on('tag:endcapture', () => stream.stop()).on('template', tpl => this.templates.push(tpl)).on('end', () => {\n      throw new Error(`tag ${tagToken.getText()} not closed`);\n    });\n    stream.start();\n  },\n  render: function* (ctx) {\n    const r = this.liquid.renderer;\n    const html = yield r.renderTemplates(this.templates, ctx);\n    ctx.bottom()[this.variable] = html;\n  }\n};\nfunction readVariableName(tokenizer) {\n  const word = tokenizer.readIdentifier().content;\n  if (word) return word;\n  const quoted = tokenizer.readQuoted();\n  if (quoted) return evalQuotedToken(quoted);\n}\nvar Case = {\n  parse: function (tagToken, remainTokens) {\n    this.cond = new Value(tagToken.args, this.liquid);\n    this.cases = [];\n    this.elseTemplates = [];\n    let p = [];\n    const stream = this.liquid.parser.parseStream(remainTokens).on('tag:when', token => {\n      p = [];\n      const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\n      while (!tokenizer.end()) {\n        const value = tokenizer.readValue();\n        this.cases.push({\n          val: value,\n          templates: p\n        });\n        tokenizer.readTo(',');\n      }\n    }).on('tag:else', () => p = this.elseTemplates).on('tag:endcase', () => stream.stop()).on('template', tpl => p.push(tpl)).on('end', () => {\n      throw new Error(`tag ${tagToken.getText()} not closed`);\n    });\n    stream.start();\n  },\n  render: function* (ctx, emitter) {\n    const r = this.liquid.renderer;\n    const cond = toValue(yield this.cond.value(ctx, ctx.opts.lenientIf));\n    for (const branch of this.cases) {\n      const val = yield _evalToken(branch.val, ctx, ctx.opts.lenientIf);\n      if (val === cond) {\n        yield r.renderTemplates(branch.templates, ctx, emitter);\n        return;\n      }\n    }\n    yield r.renderTemplates(this.elseTemplates, ctx, emitter);\n  }\n};\nvar comment = {\n  parse: function (tagToken, remainTokens) {\n    const stream = this.liquid.parser.parseStream(remainTokens);\n    stream.on('token', token => {\n      if (token.name === 'endcomment') stream.stop();\n    }).on('end', () => {\n      throw new Error(`tag ${tagToken.getText()} not closed`);\n    });\n    stream.start();\n  }\n};\nvar BlockMode;\n(function (BlockMode) {\n  /* store rendered html into blocks */\n  BlockMode[BlockMode[\"OUTPUT\"] = 0] = \"OUTPUT\";\n  /* output rendered html directly */\n  BlockMode[BlockMode[\"STORE\"] = 1] = \"STORE\";\n})(BlockMode || (BlockMode = {}));\nvar BlockMode$1 = BlockMode;\nvar render = {\n  parseFilePath,\n  renderFilePath,\n  parse: function (token) {\n    const args = token.args;\n    const tokenizer = new Tokenizer(args, this.liquid.options.operatorsTrie);\n    this['file'] = this.parseFilePath(tokenizer, this.liquid);\n    this['currentFile'] = token.file;\n    while (!tokenizer.end()) {\n      tokenizer.skipBlank();\n      const begin = tokenizer.p;\n      const keyword = tokenizer.readIdentifier();\n      if (keyword.content === 'with' || keyword.content === 'for') {\n        tokenizer.skipBlank();\n        // can be normal key/value pair, like \"with: true\"\n        if (tokenizer.peek() !== ':') {\n          const value = tokenizer.readValue();\n          // can be normal key, like \"with,\"\n          if (value) {\n            const beforeAs = tokenizer.p;\n            const asStr = tokenizer.readIdentifier();\n            let alias;\n            if (asStr.content === 'as') alias = tokenizer.readIdentifier();else tokenizer.p = beforeAs;\n            this[keyword.content] = {\n              value,\n              alias: alias && alias.content\n            };\n            tokenizer.skipBlank();\n            if (tokenizer.peek() === ',') tokenizer.advance();\n            // matched!\n            continue;\n          }\n        }\n      }\n      /**\r\n       * restore cursor if with/for not matched\r\n       */\n      tokenizer.p = begin;\n      break;\n    }\n    this.hash = new Hash(tokenizer.remaining());\n  },\n  render: function* (ctx, emitter) {\n    const {\n      liquid,\n      hash\n    } = this;\n    const filepath = yield this.renderFilePath(this['file'], ctx, liquid);\n    assert(filepath, () => `illegal filename \"${filepath}\"`);\n    const childCtx = new Context({}, ctx.opts, {\n      sync: ctx.sync,\n      globals: ctx.globals,\n      strictVariables: ctx.strictVariables\n    });\n    const scope = childCtx.bottom();\n    __assign(scope, yield hash.render(ctx));\n    if (this['with']) {\n      const {\n        value,\n        alias\n      } = this['with'];\n      scope[alias || filepath] = yield _evalToken(value, ctx);\n    }\n    if (this['for']) {\n      const {\n        value,\n        alias\n      } = this['for'];\n      let collection = yield _evalToken(value, ctx);\n      collection = toEnumerable(collection);\n      scope['forloop'] = new ForloopDrop(collection.length, value.getText(), alias);\n      for (const item of collection) {\n        scope[alias] = item;\n        const templates = yield liquid._parsePartialFile(filepath, childCtx.sync, this['currentFile']);\n        yield liquid.renderer.renderTemplates(templates, childCtx, emitter);\n        scope['forloop'].next();\n      }\n    } else {\n      const templates = yield liquid._parsePartialFile(filepath, childCtx.sync, this['currentFile']);\n      yield liquid.renderer.renderTemplates(templates, childCtx, emitter);\n    }\n  }\n};\n/**\r\n * @return null for \"none\",\r\n * @return Template[] for quoted with tags and/or filters\r\n * @return Token for expression (not quoted)\r\n * @throws TypeError if cannot read next token\r\n */\nfunction parseFilePath(tokenizer, liquid) {\n  if (liquid.options.dynamicPartials) {\n    const file = tokenizer.readValue();\n    if (file === undefined) throw new TypeError(`illegal argument \"${tokenizer.input}\"`);\n    if (file.getText() === 'none') return null;\n    if (isQuotedToken(file)) {\n      // for filenames like \"files/{{file}}\", eval as liquid template\n      const templates = liquid.parse(evalQuotedToken(file));\n      return optimize(templates);\n    }\n    return file;\n  }\n  const tokens = [...tokenizer.readFileNameTemplate(liquid.options)];\n  const templates = optimize(liquid.parser.parseTokens(tokens));\n  return templates === 'none' ? null : templates;\n}\nfunction optimize(templates) {\n  // for filenames like \"files/file.liquid\", extract the string directly\n  if (templates.length === 1 && isHTMLToken(templates[0].token)) return templates[0].token.getContent();\n  return templates;\n}\nfunction* renderFilePath(file, ctx, liquid) {\n  if (typeof file === 'string') return file;\n  if (Array.isArray(file)) return liquid.renderer.renderTemplates(file, ctx);\n  return yield _evalToken(file, ctx);\n}\nvar include = {\n  parseFilePath,\n  renderFilePath,\n  parse: function (token) {\n    const args = token.args;\n    const tokenizer = new Tokenizer(args, this.liquid.options.operatorsTrie);\n    this['file'] = this.parseFilePath(tokenizer, this.liquid);\n    this['currentFile'] = token.file;\n    const begin = tokenizer.p;\n    const withStr = tokenizer.readIdentifier();\n    if (withStr.content === 'with') {\n      tokenizer.skipBlank();\n      if (tokenizer.peek() !== ':') {\n        this.withVar = tokenizer.readValue();\n      } else tokenizer.p = begin;\n    } else tokenizer.p = begin;\n    this.hash = new Hash(tokenizer.remaining(), this.liquid.options.jekyllInclude);\n  },\n  render: function* (ctx, emitter) {\n    const {\n      liquid,\n      hash,\n      withVar\n    } = this;\n    const {\n      renderer\n    } = liquid;\n    const filepath = yield this.renderFilePath(this['file'], ctx, liquid);\n    assert(filepath, () => `illegal filename \"${filepath}\"`);\n    const saved = ctx.saveRegister('blocks', 'blockMode');\n    ctx.setRegister('blocks', {});\n    ctx.setRegister('blockMode', BlockMode$1.OUTPUT);\n    const scope = yield hash.render(ctx);\n    if (withVar) scope[filepath] = yield _evalToken(withVar, ctx);\n    const templates = yield liquid._parsePartialFile(filepath, ctx.sync, this['currentFile']);\n    ctx.push(ctx.opts.jekyllInclude ? {\n      include: scope\n    } : scope);\n    yield renderer.renderTemplates(templates, ctx, emitter);\n    ctx.pop();\n    ctx.restoreRegister(saved);\n  }\n};\nvar decrement = {\n  parse: function (token) {\n    const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\n    this.variable = tokenizer.readIdentifier().content;\n  },\n  render: function (context, emitter) {\n    const scope = context.environments;\n    if (!isNumber(scope[this.variable])) {\n      scope[this.variable] = 0;\n    }\n    emitter.write(stringify(--scope[this.variable]));\n  }\n};\nvar cycle = {\n  parse: function (tagToken) {\n    const tokenizer = new Tokenizer(tagToken.args, this.liquid.options.operatorsTrie);\n    const group = tokenizer.readValue();\n    tokenizer.skipBlank();\n    this.candidates = [];\n    if (group) {\n      if (tokenizer.peek() === ':') {\n        this.group = group;\n        tokenizer.advance();\n      } else this.candidates.push(group);\n    }\n    while (!tokenizer.end()) {\n      const value = tokenizer.readValue();\n      if (value) this.candidates.push(value);\n      tokenizer.readTo(',');\n    }\n    assert(this.candidates.length, () => `empty candidates: ${tagToken.getText()}`);\n  },\n  render: function* (ctx, emitter) {\n    const group = yield _evalToken(this.group, ctx);\n    const fingerprint = `cycle:${group}:` + this.candidates.join(',');\n    const groups = ctx.getRegister('cycle');\n    let idx = groups[fingerprint];\n    if (idx === undefined) {\n      idx = groups[fingerprint] = 0;\n    }\n    const candidate = this.candidates[idx];\n    idx = (idx + 1) % this.candidates.length;\n    groups[fingerprint] = idx;\n    const html = yield _evalToken(candidate, ctx);\n    emitter.write(html);\n  }\n};\nvar If = {\n  parse: function (tagToken, remainTokens) {\n    this.branches = [];\n    this.elseTemplates = [];\n    let p;\n    this.liquid.parser.parseStream(remainTokens).on('start', () => this.branches.push({\n      predicate: new Value(tagToken.args, this.liquid),\n      templates: p = []\n    })).on('tag:elsif', token => this.branches.push({\n      predicate: new Value(token.args, this.liquid),\n      templates: p = []\n    })).on('tag:else', () => p = this.elseTemplates).on('tag:endif', function () {\n      this.stop();\n    }).on('template', tpl => p.push(tpl)).on('end', () => {\n      throw new Error(`tag ${tagToken.getText()} not closed`);\n    }).start();\n  },\n  render: function* (ctx, emitter) {\n    const r = this.liquid.renderer;\n    for (const {\n      predicate,\n      templates\n    } of this.branches) {\n      const value = yield predicate.value(ctx, ctx.opts.lenientIf);\n      if (isTruthy(value, ctx)) {\n        yield r.renderTemplates(templates, ctx, emitter);\n        return;\n      }\n    }\n    yield r.renderTemplates(this.elseTemplates, ctx, emitter);\n  }\n};\nvar increment = {\n  parse: function (token) {\n    const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\n    this.variable = tokenizer.readIdentifier().content;\n  },\n  render: function (context, emitter) {\n    const scope = context.environments;\n    if (!isNumber(scope[this.variable])) {\n      scope[this.variable] = 0;\n    }\n    const val = scope[this.variable];\n    scope[this.variable]++;\n    emitter.write(stringify(val));\n  }\n};\nvar layout = {\n  parseFilePath,\n  renderFilePath,\n  parse: function (token, remainTokens) {\n    const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\n    this['file'] = this.parseFilePath(tokenizer, this.liquid);\n    this['currentFile'] = token.file;\n    this.hash = new Hash(tokenizer.remaining());\n    this.tpls = this.liquid.parser.parseTokens(remainTokens);\n  },\n  render: function* (ctx, emitter) {\n    const {\n      liquid,\n      hash,\n      file\n    } = this;\n    const {\n      renderer\n    } = liquid;\n    if (file === null) {\n      ctx.setRegister('blockMode', BlockMode$1.OUTPUT);\n      yield renderer.renderTemplates(this.tpls, ctx, emitter);\n      return;\n    }\n    const filepath = yield this.renderFilePath(this['file'], ctx, liquid);\n    assert(filepath, () => `illegal filename \"${filepath}\"`);\n    const templates = yield liquid._parseLayoutFile(filepath, ctx.sync, this['currentFile']);\n    // render remaining contents and store rendered results\n    ctx.setRegister('blockMode', BlockMode$1.STORE);\n    const html = yield renderer.renderTemplates(this.tpls, ctx);\n    const blocks = ctx.getRegister('blocks');\n    // set whole content to anonymous block if anonymous doesn't specified\n    if (blocks[''] === undefined) blocks[''] = (parent, emitter) => emitter.write(html);\n    ctx.setRegister('blockMode', BlockMode$1.OUTPUT);\n    // render the layout file use stored blocks\n    ctx.push(yield hash.render(ctx));\n    yield renderer.renderTemplates(templates, ctx, emitter);\n    ctx.pop();\n  }\n};\nclass BlockDrop extends Drop {\n  constructor(\n  // the block render from layout template\n  superBlockRender = () => '') {\n    super();\n    this.superBlockRender = superBlockRender;\n  }\n  /**\r\n   * Provide parent access in child block by\r\n   * {{ block.super }}\r\n   */\n  super() {\n    return this.superBlockRender();\n  }\n}\nvar block = {\n  parse(token, remainTokens) {\n    const match = /\\w+/.exec(token.args);\n    this.block = match ? match[0] : '';\n    this.tpls = [];\n    this.liquid.parser.parseStream(remainTokens).on('tag:endblock', function () {\n      this.stop();\n    }).on('template', tpl => this.tpls.push(tpl)).on('end', () => {\n      throw new Error(`tag ${token.getText()} not closed`);\n    }).start();\n  },\n  *render(ctx, emitter) {\n    const blockRender = this.getBlockRender(ctx);\n    if (ctx.getRegister('blockMode') === BlockMode$1.STORE) {\n      ctx.getRegister('blocks')[this.block] = blockRender;\n    } else {\n      yield blockRender(new BlockDrop(), emitter);\n    }\n  },\n  getBlockRender(ctx) {\n    const {\n      liquid,\n      tpls\n    } = this;\n    const renderChild = ctx.getRegister('blocks')[this.block];\n    const renderCurrent = function* (superBlock, emitter) {\n      // add {{ block.super }} support when rendering\n      ctx.push({\n        block: superBlock\n      });\n      yield liquid.renderer.renderTemplates(tpls, ctx, emitter);\n      ctx.pop();\n    };\n    return renderChild ? (superBlock, emitter) => renderChild(new BlockDrop(() => renderCurrent(superBlock, emitter)), emitter) : renderCurrent;\n  }\n};\nvar raw = {\n  parse: function (tagToken, remainTokens) {\n    this.tokens = [];\n    const stream = this.liquid.parser.parseStream(remainTokens);\n    stream.on('token', token => {\n      if (token.name === 'endraw') stream.stop();else this.tokens.push(token);\n    }).on('end', () => {\n      throw new Error(`tag ${tagToken.getText()} not closed`);\n    });\n    stream.start();\n  },\n  render: function () {\n    return this.tokens.map(token => token.getText()).join('');\n  }\n};\nclass TablerowloopDrop extends ForloopDrop {\n  constructor(length, cols, collection, variable) {\n    super(length, collection, variable);\n    this.length = length;\n    this.cols = cols;\n  }\n  row() {\n    return Math.floor(this.i / this.cols) + 1;\n  }\n  col0() {\n    return this.i % this.cols;\n  }\n  col() {\n    return this.col0() + 1;\n  }\n  col_first() {\n    return this.col0() === 0;\n  }\n  col_last() {\n    return this.col() === this.cols;\n  }\n}\nvar tablerow = {\n  parse: function (tagToken, remainTokens) {\n    const tokenizer = new Tokenizer(tagToken.args, this.liquid.options.operatorsTrie);\n    const variable = tokenizer.readIdentifier();\n    tokenizer.skipBlank();\n    const tmp = tokenizer.readIdentifier();\n    assert(tmp && tmp.content === 'in', () => `illegal tag: ${tagToken.getText()}`);\n    this.variable = variable.content;\n    this.collection = tokenizer.readValue();\n    this.hash = new Hash(tokenizer.remaining());\n    this.templates = [];\n    let p;\n    const stream = this.liquid.parser.parseStream(remainTokens).on('start', () => p = this.templates).on('tag:endtablerow', () => stream.stop()).on('template', tpl => p.push(tpl)).on('end', () => {\n      throw new Error(`tag ${tagToken.getText()} not closed`);\n    });\n    stream.start();\n  },\n  render: function* (ctx, emitter) {\n    let collection = toEnumerable(yield _evalToken(this.collection, ctx));\n    const hash = yield this.hash.render(ctx);\n    const offset = hash.offset || 0;\n    const limit = hash.limit === undefined ? collection.length : hash.limit;\n    collection = collection.slice(offset, offset + limit);\n    const cols = hash.cols || collection.length;\n    const r = this.liquid.renderer;\n    const tablerowloop = new TablerowloopDrop(collection.length, cols, this.collection.getText(), this.variable);\n    const scope = {\n      tablerowloop\n    };\n    ctx.push(scope);\n    for (let idx = 0; idx < collection.length; idx++, tablerowloop.next()) {\n      scope[this.variable] = collection[idx];\n      if (tablerowloop.col0() === 0) {\n        if (tablerowloop.row() !== 1) emitter.write('</tr>');\n        emitter.write(`<tr class=\"row${tablerowloop.row()}\">`);\n      }\n      emitter.write(`<td class=\"col${tablerowloop.col()}\">`);\n      yield r.renderTemplates(this.templates, ctx, emitter);\n      emitter.write('</td>');\n    }\n    if (collection.length) emitter.write('</tr>');\n    ctx.pop();\n  }\n};\nvar unless = {\n  parse: function (tagToken, remainTokens) {\n    this.branches = [];\n    this.elseTemplates = [];\n    let p;\n    this.liquid.parser.parseStream(remainTokens).on('start', () => this.branches.push({\n      predicate: new Value(tagToken.args, this.liquid),\n      test: isFalsy,\n      templates: p = []\n    })).on('tag:elsif', token => this.branches.push({\n      predicate: new Value(token.args, this.liquid),\n      test: isTruthy,\n      templates: p = []\n    })).on('tag:else', () => p = this.elseTemplates).on('tag:endunless', function () {\n      this.stop();\n    }).on('template', tpl => p.push(tpl)).on('end', () => {\n      throw new Error(`tag ${tagToken.getText()} not closed`);\n    }).start();\n  },\n  render: function* (ctx, emitter) {\n    const r = this.liquid.renderer;\n    for (const {\n      predicate,\n      test,\n      templates\n    } of this.branches) {\n      const value = yield predicate.value(ctx, ctx.opts.lenientIf);\n      if (test(value, ctx)) {\n        yield r.renderTemplates(templates, ctx, emitter);\n        return;\n      }\n    }\n    yield r.renderTemplates(this.elseTemplates, ctx, emitter);\n  }\n};\nvar Break = {\n  render: function (ctx, emitter) {\n    emitter['break'] = true;\n  }\n};\nvar Continue = {\n  render: function (ctx, emitter) {\n    emitter['continue'] = true;\n  }\n};\nvar echo = {\n  parse: function (token) {\n    this.value = new Value(token.args, this.liquid);\n  },\n  render: function* (ctx, emitter) {\n    const val = yield this.value.value(ctx, false);\n    emitter.write(val);\n  }\n};\nvar liquid = {\n  parse: function (token) {\n    const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\n    const tokens = tokenizer.readLiquidTagTokens(this.liquid.options);\n    this.tpls = this.liquid.parser.parseTokens(tokens);\n  },\n  render: function* (ctx, emitter) {\n    yield this.liquid.renderer.renderTemplates(this.tpls, ctx, emitter);\n  }\n};\nvar inlineComment = {\n  parse: function (tagToken, remainTokens) {\n    if (tagToken.args.search(/\\n\\s*[^#\\s]/g) !== -1) {\n      throw new Error('every line of an inline comment must start with a \\'#\\' character');\n    }\n  }\n};\nconst tags = {\n  assign,\n  'for': For,\n  capture,\n  'case': Case,\n  comment,\n  include,\n  render,\n  decrement,\n  increment,\n  cycle,\n  'if': If,\n  layout,\n  block,\n  raw,\n  tablerow,\n  unless,\n  'break': Break,\n  'continue': Continue,\n  echo,\n  liquid,\n  '#': inlineComment\n};\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': tags\n});\nconst filters = new Map();\nforOwn(builtinFilters, (conf, name) => {\n  filters.set(snakeCase(name), conf);\n});\nconst defaultOptions = {\n  root: ['.'],\n  layouts: ['.'],\n  partials: ['.'],\n  relativeReference: true,\n  jekyllInclude: false,\n  cache: undefined,\n  extname: '',\n  fs: fs,\n  dynamicPartials: true,\n  jsTruthy: false,\n  trimTagRight: false,\n  trimTagLeft: false,\n  trimOutputRight: false,\n  trimOutputLeft: false,\n  greedy: true,\n  tagDelimiterLeft: '{%',\n  tagDelimiterRight: '%}',\n  outputDelimiterLeft: '{{',\n  outputDelimiterRight: '}}',\n  preserveTimezones: false,\n  strictFilters: false,\n  strictVariables: false,\n  ownPropertyOnly: false,\n  lenientIf: false,\n  globals: {},\n  keepOutputType: false,\n  operators: defaultOperators,\n  operatorsTrie: createTrie(defaultOperators)\n};\nfunction normalize(options) {\n  if (options.hasOwnProperty('operators')) {\n    options.operatorsTrie = createTrie(options.operators);\n  }\n  if (options.hasOwnProperty('root')) {\n    if (!options.hasOwnProperty('partials')) options.partials = options.root;\n    if (!options.hasOwnProperty('layouts')) options.layouts = options.root;\n  }\n  if (options.hasOwnProperty('cache')) {\n    let cache;\n    if (typeof options.cache === 'number') cache = options.cache > 0 ? new LRU(options.cache) : undefined;else if (typeof options.cache === 'object') cache = options.cache;else cache = options.cache ? new LRU(1024) : undefined;\n    options.cache = cache;\n  }\n  options = Object.assign(Object.assign(Object.assign({}, defaultOptions), options.jekyllInclude ? {\n    dynamicPartials: false\n  } : {}), options);\n  if (!options.fs.dirname && options.relativeReference) {\n    console.warn('[LiquidJS] `fs.dirname` is required for relativeReference, set relativeReference to `false` to suppress this warning, or provide implementation for `fs.dirname`');\n    options.relativeReference = false;\n  }\n  options.root = normalizeDirectoryList(options.root);\n  options.partials = normalizeDirectoryList(options.partials);\n  options.layouts = normalizeDirectoryList(options.layouts);\n  options.outputEscape = options.outputEscape && getOutputEscapeFunction(options.outputEscape);\n  return options;\n}\nfunction getOutputEscapeFunction(nameOrFunction) {\n  if (isString(nameOrFunction)) {\n    const filterImpl = filters.get(nameOrFunction);\n    assert(isFunction(filterImpl), `filter \"${nameOrFunction}\" not found`);\n    return filterImpl;\n  } else {\n    assert(isFunction(nameOrFunction), '`outputEscape` need to be of type string or function');\n    return nameOrFunction;\n  }\n}\nfunction normalizeDirectoryList(value) {\n  let list = [];\n  if (isArray(value)) list = value;\n  if (isString(value)) list = [value];\n  return list;\n}\nclass Context {\n  constructor(env = {}, opts = defaultOptions, renderOptions = {}) {\n    var _a, _b;\n    /**\r\n     * insert a Context-level empty scope,\r\n     * for tags like `{% capture %}` `{% assign %}` to operate\r\n     */\n    this.scopes = [{}];\n    this.registers = {};\n    this.sync = !!renderOptions.sync;\n    this.opts = opts;\n    this.globals = (_a = renderOptions.globals) !== null && _a !== void 0 ? _a : opts.globals;\n    this.environments = env;\n    this.strictVariables = (_b = renderOptions.strictVariables) !== null && _b !== void 0 ? _b : this.opts.strictVariables;\n  }\n  getRegister(key) {\n    return this.registers[key] = this.registers[key] || {};\n  }\n  setRegister(key, value) {\n    return this.registers[key] = value;\n  }\n  saveRegister(...keys) {\n    return keys.map(key => [key, this.getRegister(key)]);\n  }\n  restoreRegister(keyValues) {\n    return keyValues.forEach(([key, value]) => this.setRegister(key, value));\n  }\n  getAll() {\n    return [this.globals, this.environments, ...this.scopes].reduce((ctx, val) => __assign(ctx, val), {});\n  }\n  /**\r\n   * @deprecated use `_get()` instead\r\n   */\n  get(paths) {\n    return toValueSync(this._get(paths));\n  }\n  *_get(paths) {\n    const scope = this.findScope(paths[0]);\n    return yield this._getFromScope(scope, paths);\n  }\n  /**\r\n   * @deprecated use `_get()` instead\r\n   */\n  getFromScope(scope, paths) {\n    return toValueSync(this._getFromScope(scope, paths));\n  }\n  *_getFromScope(scope, paths) {\n    if (isString(paths)) paths = paths.split('.');\n    for (let i = 0; i < paths.length; i++) {\n      scope = yield readProperty(scope, paths[i], this.opts.ownPropertyOnly);\n      if (isNil(scope) && this.strictVariables) {\n        throw new InternalUndefinedVariableError(paths.slice(0, i + 1).join('.'));\n      }\n    }\n    return scope;\n  }\n  push(ctx) {\n    return this.scopes.push(ctx);\n  }\n  pop() {\n    return this.scopes.pop();\n  }\n  bottom() {\n    return this.scopes[0];\n  }\n  findScope(key) {\n    for (let i = this.scopes.length - 1; i >= 0; i--) {\n      const candidate = this.scopes[i];\n      if (key in candidate) return candidate;\n    }\n    if (key in this.environments) return this.environments;\n    return this.globals;\n  }\n}\nfunction readProperty(obj, key, ownPropertyOnly) {\n  if (isNil(obj)) return obj;\n  obj = toLiquid(obj);\n  if (isArray(obj) && key < 0) return obj[obj.length + +key];\n  const jsProperty = readJSProperty(obj, key, ownPropertyOnly);\n  if (jsProperty === undefined && obj instanceof Drop) return obj.liquidMethodMissing(key);\n  if (isFunction(jsProperty)) return jsProperty.call(obj);\n  if (key === 'size') return readSize(obj);else if (key === 'first') return readFirst(obj);else if (key === 'last') return readLast(obj);\n  return jsProperty;\n}\nfunction readJSProperty(obj, key, ownPropertyOnly) {\n  if (ownPropertyOnly && !Object.hasOwnProperty.call(obj, key)) return undefined;\n  return obj[key];\n}\nfunction readFirst(obj) {\n  if (isArray(obj)) return obj[0];\n  return obj['first'];\n}\nfunction readLast(obj) {\n  if (isArray(obj)) return obj[obj.length - 1];\n  return obj['last'];\n}\nfunction readSize(obj) {\n  if (obj.hasOwnProperty('size') || obj['size'] !== undefined) return obj['size'];\n  if (isArray(obj) || isString(obj)) return obj.length;\n  if (typeof obj === 'object') return Object.keys(obj).length;\n}\nvar LookupType;\n(function (LookupType) {\n  LookupType[\"Partials\"] = \"partials\";\n  LookupType[\"Layouts\"] = \"layouts\";\n  LookupType[\"Root\"] = \"root\";\n})(LookupType || (LookupType = {}));\nclass Loader {\n  constructor(options) {\n    this.options = options;\n    if (options.relativeReference) {\n      const sep = options.fs.sep;\n      assert(sep, '`fs.sep` is required for relative reference');\n      const rRelativePath = new RegExp(['.' + sep, '..' + sep, './', '../'].map(prefix => escapeRegex(prefix)).join('|'));\n      this.shouldLoadRelative = referencedFile => rRelativePath.test(referencedFile);\n    } else {\n      this.shouldLoadRelative = referencedFile => false;\n    }\n    this.contains = this.options.fs.contains || (() => true);\n  }\n  *lookup(file, type, sync, currentFile) {\n    const {\n      fs\n    } = this.options;\n    const dirs = this.options[type];\n    for (const filepath of this.candidates(file, dirs, currentFile, type !== LookupType.Root)) {\n      if (sync ? fs.existsSync(filepath) : yield fs.exists(filepath)) return filepath;\n    }\n    throw this.lookupError(file, dirs);\n  }\n  *candidates(file, dirs, currentFile, enforceRoot) {\n    const {\n      fs,\n      extname\n    } = this.options;\n    if (this.shouldLoadRelative(file) && currentFile) {\n      const referenced = fs.resolve(this.dirname(currentFile), file, extname);\n      for (const dir of dirs) {\n        if (!enforceRoot || this.contains(dir, referenced)) {\n          // the relatively referenced file is within one of root dirs\n          yield referenced;\n          break;\n        }\n      }\n    }\n    for (const dir of dirs) {\n      const referenced = fs.resolve(dir, file, extname);\n      if (!enforceRoot || this.contains(dir, referenced)) {\n        yield referenced;\n      }\n    }\n    if (fs.fallback !== undefined) {\n      const filepath = fs.fallback(file);\n      if (filepath !== undefined) yield filepath;\n    }\n  }\n  dirname(path) {\n    const fs = this.options.fs;\n    assert(fs.dirname, '`fs.dirname` is required for relative reference');\n    return fs.dirname(path);\n  }\n  lookupError(file, roots) {\n    const err = new Error('ENOENT');\n    err.message = `ENOENT: Failed to lookup \"${file}\" in \"${roots}\"`;\n    err.code = 'ENOENT';\n    return err;\n  }\n}\nclass SimpleEmitter {\n  constructor() {\n    this.buffer = '';\n  }\n  write(html) {\n    this.buffer += stringify(html);\n  }\n}\nclass StreamedEmitter {\n  constructor() {\n    this.buffer = '';\n    this.stream = null;\n    throw new Error('streaming not supported in browser');\n  }\n}\nclass KeepingTypeEmitter {\n  constructor() {\n    this.buffer = '';\n  }\n  write(html) {\n    html = toValue(html);\n    // This will only preserve the type if the value is isolated.\n    // I.E:\n    // {{ my-port }} -> 42\n    // {{ my-host }}:{{ my-port }} -> 'host:42'\n    if (typeof html !== 'string' && this.buffer === '') {\n      this.buffer = html;\n    } else {\n      this.buffer = stringify(this.buffer) + stringify(html);\n    }\n  }\n}\nclass Render {\n  renderTemplatesToNodeStream(templates, ctx) {\n    const emitter = new StreamedEmitter();\n    Promise.resolve().then(() => toPromise(this.renderTemplates(templates, ctx, emitter))).then(() => emitter.end(), err => emitter.error(err));\n    return emitter.stream;\n  }\n  *renderTemplates(templates, ctx, emitter) {\n    if (!emitter) {\n      emitter = ctx.opts.keepOutputType ? new KeepingTypeEmitter() : new SimpleEmitter();\n    }\n    for (const tpl of templates) {\n      try {\n        // if tpl.render supports emitter, it'll return empty `html`\n        const html = yield tpl.render(ctx, emitter);\n        // if not, it'll return an `html`, write to the emitter for it\n        html && emitter.write(html);\n        if (emitter['break'] || emitter['continue']) break;\n      } catch (e) {\n        const err = RenderError.is(e) ? e : new RenderError(e, tpl);\n        throw err;\n      }\n    }\n    return emitter.buffer;\n  }\n}\nclass TemplateImpl {\n  constructor(token) {\n    this.token = token;\n  }\n}\nclass Tag extends TemplateImpl {\n  constructor(token, tokens, liquid) {\n    super(token);\n    this.name = token.name;\n    const impl = liquid.tags.get(token.name);\n    this.impl = Object.create(impl);\n    this.impl.liquid = liquid;\n    if (this.impl.parse) {\n      this.impl.parse(token, tokens);\n    }\n  }\n  *render(ctx, emitter) {\n    const hash = yield new Hash(this.token.args).render(ctx);\n    const impl = this.impl;\n    if (isFunction(impl.render)) return yield impl.render(ctx, emitter, hash);\n  }\n}\nclass Output extends TemplateImpl {\n  constructor(token, liquid) {\n    super(token);\n    this.value = new Value(token.content, liquid);\n    const filters = this.value.filters;\n    const outputEscape = liquid.options.outputEscape;\n    if (filters.length && filters[filters.length - 1].name === 'raw') {\n      filters.pop();\n    } else if (outputEscape) {\n      filters.push(new Filter(toString.call(outputEscape), outputEscape, [], liquid));\n    }\n  }\n  *render(ctx, emitter) {\n    const val = yield this.value.value(ctx, false);\n    emitter.write(val);\n  }\n}\nclass HTML extends TemplateImpl {\n  constructor(token) {\n    super(token);\n    this.str = token.getContent();\n  }\n  *render(ctx, emitter) {\n    emitter.write(this.str);\n  }\n}\nclass Parser {\n  constructor(liquid) {\n    this.liquid = liquid;\n    this.cache = this.liquid.options.cache;\n    this.fs = this.liquid.options.fs;\n    this.parseFile = this.cache ? this._parseFileCached : this._parseFile;\n    this.loader = new Loader(this.liquid.options);\n  }\n  parse(html, filepath) {\n    const tokenizer = new Tokenizer(html, this.liquid.options.operatorsTrie, filepath);\n    const tokens = tokenizer.readTopLevelTokens(this.liquid.options);\n    return this.parseTokens(tokens);\n  }\n  parseTokens(tokens) {\n    let token;\n    const templates = [];\n    while (token = tokens.shift()) {\n      templates.push(this.parseToken(token, tokens));\n    }\n    return templates;\n  }\n  parseToken(token, remainTokens) {\n    try {\n      if (isTagToken(token)) {\n        return new Tag(token, remainTokens, this.liquid);\n      }\n      if (isOutputToken(token)) {\n        return new Output(token, this.liquid);\n      }\n      return new HTML(token);\n    } catch (e) {\n      throw new ParseError(e, token);\n    }\n  }\n  parseStream(tokens) {\n    return new ParseStream(tokens, (token, tokens) => this.parseToken(token, tokens));\n  }\n  *_parseFileCached(file, sync, type = LookupType.Root, currentFile) {\n    const cache = this.cache;\n    const key = this.loader.shouldLoadRelative(file) ? currentFile + ',' + file : type + ':' + file;\n    const tpls = yield cache.read(key);\n    if (tpls) return tpls;\n    const task = this._parseFile(file, sync, type, currentFile);\n    // sync mode: exec the task and cache the result\n    // async mode: cache the task before exec\n    const taskOrTpl = sync ? yield task : toPromise(task);\n    cache.write(key, taskOrTpl);\n    // note: concurrent tasks will be reused, cache for failed task is removed until its end\n    try {\n      return yield taskOrTpl;\n    } catch (err) {\n      cache.remove(key);\n      throw err;\n    }\n  }\n  *_parseFile(file, sync, type = LookupType.Root, currentFile) {\n    const filepath = yield this.loader.lookup(file, type, sync, currentFile);\n    return this.liquid.parse(sync ? this.fs.readFileSync(filepath) : yield this.fs.readFile(filepath), filepath);\n  }\n}\nclass TagMap {\n  constructor() {\n    this.impls = {};\n  }\n  get(name) {\n    const impl = this.impls[name];\n    assert(impl, () => `tag \"${name}\" not found`);\n    return impl;\n  }\n  set(name, impl) {\n    this.impls[name] = impl;\n  }\n}\nclass FilterMap {\n  constructor(strictFilters, liquid) {\n    this.strictFilters = strictFilters;\n    this.liquid = liquid;\n    this.impls = {};\n  }\n  get(name) {\n    const impl = this.impls[name];\n    assert(impl || !this.strictFilters, () => `undefined filter: ${name}`);\n    return impl;\n  }\n  set(name, impl) {\n    this.impls[name] = impl;\n  }\n  create(name, args) {\n    return new Filter(name, this.get(name), args, this.liquid);\n  }\n}\nconst version = '9.43.0';\nclass Liquid {\n  constructor(opts = {}) {\n    this.options = normalize(opts);\n    this.parser = new Parser(this);\n    this.renderer = new Render();\n    this.filters = new FilterMap(this.options.strictFilters, this);\n    this.tags = new TagMap();\n    forOwn(tags, (conf, name) => this.registerTag(snakeCase(name), conf));\n    forOwn(builtinFilters, (handler, name) => this.registerFilter(snakeCase(name), handler));\n  }\n  parse(html, filepath) {\n    return this.parser.parse(html, filepath);\n  }\n  _render(tpl, scope, renderOptions) {\n    const ctx = new Context(scope, this.options, renderOptions);\n    return this.renderer.renderTemplates(tpl, ctx);\n  }\n  render(tpl, scope, renderOptions) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return toPromise(this._render(tpl, scope, Object.assign(Object.assign({}, renderOptions), {\n        sync: false\n      })));\n    });\n  }\n  renderSync(tpl, scope, renderOptions) {\n    return toValueSync(this._render(tpl, scope, Object.assign(Object.assign({}, renderOptions), {\n      sync: true\n    })));\n  }\n  renderToNodeStream(tpl, scope, renderOptions = {}) {\n    const ctx = new Context(scope, this.options, renderOptions);\n    return this.renderer.renderTemplatesToNodeStream(tpl, ctx);\n  }\n  _parseAndRender(html, scope, renderOptions) {\n    const tpl = this.parse(html);\n    return this._render(tpl, scope, renderOptions);\n  }\n  parseAndRender(html, scope, renderOptions) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return toPromise(this._parseAndRender(html, scope, Object.assign(Object.assign({}, renderOptions), {\n        sync: false\n      })));\n    });\n  }\n  parseAndRenderSync(html, scope, renderOptions) {\n    return toValueSync(this._parseAndRender(html, scope, Object.assign(Object.assign({}, renderOptions), {\n      sync: true\n    })));\n  }\n  _parsePartialFile(file, sync, currentFile) {\n    return this.parser.parseFile(file, sync, LookupType.Partials, currentFile);\n  }\n  _parseLayoutFile(file, sync, currentFile) {\n    return this.parser.parseFile(file, sync, LookupType.Layouts, currentFile);\n  }\n  parseFile(file) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return toPromise(this.parser.parseFile(file, false));\n    });\n  }\n  parseFileSync(file) {\n    return toValueSync(this.parser.parseFile(file, true));\n  }\n  renderFile(file, ctx, renderOptions) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const templates = yield this.parseFile(file);\n      return this.render(templates, ctx, renderOptions);\n    });\n  }\n  renderFileSync(file, ctx, renderOptions) {\n    const templates = this.parseFileSync(file);\n    return this.renderSync(templates, ctx, renderOptions);\n  }\n  renderFileToNodeStream(file, scope, renderOptions) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const templates = yield this.parseFile(file);\n      return this.renderToNodeStream(templates, scope, renderOptions);\n    });\n  }\n  _evalValue(str, scopeOrContext) {\n    const value = new Value(str, this);\n    const ctx = scopeOrContext instanceof Context ? scopeOrContext : new Context(scopeOrContext, this.options);\n    return value.value(ctx, false);\n  }\n  evalValue(str, scopeOrContext) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return toPromise(this._evalValue(str, scopeOrContext));\n    });\n  }\n  evalValueSync(str, scopeOrContext) {\n    return toValueSync(this._evalValue(str, scopeOrContext));\n  }\n  registerFilter(name, filter) {\n    this.filters.set(name, filter);\n  }\n  registerTag(name, tag) {\n    this.tags.set(name, tag);\n  }\n  plugin(plugin) {\n    return plugin.call(this, Liquid);\n  }\n  express() {\n    const self = this; // eslint-disable-line\n    let firstCall = true;\n    return function (filePath, ctx, callback) {\n      if (firstCall) {\n        firstCall = false;\n        const dirs = normalizeDirectoryList(this.root);\n        self.options.root.unshift(...dirs);\n        self.options.layouts.unshift(...dirs);\n        self.options.partials.unshift(...dirs);\n      }\n      self.renderFile(filePath, ctx).then(html => callback(null, html), callback);\n    };\n  }\n}\nexport { AssertionError, Context, Drop, Expression, Hash, InternalUndefinedVariableError, Liquid, LiquidError, ParseError, ParseStream, RenderError, TagToken, TimezoneDate, Token, TokenKind, TokenizationError, Tokenizer, typeGuards as TypeGuards, UndefinedVariableError, Value, _evalToken, assert, createTrie, defaultOperators, defaultOptions, evalQuotedToken, evalToken, builtinFilters as filters, isFalsy, isTruthy, index as tags, toPromise, toThenable, toValue, toValueSync, version };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","Drop","liquidMethodMissing","key","undefined","toString$1","toString","toLowerCase","String","isString","isFunction","isPromise","val","isIterator","throw","return","escapeRegex","str","replace","stringify","toValue","isNil","isArray","map","x","join","valueOf","isNumber","toLiquid","isIterable","isObject","Symbol","iterator","forOwn","obj","iteratee","k","last$1","arr","type","range","start","stop","push","padStart","ch","pad","padEnd","add","identify","snakeCase","_","a","b","changeCase","hasLowerCase","some","toUpperCase","ellipsis","N","slice","caseInsensitiveCompare","argumentsToValue","fn","args","escapeRegExp","text","Node","constructor","prev","LRU","limit","size","cache","head","tail","write","node","ensureLimit","read","remove","clear","domResolve","root","path","base","document","createElement","href","getElementsByTagName","insertBefore","firstChild","resolved","removeChild","filepath","ext","url","origin","last","split","pop","test","readFile","xhr","XMLHttpRequest","onload","status","responseText","Error","statusText","onerror","open","send","readFileSync","exists","existsSync","dirname","sep","fs","freeze","__proto__","isComparable","arg","equals","isTruthy","ctx","isFalsy","opts","jsTruthy","defaultOperators","==","l","r","!=",">","gt","lt","<",">=","geq","leq","<=","contains","indexOf","and","or","TYPES","IDENTIFIER","BLANK","QUOTE","INLINE_BLANK","NUMBER","SIGN","createTrie","operators","trie","name","handler","entries","c","charCodeAt","needBoundary","end","escapeMap","unescapeMap","escape","m","unescape","escapeOnce","newlineToBr","v","stripHtml","abs","Math","atLeast","max","atMost","min","ceil","dividedBy","dividend","divisor","integerArithmetic","floor","minus","modulo","times","round","amp","pow","plus","Number","urlDecode","decodeURIComponent","urlEncode","encodeURIComponent","toEnumerable","Array","from","keys","toArray","first","reverse","sort","property","values","item","context","_getFromScope","lhs","rhs","lvalue","rvalue","tuple","sortNatural","input","propertyString","compare","results","compact","filter","concat","begin","where","expected","uniq","u","rFormat","monthNames","dayNames","monthNamesShort","abbr","dayNamesShort","suffixes","daysInMonth","d","feb","isLeapYear","getDayOfYear","num","getMonth","getDate","getWeekOfYear","startDay","now","getDay","jan1","Date","getFullYear","year","getSuffix","index","parseInt","century","substring","padWidths","H","I","j","L","M","S","U","W","padChars","A","B","formatCodes","toLocaleString","C","getHours","getMilliseconds","getMinutes","width","q","getTime","getSeconds","w","toLocaleDateString","X","toLocaleTimeString","y","Y","z","nOffset","getTimezoneOffset","h","flags","%","strftime","formatStr","output","remaining","match","exec","format","flagStr","modifier","conversion","convert","flag","ret","padChar","padWidth","OneMinute","hostTimezoneOffset","ISO8601_TIMEZONE_PATTERN","TimezoneDate","init","timezoneOffset","date","diff","time","locale","createDateFixedToTimezone","dateString","sign","hours","minutes","delta","timeZoneOffset","preserveTimezones","isValidDate","isNaN","Default","defaultValue","Map","get","json","JSON","raw$1","LiquidError","err","token","message","originalError","update","mkContext","mkMessage","stack","TokenizationError","ParseError","RenderError","tpl","is","UndefinedVariableError","InternalUndefinedVariableError","variableName","AssertionError","line","getPosition","lines","lineNumber","indicator","msg","file","col","assert","predicate","append","prepend","lstrip","chars","RegExp","downcase","upcase","removeFirst","rstrip","strip","trim","stripNewlines","capitalize","charAt","pattern","replacement","replaceFirst","arg1","arg2","truncate","o","truncatewords","words","builtinFilters","raw","TokenKind","isDelimitedToken","getKind","Delimited","isOperatorToken","Operator","isHTMLToken","HTML","isOutputToken","Output","isTagToken","Tag","isQuotedToken","Quoted","isLiteralToken","Literal","isNumberToken","isPropertyAccessToken","PropertyAccess","isWordToken","Word","isRangeToken","Range","kind","typeGuards","NullDrop","EmptyDrop","BlankDrop","nil","literalValues","rHex","rOct","escapeChar","f","hexVal","code","parseStringLiteral","fromCharCode","toPromise","state","toValueSync","toThenable","Expression","tokens","postfix","toPostfix","evaluate","lenient","operands","evalOperatorToken","_evalToken","evalToken","evalPropertyAccessToken","evalRangeToken","evalLiteralToken","evalNumberToken","getText","evalQuotedToken","props","prop","_get","propertyName","whole","content","decimal","impl","operator","literal","low","high","ops","getPrecedence","Token","row","DelimitedToken","trimLeft","trimRight","tl","tr","whiteSpaceCtrl","options","inRaw","greedy","mask","NumberToken","IdentifierToken","allowSign","LiteralToken","precedence","OperatorToken","PropertyAccessToken","variable","FilterToken","Filter","HashToken","Hash","QuotedToken","HTMLToken","getContent","RangeToken","OutputToken","trimOutputLeft","trimOutputRight","outputDelimiterLeft","outputDelimiterRight","matchOperator","info","LiquidTagToken","tokenizer","Tokenizer","operatorsTrie","readTagName","skipBlank","defaultOptions","rawBeginAt","readExpression","readExpressionTokens","operand","readValue","readOperator","readFilters","filters","readFilter","peek","snapshot","readIdentifier","readFilterArg","readTopLevelTokens","readTopLevelToken","tagDelimiterLeft","readEndrawOrRawContent","readTagToken","readOutputToken","readHTMLToken","stopStrings","readToDelimiter","tagDelimiterRight","mkError","TagToken","delimiter","peekType","readQuoted","rmatch","leftPos","readTo","readLiquidTagTokens","readLiquidTagToken","readWord","console","warn","readHashes","jekyllStyle","hashes","hash","readHash","advance","readRange","readValueOrThrow","escaped","readFileNameTemplate","htmlStopStrings","htmlStopStringSet","Set","has","word","trimTagLeft","trimTagRight","ParseStream","parseToken","handlers","stopRequested","on","cb","trigger","event","shift","template","markup","render","isKeyValuePair","liquid","argv","Value","initial","lenientIf","parse","bottom","ForloopDrop","collection","index0","rindex","rindex0","MODIFIERS","For","remainTokens","inStr","templates","elseTemplates","stream","parser","parseStream","emitter","renderer","renderTemplates","continueKey","continue","getRegister","modifiers","orderedFilterParameters","includes","reduce","offset","reversed","setRegister","scope","forloop","count","capture","tagToken","readVariableName","html","quoted","Case","cond","cases","branch","comment","BlockMode","BlockMode$1","parseFilePath","renderFilePath","keyword","beforeAs","asStr","alias","childCtx","Context","sync","globals","strictVariables","_parsePartialFile","dynamicPartials","TypeError","optimize","parseTokens","include","withStr","withVar","jekyllInclude","saved","saveRegister","OUTPUT","restoreRegister","decrement","environments","cycle","group","candidates","fingerprint","groups","idx","candidate","If","branches","increment","layout","tpls","_parseLayoutFile","STORE","blocks","parent","BlockDrop","superBlockRender","super","block","blockRender","getBlockRender","renderChild","renderCurrent","superBlock","TablerowloopDrop","cols","col0","col_first","col_last","tablerow","tmp","tablerowloop","unless","Break","Continue","echo","inlineComment","search","tags","conf","set","layouts","partials","relativeReference","extname","strictFilters","ownPropertyOnly","keepOutputType","normalize","normalizeDirectoryList","outputEscape","getOutputEscapeFunction","nameOrFunction","filterImpl","list","env","renderOptions","_a","_b","scopes","registers","keyValues","forEach","getAll","paths","findScope","getFromScope","readProperty","jsProperty","readJSProperty","readSize","readFirst","readLast","LookupType","Loader","rRelativePath","prefix","shouldLoadRelative","referencedFile","lookup","currentFile","dirs","Root","lookupError","enforceRoot","referenced","dir","fallback","roots","SimpleEmitter","buffer","StreamedEmitter","KeepingTypeEmitter","Render","renderTemplatesToNodeStream","error","TemplateImpl","create","Parser","parseFile","_parseFileCached","_parseFile","loader","task","taskOrTpl","TagMap","impls","FilterMap","version","Liquid","registerTag","registerFilter","_render","renderSync","renderToNodeStream","_parseAndRender","parseAndRender","parseAndRenderSync","Partials","Layouts","parseFileSync","renderFile","renderFileSync","renderFileToNodeStream","_evalValue","scopeOrContext","evalValue","evalValueSync","tag","plugin","express","self","firstCall","filePath","callback","unshift","TypeGuards"],"sources":["/Users/felipemeyer/sites/bim/bim-historial-fideicomisos/node_modules/liquidjs/dist/liquid.browser.esm.js"],"sourcesContent":["/*\n * liquidjs@9.43.0, https://github.com/harttle/liquidjs\n * (c) 2016-2022 harttle\n * Released under the MIT License.\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nclass Drop {\r\n    liquidMethodMissing(key) {\r\n        return undefined;\r\n    }\r\n}\n\nconst toString$1 = Object.prototype.toString;\r\nconst toLowerCase = String.prototype.toLowerCase;\r\nconst hasOwnProperty = Object.hasOwnProperty;\r\nfunction isString(value) {\r\n    return typeof value === 'string';\r\n}\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction isFunction(value) {\r\n    return typeof value === 'function';\r\n}\r\nfunction isPromise(val) {\r\n    return val && isFunction(val.then);\r\n}\r\nfunction isIterator(val) {\r\n    return val && isFunction(val.next) && isFunction(val.throw) && isFunction(val.return);\r\n}\r\nfunction escapeRegex(str) {\r\n    return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n}\r\nfunction stringify(value) {\r\n    value = toValue(value);\r\n    if (isString(value))\r\n        return value;\r\n    if (isNil(value))\r\n        return '';\r\n    if (isArray(value))\r\n        return value.map(x => stringify(x)).join('');\r\n    return String(value);\r\n}\r\nfunction toValue(value) {\r\n    return (value instanceof Drop && isFunction(value.valueOf)) ? value.valueOf() : value;\r\n}\r\nfunction isNumber(value) {\r\n    return typeof value === 'number';\r\n}\r\nfunction toLiquid(value) {\r\n    if (value && isFunction(value.toLiquid))\r\n        return toLiquid(value.toLiquid());\r\n    return value;\r\n}\r\nfunction isNil(value) {\r\n    return value == null;\r\n}\r\nfunction isArray(value) {\r\n    // be compatible with IE 8\r\n    return toString$1.call(value) === '[object Array]';\r\n}\r\nfunction isIterable(value) {\r\n    return isObject(value) && Symbol.iterator in value;\r\n}\r\n/*\r\n * Iterates over own enumerable string keyed properties of an object and invokes iteratee for each property.\r\n * The iteratee is invoked with three arguments: (value, key, object).\r\n * Iteratee functions may exit iteration early by explicitly returning false.\r\n * @param {Object} object The object to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @return {Object} Returns object.\r\n */\r\nfunction forOwn(obj, iteratee) {\r\n    obj = obj || {};\r\n    for (const k in obj) {\r\n        if (hasOwnProperty.call(obj, k)) {\r\n            if (iteratee(obj[k], k, obj) === false)\r\n                break;\r\n        }\r\n    }\r\n    return obj;\r\n}\r\nfunction last$1(arr) {\r\n    return arr[arr.length - 1];\r\n}\r\n/*\r\n * Checks if value is the language type of Object.\r\n * (e.g. arrays, functions, objects, regexes, new Number(0), and new String(''))\r\n * @param {any} value The value to check.\r\n * @return {Boolean} Returns true if value is an object, else false.\r\n */\r\nfunction isObject(value) {\r\n    const type = typeof value;\r\n    return value !== null && (type === 'object' || type === 'function');\r\n}\r\nfunction range(start, stop, step = 1) {\r\n    const arr = [];\r\n    for (let i = start; i < stop; i += step) {\r\n        arr.push(i);\r\n    }\r\n    return arr;\r\n}\r\nfunction padStart(str, length, ch = ' ') {\r\n    return pad(str, length, ch, (str, ch) => ch + str);\r\n}\r\nfunction padEnd(str, length, ch = ' ') {\r\n    return pad(str, length, ch, (str, ch) => str + ch);\r\n}\r\nfunction pad(str, length, ch, add) {\r\n    str = String(str);\r\n    let n = length - str.length;\r\n    while (n-- > 0)\r\n        str = add(str, ch);\r\n    return str;\r\n}\r\nfunction identify(val) {\r\n    return val;\r\n}\r\nfunction snakeCase(str) {\r\n    return str.replace(/(\\w?)([A-Z])/g, (_, a, b) => (a ? a + '_' : '') + b.toLowerCase());\r\n}\r\nfunction changeCase(str) {\r\n    const hasLowerCase = [...str].some(ch => ch >= 'a' && ch <= 'z');\r\n    return hasLowerCase ? str.toUpperCase() : str.toLowerCase();\r\n}\r\nfunction ellipsis(str, N) {\r\n    return str.length > N ? str.slice(0, N - 3) + '...' : str;\r\n}\r\n// compare string in case-insensitive way, undefined values to the tail\r\nfunction caseInsensitiveCompare(a, b) {\r\n    if (a == null && b == null)\r\n        return 0;\r\n    if (a == null)\r\n        return 1;\r\n    if (b == null)\r\n        return -1;\r\n    a = toLowerCase.call(a);\r\n    b = toLowerCase.call(b);\r\n    if (a < b)\r\n        return -1;\r\n    if (a > b)\r\n        return 1;\r\n    return 0;\r\n}\r\nfunction argumentsToValue(fn) {\r\n    return (...args) => fn(...args.map(toValue));\r\n}\r\nfunction escapeRegExp(text) {\r\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\r\n}\n\nclass Node {\r\n    constructor(key, value, next, prev) {\r\n        this.key = key;\r\n        this.value = value;\r\n        this.next = next;\r\n        this.prev = prev;\r\n    }\r\n}\r\nclass LRU {\r\n    constructor(limit, size = 0) {\r\n        this.limit = limit;\r\n        this.size = size;\r\n        this.cache = {};\r\n        this.head = new Node('HEAD', null, null, null);\r\n        this.tail = new Node('TAIL', null, null, null);\r\n        this.head.next = this.tail;\r\n        this.tail.prev = this.head;\r\n    }\r\n    write(key, value) {\r\n        if (this.cache[key]) {\r\n            this.cache[key].value = value;\r\n        }\r\n        else {\r\n            const node = new Node(key, value, this.head.next, this.head);\r\n            this.head.next.prev = node;\r\n            this.head.next = node;\r\n            this.cache[key] = node;\r\n            this.size++;\r\n            this.ensureLimit();\r\n        }\r\n    }\r\n    read(key) {\r\n        if (!this.cache[key])\r\n            return;\r\n        const { value } = this.cache[key];\r\n        this.remove(key);\r\n        this.write(key, value);\r\n        return value;\r\n    }\r\n    remove(key) {\r\n        const node = this.cache[key];\r\n        node.prev.next = node.next;\r\n        node.next.prev = node.prev;\r\n        delete this.cache[key];\r\n        this.size--;\r\n    }\r\n    clear() {\r\n        this.head.next = this.tail;\r\n        this.tail.prev = this.head;\r\n        this.size = 0;\r\n        this.cache = {};\r\n    }\r\n    ensureLimit() {\r\n        if (this.size > this.limit)\r\n            this.remove(this.tail.prev.key);\r\n    }\r\n}\n\nfunction domResolve(root, path) {\r\n    const base = document.createElement('base');\r\n    base.href = root;\r\n    const head = document.getElementsByTagName('head')[0];\r\n    head.insertBefore(base, head.firstChild);\r\n    const a = document.createElement('a');\r\n    a.href = path;\r\n    const resolved = a.href;\r\n    head.removeChild(base);\r\n    return resolved;\r\n}\r\nfunction resolve(root, filepath, ext) {\r\n    if (root.length && last$1(root) !== '/')\r\n        root += '/';\r\n    const url = domResolve(root, filepath);\r\n    return url.replace(/^(\\w+:\\/\\/[^/]+)(\\/[^?]+)/, (str, origin, path) => {\r\n        const last = path.split('/').pop();\r\n        if (/\\.\\w+$/.test(last))\r\n            return str;\r\n        return origin + path + ext;\r\n    });\r\n}\r\nfunction readFile(url) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve, reject) => {\r\n            const xhr = new XMLHttpRequest();\r\n            xhr.onload = () => {\r\n                if (xhr.status >= 200 && xhr.status < 300) {\r\n                    resolve(xhr.responseText);\r\n                }\r\n                else {\r\n                    reject(new Error(xhr.statusText));\r\n                }\r\n            };\r\n            xhr.onerror = () => {\r\n                reject(new Error('An error occurred whilst receiving the response.'));\r\n            };\r\n            xhr.open('GET', url);\r\n            xhr.send();\r\n        });\r\n    });\r\n}\r\nfunction readFileSync(url) {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('GET', url, false);\r\n    xhr.send();\r\n    if (xhr.status < 200 || xhr.status >= 300) {\r\n        throw new Error(xhr.statusText);\r\n    }\r\n    return xhr.responseText;\r\n}\r\nfunction exists(filepath) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return true;\r\n    });\r\n}\r\nfunction existsSync(filepath) {\r\n    return true;\r\n}\r\nfunction dirname(filepath) {\r\n    return domResolve(filepath, '.');\r\n}\r\nconst sep = '/';\n\nvar fs = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    resolve: resolve,\n    readFile: readFile,\n    readFileSync: readFileSync,\n    exists: exists,\n    existsSync: existsSync,\n    dirname: dirname,\n    sep: sep\n});\n\nfunction isComparable(arg) {\r\n    return arg && isFunction(arg.equals);\r\n}\n\nfunction isTruthy(val, ctx) {\r\n    return !isFalsy(val, ctx);\r\n}\r\nfunction isFalsy(val, ctx) {\r\n    if (ctx.opts.jsTruthy) {\r\n        return !val;\r\n    }\r\n    else {\r\n        return val === false || undefined === val || val === null;\r\n    }\r\n}\n\nconst defaultOperators = {\r\n    '==': (l, r) => {\r\n        if (isComparable(l))\r\n            return l.equals(r);\r\n        if (isComparable(r))\r\n            return r.equals(l);\r\n        return toValue(l) === toValue(r);\r\n    },\r\n    '!=': (l, r) => {\r\n        if (isComparable(l))\r\n            return !l.equals(r);\r\n        if (isComparable(r))\r\n            return !r.equals(l);\r\n        return toValue(l) !== toValue(r);\r\n    },\r\n    '>': (l, r) => {\r\n        if (isComparable(l))\r\n            return l.gt(r);\r\n        if (isComparable(r))\r\n            return r.lt(l);\r\n        return toValue(l) > toValue(r);\r\n    },\r\n    '<': (l, r) => {\r\n        if (isComparable(l))\r\n            return l.lt(r);\r\n        if (isComparable(r))\r\n            return r.gt(l);\r\n        return toValue(l) < toValue(r);\r\n    },\r\n    '>=': (l, r) => {\r\n        if (isComparable(l))\r\n            return l.geq(r);\r\n        if (isComparable(r))\r\n            return r.leq(l);\r\n        return toValue(l) >= toValue(r);\r\n    },\r\n    '<=': (l, r) => {\r\n        if (isComparable(l))\r\n            return l.leq(r);\r\n        if (isComparable(r))\r\n            return r.geq(l);\r\n        return toValue(l) <= toValue(r);\r\n    },\r\n    'contains': (l, r) => {\r\n        l = toValue(l);\r\n        r = toValue(r);\r\n        return l && isFunction(l.indexOf) ? l.indexOf(r) > -1 : false;\r\n    },\r\n    'and': (l, r, ctx) => isTruthy(toValue(l), ctx) && isTruthy(toValue(r), ctx),\r\n    'or': (l, r, ctx) => isTruthy(toValue(l), ctx) || isTruthy(toValue(r), ctx)\r\n};\n\n// **DO NOT CHANGE THIS FILE**\r\n//\r\n// This file is generated by bin/character-gen.js\r\n// bitmask character types to boost performance\r\nconst TYPES = [0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 4, 4, 4, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 2, 8, 0, 0, 0, 0, 8, 0, 0, 0, 64, 0, 65, 0, 0, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 0, 0, 2, 2, 2, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0];\r\nconst IDENTIFIER = 1;\r\nconst BLANK = 4;\r\nconst QUOTE = 8;\r\nconst INLINE_BLANK = 16;\r\nconst NUMBER = 32;\r\nconst SIGN = 64;\r\nTYPES[160] = TYPES[5760] = TYPES[6158] = TYPES[8192] = TYPES[8193] = TYPES[8194] = TYPES[8195] = TYPES[8196] = TYPES[8197] = TYPES[8198] = TYPES[8199] = TYPES[8200] = TYPES[8201] = TYPES[8202] = TYPES[8232] = TYPES[8233] = TYPES[8239] = TYPES[8287] = TYPES[12288] = BLANK;\n\nfunction createTrie(operators) {\r\n    const trie = {};\r\n    for (const [name, handler] of Object.entries(operators)) {\r\n        let node = trie;\r\n        for (let i = 0; i < name.length; i++) {\r\n            const c = name[i];\r\n            node[c] = node[c] || {};\r\n            if (i === name.length - 1 && (TYPES[name.charCodeAt(i)] & IDENTIFIER)) {\r\n                node[c].needBoundary = true;\r\n            }\r\n            node = node[c];\r\n        }\r\n        node.handler = handler;\r\n        node.end = true;\r\n    }\r\n    return trie;\r\n}\n\nconst escapeMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&#34;',\r\n    \"'\": '&#39;'\r\n};\r\nconst unescapeMap = {\r\n    '&amp;': '&',\r\n    '&lt;': '<',\r\n    '&gt;': '>',\r\n    '&#34;': '\"',\r\n    '&#39;': \"'\"\r\n};\r\nfunction escape(str) {\r\n    return stringify(str).replace(/&|<|>|\"|'/g, m => escapeMap[m]);\r\n}\r\nfunction unescape(str) {\r\n    return stringify(str).replace(/&(amp|lt|gt|#34|#39);/g, m => unescapeMap[m]);\r\n}\r\nfunction escapeOnce(str) {\r\n    return escape(unescape(stringify(str)));\r\n}\r\nfunction newlineToBr(v) {\r\n    return stringify(v).replace(/\\n/g, '<br />\\n');\r\n}\r\nfunction stripHtml(v) {\r\n    return stringify(v).replace(/<script.*?<\\/script>|<!--.*?-->|<style.*?<\\/style>|<.*?>/g, '');\r\n}\n\nconst abs = argumentsToValue(Math.abs);\r\nconst atLeast = argumentsToValue(Math.max);\r\nconst atMost = argumentsToValue(Math.min);\r\nconst ceil = argumentsToValue(Math.ceil);\r\nconst dividedBy = argumentsToValue((dividend, divisor, integerArithmetic = false) => integerArithmetic ? Math.floor(dividend / divisor) : dividend / divisor);\r\nconst floor = argumentsToValue(Math.floor);\r\nconst minus = argumentsToValue((v, arg) => v - arg);\r\nconst modulo = argumentsToValue((v, arg) => v % arg);\r\nconst times = argumentsToValue((v, arg) => v * arg);\r\nfunction round(v, arg = 0) {\r\n    v = toValue(v);\r\n    arg = toValue(arg);\r\n    const amp = Math.pow(10, arg);\r\n    return Math.round(v * amp) / amp;\r\n}\r\nfunction plus(v, arg) {\r\n    v = toValue(v);\r\n    arg = toValue(arg);\r\n    return Number(v) + Number(arg);\r\n}\n\nconst urlDecode = (x) => stringify(x).split('+').map(decodeURIComponent).join(' ');\r\nconst urlEncode = (x) => stringify(x).split(' ').map(encodeURIComponent).join('+');\n\nfunction toEnumerable(val) {\r\n    val = toValue(val);\r\n    if (isArray(val))\r\n        return val;\r\n    if (isString(val) && val.length > 0)\r\n        return [val];\r\n    if (isIterable(val))\r\n        return Array.from(val);\r\n    if (isObject(val))\r\n        return Object.keys(val).map((key) => [key, val[key]]);\r\n    return [];\r\n}\r\nfunction toArray(val) {\r\n    if (isNil(val))\r\n        return [];\r\n    if (isArray(val))\r\n        return val;\r\n    return [val];\r\n}\n\nconst join = argumentsToValue((v, arg) => toArray(v).join(arg === undefined ? ' ' : arg));\r\nconst last = argumentsToValue((v) => isArray(v) ? last$1(v) : '');\r\nconst first = argumentsToValue((v) => isArray(v) ? v[0] : '');\r\nconst reverse = argumentsToValue((v) => [...toArray(v)].reverse());\r\nfunction* sort(arr, property) {\r\n    const values = [];\r\n    for (const item of toArray(toValue(arr))) {\r\n        values.push([\r\n            item,\r\n            property ? yield this.context._getFromScope(item, stringify(property).split('.')) : item\r\n        ]);\r\n    }\r\n    return values.sort((lhs, rhs) => {\r\n        const lvalue = lhs[1];\r\n        const rvalue = rhs[1];\r\n        return lvalue < rvalue ? -1 : (lvalue > rvalue ? 1 : 0);\r\n    }).map(tuple => tuple[0]);\r\n}\r\nfunction sortNatural(input, property) {\r\n    input = toValue(input);\r\n    const propertyString = stringify(property);\r\n    const compare = property === undefined\r\n        ? caseInsensitiveCompare\r\n        : (lhs, rhs) => caseInsensitiveCompare(lhs[propertyString], rhs[propertyString]);\r\n    return [...toArray(input)].sort(compare);\r\n}\r\nconst size = (v) => (v && v.length) || 0;\r\nfunction* map(arr, property) {\r\n    const results = [];\r\n    for (const item of toArray(toValue(arr))) {\r\n        results.push(yield this.context._getFromScope(item, stringify(property).split('.')));\r\n    }\r\n    return results;\r\n}\r\nfunction compact(arr) {\r\n    arr = toValue(arr);\r\n    return toArray(arr).filter(x => !isNil(toValue(x)));\r\n}\r\nfunction concat(v, arg = []) {\r\n    v = toValue(v);\r\n    arg = toArray(arg).map(v => toValue(v));\r\n    return toArray(v).concat(arg);\r\n}\r\nfunction slice(v, begin, length = 1) {\r\n    v = toValue(v);\r\n    if (isNil(v))\r\n        return [];\r\n    if (!isArray(v))\r\n        v = stringify(v);\r\n    begin = begin < 0 ? v.length + begin : begin;\r\n    return v.slice(begin, begin + length);\r\n}\r\nfunction* where(arr, property, expected) {\r\n    const values = [];\r\n    arr = toArray(toValue(arr));\r\n    for (const item of arr) {\r\n        values.push(yield this.context._getFromScope(item, stringify(property).split('.')));\r\n    }\r\n    return arr.filter((_, i) => {\r\n        if (expected === undefined)\r\n            return isTruthy(values[i], this.context);\r\n        if (isComparable(expected))\r\n            return expected.equals(values[i]);\r\n        return values[i] === expected;\r\n    });\r\n}\r\nfunction uniq(arr) {\r\n    arr = toValue(arr);\r\n    const u = {};\r\n    return (arr || []).filter(val => {\r\n        if (hasOwnProperty.call(u, String(val)))\r\n            return false;\r\n        u[String(val)] = true;\r\n        return true;\r\n    });\r\n}\n\nconst rFormat = /%([-_0^#:]+)?(\\d+)?([EO])?(.)/;\r\nconst monthNames = [\r\n    'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August',\r\n    'September', 'October', 'November', 'December'\r\n];\r\nconst dayNames = [\r\n    'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n];\r\nconst monthNamesShort = monthNames.map(abbr);\r\nconst dayNamesShort = dayNames.map(abbr);\r\nconst suffixes = {\r\n    1: 'st',\r\n    2: 'nd',\r\n    3: 'rd',\r\n    'default': 'th'\r\n};\r\nfunction abbr(str) {\r\n    return str.slice(0, 3);\r\n}\r\n// prototype extensions\r\nfunction daysInMonth(d) {\r\n    const feb = isLeapYear(d) ? 29 : 28;\r\n    return [31, feb, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n}\r\nfunction getDayOfYear(d) {\r\n    let num = 0;\r\n    for (let i = 0; i < d.getMonth(); ++i) {\r\n        num += daysInMonth(d)[i];\r\n    }\r\n    return num + d.getDate();\r\n}\r\nfunction getWeekOfYear(d, startDay) {\r\n    // Skip to startDay of this week\r\n    const now = getDayOfYear(d) + (startDay - d.getDay());\r\n    // Find the first startDay of the year\r\n    const jan1 = new Date(d.getFullYear(), 0, 1);\r\n    const then = (7 - jan1.getDay() + startDay);\r\n    return String(Math.floor((now - then) / 7) + 1);\r\n}\r\nfunction isLeapYear(d) {\r\n    const year = d.getFullYear();\r\n    return !!((year & 3) === 0 && (year % 100 || (year % 400 === 0 && year)));\r\n}\r\nfunction getSuffix(d) {\r\n    const str = d.getDate().toString();\r\n    const index = parseInt(str.slice(-1));\r\n    return suffixes[index] || suffixes['default'];\r\n}\r\nfunction century(d) {\r\n    return parseInt(d.getFullYear().toString().substring(0, 2), 10);\r\n}\r\n// default to 0\r\nconst padWidths = {\r\n    d: 2,\r\n    e: 2,\r\n    H: 2,\r\n    I: 2,\r\n    j: 3,\r\n    k: 2,\r\n    l: 2,\r\n    L: 3,\r\n    m: 2,\r\n    M: 2,\r\n    S: 2,\r\n    U: 2,\r\n    W: 2\r\n};\r\n// default to '0'\r\nconst padChars = {\r\n    a: ' ',\r\n    A: ' ',\r\n    b: ' ',\r\n    B: ' ',\r\n    c: ' ',\r\n    e: ' ',\r\n    k: ' ',\r\n    l: ' ',\r\n    p: ' ',\r\n    P: ' '\r\n};\r\nconst formatCodes = {\r\n    a: (d) => dayNamesShort[d.getDay()],\r\n    A: (d) => dayNames[d.getDay()],\r\n    b: (d) => monthNamesShort[d.getMonth()],\r\n    B: (d) => monthNames[d.getMonth()],\r\n    c: (d) => d.toLocaleString(),\r\n    C: (d) => century(d),\r\n    d: (d) => d.getDate(),\r\n    e: (d) => d.getDate(),\r\n    H: (d) => d.getHours(),\r\n    I: (d) => String(d.getHours() % 12 || 12),\r\n    j: (d) => getDayOfYear(d),\r\n    k: (d) => d.getHours(),\r\n    l: (d) => String(d.getHours() % 12 || 12),\r\n    L: (d) => d.getMilliseconds(),\r\n    m: (d) => d.getMonth() + 1,\r\n    M: (d) => d.getMinutes(),\r\n    N: (d, opts) => {\r\n        const width = Number(opts.width) || 9;\r\n        const str = String(d.getMilliseconds()).slice(0, width);\r\n        return padEnd(str, width, '0');\r\n    },\r\n    p: (d) => (d.getHours() < 12 ? 'AM' : 'PM'),\r\n    P: (d) => (d.getHours() < 12 ? 'am' : 'pm'),\r\n    q: (d) => getSuffix(d),\r\n    s: (d) => Math.round(d.getTime() / 1000),\r\n    S: (d) => d.getSeconds(),\r\n    u: (d) => d.getDay() || 7,\r\n    U: (d) => getWeekOfYear(d, 0),\r\n    w: (d) => d.getDay(),\r\n    W: (d) => getWeekOfYear(d, 1),\r\n    x: (d) => d.toLocaleDateString(),\r\n    X: (d) => d.toLocaleTimeString(),\r\n    y: (d) => d.getFullYear().toString().slice(2, 4),\r\n    Y: (d) => d.getFullYear(),\r\n    z: (d, opts) => {\r\n        const nOffset = Math.abs(d.getTimezoneOffset());\r\n        const h = Math.floor(nOffset / 60);\r\n        const m = nOffset % 60;\r\n        return (d.getTimezoneOffset() > 0 ? '-' : '+') +\r\n            padStart(h, 2, '0') +\r\n            (opts.flags[':'] ? ':' : '') +\r\n            padStart(m, 2, '0');\r\n    },\r\n    't': () => '\\t',\r\n    'n': () => '\\n',\r\n    '%': () => '%'\r\n};\r\nformatCodes.h = formatCodes.b;\r\nfunction strftime (d, formatStr) {\r\n    let output = '';\r\n    let remaining = formatStr;\r\n    let match;\r\n    while ((match = rFormat.exec(remaining))) {\r\n        output += remaining.slice(0, match.index);\r\n        remaining = remaining.slice(match.index + match[0].length);\r\n        output += format(d, match);\r\n    }\r\n    return output + remaining;\r\n}\r\nfunction format(d, match) {\r\n    const [input, flagStr = '', width, modifier, conversion] = match;\r\n    const convert = formatCodes[conversion];\r\n    if (!convert)\r\n        return input;\r\n    const flags = {};\r\n    for (const flag of flagStr)\r\n        flags[flag] = true;\r\n    let ret = String(convert(d, { flags, width, modifier }));\r\n    let padChar = padChars[conversion] || '0';\r\n    let padWidth = width || padWidths[conversion] || 0;\r\n    if (flags['^'])\r\n        ret = ret.toUpperCase();\r\n    else if (flags['#'])\r\n        ret = changeCase(ret);\r\n    if (flags['_'])\r\n        padChar = ' ';\r\n    else if (flags['0'])\r\n        padChar = '0';\r\n    if (flags['-'])\r\n        padWidth = 0;\r\n    return padStart(ret, padWidth, padChar);\r\n}\n\n// one minute in milliseconds\r\nconst OneMinute = 60000;\r\nconst hostTimezoneOffset = new Date().getTimezoneOffset();\r\nconst ISO8601_TIMEZONE_PATTERN = /([zZ]|([+-])(\\d{2}):(\\d{2}))$/;\r\n/**\r\n * A date implementation with timezone info, just like Ruby date\r\n *\r\n * Implementation:\r\n * - create a Date offset by it's timezone difference, avoiding overriding a bunch of methods\r\n * - rewrite getTimezoneOffset() to trick strftime\r\n */\r\nclass TimezoneDate {\r\n    constructor(init, timezoneOffset) {\r\n        if (init instanceof TimezoneDate) {\r\n            this.date = init.date;\r\n            timezoneOffset = init.timezoneOffset;\r\n        }\r\n        else {\r\n            const diff = (hostTimezoneOffset - timezoneOffset) * OneMinute;\r\n            const time = new Date(init).getTime() + diff;\r\n            this.date = new Date(time);\r\n        }\r\n        this.timezoneOffset = timezoneOffset;\r\n    }\r\n    getTime() {\r\n        return this.date.getTime();\r\n    }\r\n    getMilliseconds() {\r\n        return this.date.getMilliseconds();\r\n    }\r\n    getSeconds() {\r\n        return this.date.getSeconds();\r\n    }\r\n    getMinutes() {\r\n        return this.date.getMinutes();\r\n    }\r\n    getHours() {\r\n        return this.date.getHours();\r\n    }\r\n    getDay() {\r\n        return this.date.getDay();\r\n    }\r\n    getDate() {\r\n        return this.date.getDate();\r\n    }\r\n    getMonth() {\r\n        return this.date.getMonth();\r\n    }\r\n    getFullYear() {\r\n        return this.date.getFullYear();\r\n    }\r\n    toLocaleTimeString(locale) {\r\n        return this.date.toLocaleTimeString(locale);\r\n    }\r\n    toLocaleDateString(locale) {\r\n        return this.date.toLocaleDateString(locale);\r\n    }\r\n    getTimezoneOffset() {\r\n        return this.timezoneOffset;\r\n    }\r\n    /**\r\n     * Create a Date object fixed to it's declared Timezone. Both\r\n     * - 2021-08-06T02:29:00.000Z and\r\n     * - 2021-08-06T02:29:00.000+08:00\r\n     * will always be displayed as\r\n     * - 2021-08-06 02:29:00\r\n     * regardless timezoneOffset in JavaScript realm\r\n     *\r\n     * The implementation hack:\r\n     * Instead of calling `.getMonth()`/`.getUTCMonth()` respect to `preserveTimezones`,\r\n     * we create a different Date to trick strftime, it's both simpler and more performant.\r\n     * Given that a template is expected to be parsed fewer times than rendered.\r\n     */\r\n    static createDateFixedToTimezone(dateString) {\r\n        const m = dateString.match(ISO8601_TIMEZONE_PATTERN);\r\n        // representing a UTC timestamp\r\n        if (m && m[1] === 'Z') {\r\n            return new TimezoneDate(+new Date(dateString), 0);\r\n        }\r\n        // has a timezone specified\r\n        if (m && m[2] && m[3] && m[4]) {\r\n            const [, , sign, hours, minutes] = m;\r\n            const delta = (sign === '+' ? -1 : 1) * (parseInt(hours, 10) * 60 + parseInt(minutes, 10));\r\n            return new TimezoneDate(+new Date(dateString), delta);\r\n        }\r\n        return new Date(dateString);\r\n    }\r\n}\n\nfunction date(v, format, timeZoneOffset) {\r\n    const opts = this.context.opts;\r\n    let date;\r\n    v = toValue(v);\r\n    format = stringify(format);\r\n    if (v === 'now' || v === 'today') {\r\n        date = new Date();\r\n    }\r\n    else if (isNumber(v)) {\r\n        date = new Date(v * 1000);\r\n    }\r\n    else if (isString(v)) {\r\n        if (/^\\d+$/.test(v)) {\r\n            date = new Date(+v * 1000);\r\n        }\r\n        else if (opts.preserveTimezones) {\r\n            date = TimezoneDate.createDateFixedToTimezone(v);\r\n        }\r\n        else {\r\n            date = new Date(v);\r\n        }\r\n    }\r\n    else {\r\n        date = v;\r\n    }\r\n    if (!isValidDate(date))\r\n        return v;\r\n    if (timeZoneOffset !== undefined) {\r\n        date = new TimezoneDate(date, timeZoneOffset);\r\n    }\r\n    else if (opts.timezoneOffset !== undefined) {\r\n        date = new TimezoneDate(date, opts.timezoneOffset);\r\n    }\r\n    return strftime(date, format);\r\n}\r\nfunction isValidDate(date) {\r\n    return (date instanceof Date || date instanceof TimezoneDate) && !isNaN(date.getTime());\r\n}\n\nfunction Default(value, defaultValue, ...args) {\r\n    value = toValue(value);\r\n    if (isArray(value) || isString(value))\r\n        return value.length ? value : defaultValue;\r\n    if (value === false && (new Map(args)).get('allow_false'))\r\n        return false;\r\n    return isFalsy(value, this.context) ? defaultValue : value;\r\n}\r\nfunction json(value) {\r\n    return JSON.stringify(value);\r\n}\r\nconst raw$1 = identify;\n\nclass LiquidError extends Error {\r\n    constructor(err, token) {\r\n        super(err.message);\r\n        this.originalError = err;\r\n        this.token = token;\r\n        this.context = '';\r\n    }\r\n    update() {\r\n        const err = this.originalError;\r\n        this.context = mkContext(this.token);\r\n        this.message = mkMessage(err.message, this.token);\r\n        this.stack = this.message + '\\n' + this.context +\r\n            '\\n' + this.stack + '\\nFrom ' + err.stack;\r\n    }\r\n}\r\nclass TokenizationError extends LiquidError {\r\n    constructor(message, token) {\r\n        super(new Error(message), token);\r\n        this.name = 'TokenizationError';\r\n        super.update();\r\n    }\r\n}\r\nclass ParseError extends LiquidError {\r\n    constructor(err, token) {\r\n        super(err, token);\r\n        this.name = 'ParseError';\r\n        this.message = err.message;\r\n        super.update();\r\n    }\r\n}\r\nclass RenderError extends LiquidError {\r\n    constructor(err, tpl) {\r\n        super(err, tpl.token);\r\n        this.name = 'RenderError';\r\n        this.message = err.message;\r\n        super.update();\r\n    }\r\n    static is(obj) {\r\n        return obj.name === 'RenderError';\r\n    }\r\n}\r\nclass UndefinedVariableError extends LiquidError {\r\n    constructor(err, token) {\r\n        super(err, token);\r\n        this.name = 'UndefinedVariableError';\r\n        this.message = err.message;\r\n        super.update();\r\n    }\r\n}\r\n// only used internally; raised where we don't have token information,\r\n// so it can't be an UndefinedVariableError.\r\nclass InternalUndefinedVariableError extends Error {\r\n    constructor(variableName) {\r\n        super(`undefined variable: ${variableName}`);\r\n        this.name = 'InternalUndefinedVariableError';\r\n        this.variableName = variableName;\r\n    }\r\n}\r\nclass AssertionError extends Error {\r\n    constructor(message) {\r\n        super(message);\r\n        this.name = 'AssertionError';\r\n        this.message = message + '';\r\n    }\r\n}\r\nfunction mkContext(token) {\r\n    const [line] = token.getPosition();\r\n    const lines = token.input.split('\\n');\r\n    const begin = Math.max(line - 2, 1);\r\n    const end = Math.min(line + 3, lines.length);\r\n    const context = range(begin, end + 1)\r\n        .map(lineNumber => {\r\n        const indicator = (lineNumber === line) ? '>> ' : '   ';\r\n        const num = padStart(String(lineNumber), String(end).length);\r\n        const text = lines[lineNumber - 1];\r\n        return `${indicator}${num}| ${text}`;\r\n    })\r\n        .join('\\n');\r\n    return context;\r\n}\r\nfunction mkMessage(msg, token) {\r\n    if (token.file)\r\n        msg += `, file:${token.file}`;\r\n    const [line, col] = token.getPosition();\r\n    msg += `, line:${line}, col:${col}`;\r\n    return msg;\r\n}\n\nfunction assert(predicate, message) {\r\n    if (!predicate) {\r\n        const msg = typeof message === 'function'\r\n            ? message()\r\n            : (message || `expect ${predicate} to be true`);\r\n        throw new AssertionError(msg);\r\n    }\r\n}\n\n/**\r\n * String related filters\r\n *\r\n * * prefer stringify() to String() since `undefined`, `null` should eval ''\r\n */\r\nfunction append(v, arg) {\r\n    assert(arguments.length === 2, 'append expect 2 arguments');\r\n    return stringify(v) + stringify(arg);\r\n}\r\nfunction prepend(v, arg) {\r\n    assert(arguments.length === 2, 'prepend expect 2 arguments');\r\n    return stringify(arg) + stringify(v);\r\n}\r\nfunction lstrip(v, chars) {\r\n    if (chars) {\r\n        chars = escapeRegExp(stringify(chars));\r\n        return stringify(v).replace(new RegExp(`^[${chars}]+`, 'g'), '');\r\n    }\r\n    return stringify(v).replace(/^\\s+/, '');\r\n}\r\nfunction downcase(v) {\r\n    return stringify(v).toLowerCase();\r\n}\r\nfunction upcase(str) {\r\n    return stringify(str).toUpperCase();\r\n}\r\nfunction remove(v, arg) {\r\n    return stringify(v).split(String(arg)).join('');\r\n}\r\nfunction removeFirst(v, l) {\r\n    return stringify(v).replace(String(l), '');\r\n}\r\nfunction rstrip(str, chars) {\r\n    if (chars) {\r\n        chars = escapeRegExp(stringify(chars));\r\n        return stringify(str).replace(new RegExp(`[${chars}]+$`, 'g'), '');\r\n    }\r\n    return stringify(str).replace(/\\s+$/, '');\r\n}\r\nfunction split(v, arg) {\r\n    const arr = stringify(v).split(String(arg));\r\n    // align to ruby split, which is the behavior of shopify/liquid\r\n    // see: https://ruby-doc.org/core-2.4.0/String.html#method-i-split\r\n    while (arr.length && arr[arr.length - 1] === '')\r\n        arr.pop();\r\n    return arr;\r\n}\r\nfunction strip(v, chars) {\r\n    if (chars) {\r\n        chars = escapeRegExp(stringify(chars));\r\n        return stringify(v)\r\n            .replace(new RegExp(`^[${chars}]+`, 'g'), '')\r\n            .replace(new RegExp(`[${chars}]+$`, 'g'), '');\r\n    }\r\n    return stringify(v).trim();\r\n}\r\nfunction stripNewlines(v) {\r\n    return stringify(v).replace(/\\n/g, '');\r\n}\r\nfunction capitalize(str) {\r\n    str = stringify(str);\r\n    return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\r\n}\r\nfunction replace(v, pattern, replacement) {\r\n    return stringify(v).split(String(pattern)).join(replacement);\r\n}\r\nfunction replaceFirst(v, arg1, arg2) {\r\n    return stringify(v).replace(String(arg1), arg2);\r\n}\r\nfunction truncate(v, l = 50, o = '...') {\r\n    v = stringify(v);\r\n    if (v.length <= l)\r\n        return v;\r\n    return v.substring(0, l - o.length) + o;\r\n}\r\nfunction truncatewords(v, words = 15, o = '...') {\r\n    const arr = stringify(v).split(/\\s+/);\r\n    if (words <= 0)\r\n        words = 1;\r\n    let ret = arr.slice(0, words).join(' ');\r\n    if (arr.length >= words)\r\n        ret += o;\r\n    return ret;\r\n}\n\nvar builtinFilters = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    escape: escape,\n    escapeOnce: escapeOnce,\n    newlineToBr: newlineToBr,\n    stripHtml: stripHtml,\n    abs: abs,\n    atLeast: atLeast,\n    atMost: atMost,\n    ceil: ceil,\n    dividedBy: dividedBy,\n    floor: floor,\n    minus: minus,\n    modulo: modulo,\n    times: times,\n    round: round,\n    plus: plus,\n    urlDecode: urlDecode,\n    urlEncode: urlEncode,\n    join: join,\n    last: last,\n    first: first,\n    reverse: reverse,\n    sort: sort,\n    sortNatural: sortNatural,\n    size: size,\n    map: map,\n    compact: compact,\n    concat: concat,\n    slice: slice,\n    where: where,\n    uniq: uniq,\n    date: date,\n    Default: Default,\n    json: json,\n    raw: raw$1,\n    append: append,\n    prepend: prepend,\n    lstrip: lstrip,\n    downcase: downcase,\n    upcase: upcase,\n    remove: remove,\n    removeFirst: removeFirst,\n    rstrip: rstrip,\n    split: split,\n    strip: strip,\n    stripNewlines: stripNewlines,\n    capitalize: capitalize,\n    replace: replace,\n    replaceFirst: replaceFirst,\n    truncate: truncate,\n    truncatewords: truncatewords\n});\n\nvar TokenKind;\r\n(function (TokenKind) {\r\n    TokenKind[TokenKind[\"Number\"] = 1] = \"Number\";\r\n    TokenKind[TokenKind[\"Literal\"] = 2] = \"Literal\";\r\n    TokenKind[TokenKind[\"Tag\"] = 4] = \"Tag\";\r\n    TokenKind[TokenKind[\"Output\"] = 8] = \"Output\";\r\n    TokenKind[TokenKind[\"HTML\"] = 16] = \"HTML\";\r\n    TokenKind[TokenKind[\"Filter\"] = 32] = \"Filter\";\r\n    TokenKind[TokenKind[\"Hash\"] = 64] = \"Hash\";\r\n    TokenKind[TokenKind[\"PropertyAccess\"] = 128] = \"PropertyAccess\";\r\n    TokenKind[TokenKind[\"Word\"] = 256] = \"Word\";\r\n    TokenKind[TokenKind[\"Range\"] = 512] = \"Range\";\r\n    TokenKind[TokenKind[\"Quoted\"] = 1024] = \"Quoted\";\r\n    TokenKind[TokenKind[\"Operator\"] = 2048] = \"Operator\";\r\n    TokenKind[TokenKind[\"Delimited\"] = 12] = \"Delimited\";\r\n})(TokenKind || (TokenKind = {}));\n\nfunction isDelimitedToken(val) {\r\n    return !!(getKind(val) & TokenKind.Delimited);\r\n}\r\nfunction isOperatorToken(val) {\r\n    return getKind(val) === TokenKind.Operator;\r\n}\r\nfunction isHTMLToken(val) {\r\n    return getKind(val) === TokenKind.HTML;\r\n}\r\nfunction isOutputToken(val) {\r\n    return getKind(val) === TokenKind.Output;\r\n}\r\nfunction isTagToken(val) {\r\n    return getKind(val) === TokenKind.Tag;\r\n}\r\nfunction isQuotedToken(val) {\r\n    return getKind(val) === TokenKind.Quoted;\r\n}\r\nfunction isLiteralToken(val) {\r\n    return getKind(val) === TokenKind.Literal;\r\n}\r\nfunction isNumberToken(val) {\r\n    return getKind(val) === TokenKind.Number;\r\n}\r\nfunction isPropertyAccessToken(val) {\r\n    return getKind(val) === TokenKind.PropertyAccess;\r\n}\r\nfunction isWordToken(val) {\r\n    return getKind(val) === TokenKind.Word;\r\n}\r\nfunction isRangeToken(val) {\r\n    return getKind(val) === TokenKind.Range;\r\n}\r\nfunction getKind(val) {\r\n    return val ? val.kind : -1;\r\n}\n\nvar typeGuards = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    isDelimitedToken: isDelimitedToken,\n    isOperatorToken: isOperatorToken,\n    isHTMLToken: isHTMLToken,\n    isOutputToken: isOutputToken,\n    isTagToken: isTagToken,\n    isQuotedToken: isQuotedToken,\n    isLiteralToken: isLiteralToken,\n    isNumberToken: isNumberToken,\n    isPropertyAccessToken: isPropertyAccessToken,\n    isWordToken: isWordToken,\n    isRangeToken: isRangeToken\n});\n\nclass NullDrop extends Drop {\r\n    equals(value) {\r\n        return isNil(toValue(value));\r\n    }\r\n    gt() {\r\n        return false;\r\n    }\r\n    geq() {\r\n        return false;\r\n    }\r\n    lt() {\r\n        return false;\r\n    }\r\n    leq() {\r\n        return false;\r\n    }\r\n    valueOf() {\r\n        return null;\r\n    }\r\n}\n\nclass EmptyDrop extends Drop {\r\n    equals(value) {\r\n        if (value instanceof EmptyDrop)\r\n            return false;\r\n        value = toValue(value);\r\n        if (isString(value) || isArray(value))\r\n            return value.length === 0;\r\n        if (isObject(value))\r\n            return Object.keys(value).length === 0;\r\n        return false;\r\n    }\r\n    gt() {\r\n        return false;\r\n    }\r\n    geq() {\r\n        return false;\r\n    }\r\n    lt() {\r\n        return false;\r\n    }\r\n    leq() {\r\n        return false;\r\n    }\r\n    valueOf() {\r\n        return '';\r\n    }\r\n}\n\nclass BlankDrop extends EmptyDrop {\r\n    equals(value) {\r\n        if (value === false)\r\n            return true;\r\n        if (isNil(toValue(value)))\r\n            return true;\r\n        if (isString(value))\r\n            return /^\\s*$/.test(value);\r\n        return super.equals(value);\r\n    }\r\n}\n\nconst nil = new NullDrop();\r\nconst literalValues = {\r\n    'true': true,\r\n    'false': false,\r\n    'nil': nil,\r\n    'null': nil,\r\n    'empty': new EmptyDrop(),\r\n    'blank': new BlankDrop()\r\n};\n\nconst rHex = /[\\da-fA-F]/;\r\nconst rOct = /[0-7]/;\r\nconst escapeChar = {\r\n    b: '\\b',\r\n    f: '\\f',\r\n    n: '\\n',\r\n    r: '\\r',\r\n    t: '\\t',\r\n    v: '\\x0B'\r\n};\r\nfunction hexVal(c) {\r\n    const code = c.charCodeAt(0);\r\n    if (code >= 97)\r\n        return code - 87;\r\n    if (code >= 65)\r\n        return code - 55;\r\n    return code - 48;\r\n}\r\nfunction parseStringLiteral(str) {\r\n    let ret = '';\r\n    for (let i = 1; i < str.length - 1; i++) {\r\n        if (str[i] !== '\\\\') {\r\n            ret += str[i];\r\n            continue;\r\n        }\r\n        if (escapeChar[str[i + 1]] !== undefined) {\r\n            ret += escapeChar[str[++i]];\r\n        }\r\n        else if (str[i + 1] === 'u') {\r\n            let val = 0;\r\n            let j = i + 2;\r\n            while (j <= i + 5 && rHex.test(str[j])) {\r\n                val = val * 16 + hexVal(str[j++]);\r\n            }\r\n            i = j - 1;\r\n            ret += String.fromCharCode(val);\r\n        }\r\n        else if (!rOct.test(str[i + 1])) {\r\n            ret += str[++i];\r\n        }\r\n        else {\r\n            let j = i + 1;\r\n            let val = 0;\r\n            while (j <= i + 3 && rOct.test(str[j])) {\r\n                val = val * 8 + hexVal(str[j++]);\r\n            }\r\n            i = j - 1;\r\n            ret += String.fromCharCode(val);\r\n        }\r\n    }\r\n    return ret;\r\n}\n\n// convert an async iterator to a Promise\r\nfunction toPromise(val) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (!isIterator(val))\r\n            return val;\r\n        let value;\r\n        let done = false;\r\n        let next = 'next';\r\n        do {\r\n            const state = val[next](value);\r\n            done = state.done;\r\n            value = state.value;\r\n            next = 'next';\r\n            try {\r\n                if (isIterator(value))\r\n                    value = toPromise(value);\r\n                if (isPromise(value))\r\n                    value = yield value;\r\n            }\r\n            catch (err) {\r\n                next = 'throw';\r\n                value = err;\r\n            }\r\n        } while (!done);\r\n        return value;\r\n    });\r\n}\r\n// convert an async iterator to a value in a synchronous manner\r\nfunction toValueSync(val) {\r\n    if (!isIterator(val))\r\n        return val;\r\n    let value;\r\n    let done = false;\r\n    let next = 'next';\r\n    do {\r\n        const state = val[next](value);\r\n        done = state.done;\r\n        value = state.value;\r\n        next = 'next';\r\n        if (isIterator(value)) {\r\n            try {\r\n                value = toValueSync(value);\r\n            }\r\n            catch (err) {\r\n                next = 'throw';\r\n                value = err;\r\n            }\r\n        }\r\n    } while (!done);\r\n    return value;\r\n}\r\nconst toThenable = toPromise;\n\nclass Expression {\r\n    constructor(tokens) {\r\n        this.postfix = [...toPostfix(tokens)];\r\n    }\r\n    *evaluate(ctx, lenient) {\r\n        assert(ctx, 'unable to evaluate: context not defined');\r\n        const operands = [];\r\n        for (const token of this.postfix) {\r\n            if (isOperatorToken(token)) {\r\n                const r = operands.pop();\r\n                const l = operands.pop();\r\n                const result = yield evalOperatorToken(ctx.opts.operators, token, l, r, ctx);\r\n                operands.push(result);\r\n            }\r\n            else {\r\n                operands.push(yield _evalToken(token, ctx, lenient && this.postfix.length === 1));\r\n            }\r\n        }\r\n        return operands[0];\r\n    }\r\n}\r\n/**\r\n * @deprecated use `_evalToken` instead\r\n */\r\nfunction* evalToken(token, ctx, lenient = false) {\r\n    return toValueSync(_evalToken(token, ctx, lenient));\r\n}\r\nfunction* _evalToken(token, ctx, lenient = false) {\r\n    if (isPropertyAccessToken(token))\r\n        return yield evalPropertyAccessToken(token, ctx, lenient);\r\n    if (isRangeToken(token))\r\n        return yield evalRangeToken(token, ctx);\r\n    if (isLiteralToken(token))\r\n        return evalLiteralToken(token);\r\n    if (isNumberToken(token))\r\n        return evalNumberToken(token);\r\n    if (isWordToken(token))\r\n        return token.getText();\r\n    if (isQuotedToken(token))\r\n        return evalQuotedToken(token);\r\n}\r\nfunction* evalPropertyAccessToken(token, ctx, lenient) {\r\n    const props = [];\r\n    for (const prop of token.props) {\r\n        props.push((yield _evalToken(prop, ctx, false)));\r\n    }\r\n    try {\r\n        return yield ctx._get([token.propertyName, ...props]);\r\n    }\r\n    catch (e) {\r\n        if (lenient && e.name === 'InternalUndefinedVariableError')\r\n            return null;\r\n        throw (new UndefinedVariableError(e, token));\r\n    }\r\n}\r\nfunction evalNumberToken(token) {\r\n    const str = token.whole.content + '.' + (token.decimal ? token.decimal.content : '');\r\n    return Number(str);\r\n}\r\nfunction evalQuotedToken(token) {\r\n    return parseStringLiteral(token.getText());\r\n}\r\nfunction evalOperatorToken(operators, token, lhs, rhs, ctx) {\r\n    const impl = operators[token.operator];\r\n    return impl(lhs, rhs, ctx);\r\n}\r\nfunction evalLiteralToken(token) {\r\n    return literalValues[token.literal];\r\n}\r\nfunction* evalRangeToken(token, ctx) {\r\n    const low = yield _evalToken(token.lhs, ctx);\r\n    const high = yield _evalToken(token.rhs, ctx);\r\n    return range(+low, +high + 1);\r\n}\r\nfunction* toPostfix(tokens) {\r\n    const ops = [];\r\n    for (const token of tokens) {\r\n        if (isOperatorToken(token)) {\r\n            while (ops.length && ops[ops.length - 1].getPrecedence() > token.getPrecedence()) {\r\n                yield ops.pop();\r\n            }\r\n            ops.push(token);\r\n        }\r\n        else\r\n            yield token;\r\n    }\r\n    while (ops.length) {\r\n        yield ops.pop();\r\n    }\r\n}\n\nclass Token {\r\n    constructor(kind, input, begin, end, file) {\r\n        this.kind = kind;\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.file = file;\r\n    }\r\n    getText() {\r\n        return this.input.slice(this.begin, this.end);\r\n    }\r\n    getPosition() {\r\n        let [row, col] = [1, 1];\r\n        for (let i = 0; i < this.begin; i++) {\r\n            if (this.input[i] === '\\n') {\r\n                row++;\r\n                col = 1;\r\n            }\r\n            else\r\n                col++;\r\n        }\r\n        return [row, col];\r\n    }\r\n    size() {\r\n        return this.end - this.begin;\r\n    }\r\n}\n\nclass DelimitedToken extends Token {\r\n    constructor(kind, content, input, begin, end, trimLeft, trimRight, file) {\r\n        super(kind, input, begin, end, file);\r\n        this.trimLeft = false;\r\n        this.trimRight = false;\r\n        this.content = this.getText();\r\n        const tl = content[0] === '-';\r\n        const tr = last$1(content) === '-';\r\n        this.content = content\r\n            .slice(tl ? 1 : 0, tr ? -1 : content.length)\r\n            .trim();\r\n        this.trimLeft = tl || trimLeft;\r\n        this.trimRight = tr || trimRight;\r\n    }\r\n}\n\nfunction whiteSpaceCtrl(tokens, options) {\r\n    let inRaw = false;\r\n    for (let i = 0; i < tokens.length; i++) {\r\n        const token = tokens[i];\r\n        if (!isDelimitedToken(token))\r\n            continue;\r\n        if (!inRaw && token.trimLeft) {\r\n            trimLeft(tokens[i - 1], options.greedy);\r\n        }\r\n        if (isTagToken(token)) {\r\n            if (token.name === 'raw')\r\n                inRaw = true;\r\n            else if (token.name === 'endraw')\r\n                inRaw = false;\r\n        }\r\n        if (!inRaw && token.trimRight) {\r\n            trimRight(tokens[i + 1], options.greedy);\r\n        }\r\n    }\r\n}\r\nfunction trimLeft(token, greedy) {\r\n    if (!token || !isHTMLToken(token))\r\n        return;\r\n    const mask = greedy ? BLANK : INLINE_BLANK;\r\n    while (TYPES[token.input.charCodeAt(token.end - 1 - token.trimRight)] & mask)\r\n        token.trimRight++;\r\n}\r\nfunction trimRight(token, greedy) {\r\n    if (!token || !isHTMLToken(token))\r\n        return;\r\n    const mask = greedy ? BLANK : INLINE_BLANK;\r\n    while (TYPES[token.input.charCodeAt(token.begin + token.trimLeft)] & mask)\r\n        token.trimLeft++;\r\n    if (token.input.charAt(token.begin + token.trimLeft) === '\\n')\r\n        token.trimLeft++;\r\n}\n\nclass NumberToken extends Token {\r\n    constructor(whole, decimal) {\r\n        super(TokenKind.Number, whole.input, whole.begin, decimal ? decimal.end : whole.end, whole.file);\r\n        this.whole = whole;\r\n        this.decimal = decimal;\r\n    }\r\n}\n\nclass IdentifierToken extends Token {\r\n    constructor(input, begin, end, file) {\r\n        super(TokenKind.Word, input, begin, end, file);\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.file = file;\r\n        this.content = this.getText();\r\n    }\r\n    isNumber(allowSign = false) {\r\n        const begin = allowSign && TYPES[this.input.charCodeAt(this.begin)] & SIGN\r\n            ? this.begin + 1\r\n            : this.begin;\r\n        for (let i = begin; i < this.end; i++) {\r\n            if (!(TYPES[this.input.charCodeAt(i)] & NUMBER))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n}\n\nclass LiteralToken extends Token {\r\n    constructor(input, begin, end, file) {\r\n        super(TokenKind.Literal, input, begin, end, file);\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.file = file;\r\n        this.literal = this.getText();\r\n    }\r\n}\n\nconst precedence = {\r\n    '==': 1,\r\n    '!=': 1,\r\n    '>': 1,\r\n    '<': 1,\r\n    '>=': 1,\r\n    '<=': 1,\r\n    'contains': 1,\r\n    'and': 0,\r\n    'or': 0\r\n};\r\nclass OperatorToken extends Token {\r\n    constructor(input, begin, end, file) {\r\n        super(TokenKind.Operator, input, begin, end, file);\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.file = file;\r\n        this.operator = this.getText();\r\n    }\r\n    getPrecedence() {\r\n        const key = this.getText();\r\n        return key in precedence ? precedence[key] : 1;\r\n    }\r\n}\n\nclass PropertyAccessToken extends Token {\r\n    constructor(variable, props, end) {\r\n        super(TokenKind.PropertyAccess, variable.input, variable.begin, end, variable.file);\r\n        this.variable = variable;\r\n        this.props = props;\r\n        this.propertyName = this.variable instanceof IdentifierToken\r\n            ? this.variable.getText()\r\n            : parseStringLiteral(this.variable.getText());\r\n    }\r\n}\n\nclass FilterToken extends Token {\r\n    constructor(name, args, input, begin, end, file) {\r\n        super(TokenKind.Filter, input, begin, end, file);\r\n        this.name = name;\r\n        this.args = args;\r\n    }\r\n}\n\nclass HashToken extends Token {\r\n    constructor(input, begin, end, name, value, file) {\r\n        super(TokenKind.Hash, input, begin, end, file);\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.name = name;\r\n        this.value = value;\r\n        this.file = file;\r\n    }\r\n}\n\nclass QuotedToken extends Token {\r\n    constructor(input, begin, end, file) {\r\n        super(TokenKind.Quoted, input, begin, end, file);\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.file = file;\r\n    }\r\n}\n\nclass HTMLToken extends Token {\r\n    constructor(input, begin, end, file) {\r\n        super(TokenKind.HTML, input, begin, end, file);\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.file = file;\r\n        this.trimLeft = 0;\r\n        this.trimRight = 0;\r\n    }\r\n    getContent() {\r\n        return this.input.slice(this.begin + this.trimLeft, this.end - this.trimRight);\r\n    }\r\n}\n\nclass RangeToken extends Token {\r\n    constructor(input, begin, end, lhs, rhs, file) {\r\n        super(TokenKind.Range, input, begin, end, file);\r\n        this.input = input;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.lhs = lhs;\r\n        this.rhs = rhs;\r\n        this.file = file;\r\n    }\r\n}\n\nclass OutputToken extends DelimitedToken {\r\n    constructor(input, begin, end, options, file) {\r\n        const { trimOutputLeft, trimOutputRight, outputDelimiterLeft, outputDelimiterRight } = options;\r\n        const value = input.slice(begin + outputDelimiterLeft.length, end - outputDelimiterRight.length);\r\n        super(TokenKind.Output, value, input, begin, end, trimOutputLeft, trimOutputRight, file);\r\n    }\r\n}\n\nfunction matchOperator(str, begin, trie, end = str.length) {\r\n    let node = trie;\r\n    let i = begin;\r\n    let info;\r\n    while (node[str[i]] && i < end) {\r\n        node = node[str[i++]];\r\n        if (node['end'])\r\n            info = node;\r\n    }\r\n    if (!info)\r\n        return -1;\r\n    if (info['needBoundary'] && (TYPES[str.charCodeAt(i)] & IDENTIFIER))\r\n        return -1;\r\n    return i;\r\n}\n\nclass LiquidTagToken extends DelimitedToken {\r\n    constructor(input, begin, end, options, file) {\r\n        const value = input.slice(begin, end);\r\n        super(TokenKind.Tag, value, input, begin, end, false, false, file);\r\n        if (!/\\S/.test(value)) {\r\n            // A line that contains only whitespace.\r\n            this.name = '';\r\n            this.args = '';\r\n        }\r\n        else {\r\n            const tokenizer = new Tokenizer(this.content, options.operatorsTrie);\r\n            this.name = tokenizer.readTagName();\r\n            if (!this.name)\r\n                throw new TokenizationError(`illegal liquid tag syntax`, this);\r\n            tokenizer.skipBlank();\r\n            this.args = tokenizer.remaining();\r\n        }\r\n    }\r\n}\n\nclass Tokenizer {\r\n    constructor(input, trie = defaultOptions.operatorsTrie, file = '') {\r\n        this.input = input;\r\n        this.trie = trie;\r\n        this.file = file;\r\n        this.p = 0;\r\n        this.rawBeginAt = -1;\r\n        this.N = input.length;\r\n    }\r\n    readExpression() {\r\n        return new Expression(this.readExpressionTokens());\r\n    }\r\n    *readExpressionTokens() {\r\n        const operand = this.readValue();\r\n        if (!operand)\r\n            return;\r\n        yield operand;\r\n        while (this.p < this.N) {\r\n            const operator = this.readOperator();\r\n            if (!operator)\r\n                return;\r\n            const operand = this.readValue();\r\n            if (!operand)\r\n                return;\r\n            yield operator;\r\n            yield operand;\r\n        }\r\n    }\r\n    readOperator() {\r\n        this.skipBlank();\r\n        const end = matchOperator(this.input, this.p, this.trie);\r\n        if (end === -1)\r\n            return;\r\n        return new OperatorToken(this.input, this.p, (this.p = end), this.file);\r\n    }\r\n    readFilters() {\r\n        const filters = [];\r\n        while (true) {\r\n            const filter = this.readFilter();\r\n            if (!filter)\r\n                return filters;\r\n            filters.push(filter);\r\n        }\r\n    }\r\n    readFilter() {\r\n        this.skipBlank();\r\n        if (this.end())\r\n            return null;\r\n        assert(this.peek() === '|', () => `unexpected token at ${this.snapshot()}`);\r\n        this.p++;\r\n        const begin = this.p;\r\n        const name = this.readIdentifier();\r\n        if (!name.size())\r\n            return null;\r\n        const args = [];\r\n        this.skipBlank();\r\n        if (this.peek() === ':') {\r\n            do {\r\n                ++this.p;\r\n                const arg = this.readFilterArg();\r\n                arg && args.push(arg);\r\n                this.skipBlank();\r\n                assert(this.end() || this.peek() === ',' || this.peek() === '|', () => `unexpected character ${this.snapshot()}`);\r\n            } while (this.peek() === ',');\r\n        }\r\n        return new FilterToken(name.getText(), args, this.input, begin, this.p, this.file);\r\n    }\r\n    readFilterArg() {\r\n        const key = this.readValue();\r\n        if (!key)\r\n            return;\r\n        this.skipBlank();\r\n        if (this.peek() !== ':')\r\n            return key;\r\n        ++this.p;\r\n        const value = this.readValue();\r\n        return [key.getText(), value];\r\n    }\r\n    readTopLevelTokens(options = defaultOptions) {\r\n        const tokens = [];\r\n        while (this.p < this.N) {\r\n            const token = this.readTopLevelToken(options);\r\n            tokens.push(token);\r\n        }\r\n        whiteSpaceCtrl(tokens, options);\r\n        return tokens;\r\n    }\r\n    readTopLevelToken(options) {\r\n        const { tagDelimiterLeft, outputDelimiterLeft } = options;\r\n        if (this.rawBeginAt > -1)\r\n            return this.readEndrawOrRawContent(options);\r\n        if (this.match(tagDelimiterLeft))\r\n            return this.readTagToken(options);\r\n        if (this.match(outputDelimiterLeft))\r\n            return this.readOutputToken(options);\r\n        return this.readHTMLToken([tagDelimiterLeft, outputDelimiterLeft]);\r\n    }\r\n    readHTMLToken(stopStrings) {\r\n        const begin = this.p;\r\n        while (this.p < this.N) {\r\n            if (stopStrings.some(str => this.match(str)))\r\n                break;\r\n            ++this.p;\r\n        }\r\n        return new HTMLToken(this.input, begin, this.p, this.file);\r\n    }\r\n    readTagToken(options = defaultOptions) {\r\n        const { file, input } = this;\r\n        const begin = this.p;\r\n        if (this.readToDelimiter(options.tagDelimiterRight) === -1) {\r\n            throw this.mkError(`tag ${this.snapshot(begin)} not closed`, begin);\r\n        }\r\n        const token = new TagToken(input, begin, this.p, options, file);\r\n        if (token.name === 'raw')\r\n            this.rawBeginAt = begin;\r\n        return token;\r\n    }\r\n    readToDelimiter(delimiter) {\r\n        while (this.p < this.N) {\r\n            if ((this.peekType() & QUOTE)) {\r\n                this.readQuoted();\r\n                continue;\r\n            }\r\n            ++this.p;\r\n            if (this.rmatch(delimiter))\r\n                return this.p;\r\n        }\r\n        return -1;\r\n    }\r\n    readOutputToken(options = defaultOptions) {\r\n        const { file, input } = this;\r\n        const { outputDelimiterRight } = options;\r\n        const begin = this.p;\r\n        if (this.readToDelimiter(outputDelimiterRight) === -1) {\r\n            throw this.mkError(`output ${this.snapshot(begin)} not closed`, begin);\r\n        }\r\n        return new OutputToken(input, begin, this.p, options, file);\r\n    }\r\n    readEndrawOrRawContent(options) {\r\n        const { tagDelimiterLeft, tagDelimiterRight } = options;\r\n        const begin = this.p;\r\n        let leftPos = this.readTo(tagDelimiterLeft) - tagDelimiterLeft.length;\r\n        while (this.p < this.N) {\r\n            if (this.readIdentifier().getText() !== 'endraw') {\r\n                leftPos = this.readTo(tagDelimiterLeft) - tagDelimiterLeft.length;\r\n                continue;\r\n            }\r\n            while (this.p <= this.N) {\r\n                if (this.rmatch(tagDelimiterRight)) {\r\n                    const end = this.p;\r\n                    if (begin === leftPos) {\r\n                        this.rawBeginAt = -1;\r\n                        return new TagToken(this.input, begin, end, options, this.file);\r\n                    }\r\n                    else {\r\n                        this.p = leftPos;\r\n                        return new HTMLToken(this.input, begin, leftPos, this.file);\r\n                    }\r\n                }\r\n                if (this.rmatch(tagDelimiterLeft))\r\n                    break;\r\n                this.p++;\r\n            }\r\n        }\r\n        throw this.mkError(`raw ${this.snapshot(this.rawBeginAt)} not closed`, begin);\r\n    }\r\n    readLiquidTagTokens(options = defaultOptions) {\r\n        const tokens = [];\r\n        while (this.p < this.N) {\r\n            const token = this.readLiquidTagToken(options);\r\n            if (token.name)\r\n                tokens.push(token);\r\n        }\r\n        return tokens;\r\n    }\r\n    readLiquidTagToken(options) {\r\n        const { file, input } = this;\r\n        const begin = this.p;\r\n        let end = this.N;\r\n        if (this.readToDelimiter('\\n') !== -1)\r\n            end = this.p;\r\n        return new LiquidTagToken(input, begin, end, options, file);\r\n    }\r\n    mkError(msg, begin) {\r\n        return new TokenizationError(msg, new IdentifierToken(this.input, begin, this.N, this.file));\r\n    }\r\n    snapshot(begin = this.p) {\r\n        return JSON.stringify(ellipsis(this.input.slice(begin), 16));\r\n    }\r\n    /**\r\n     * @deprecated\r\n     */\r\n    readWord() {\r\n        console.warn('Tokenizer#readWord() will be removed, use #readIdentifier instead');\r\n        return this.readIdentifier();\r\n    }\r\n    readIdentifier() {\r\n        this.skipBlank();\r\n        const begin = this.p;\r\n        while (this.peekType() & IDENTIFIER)\r\n            ++this.p;\r\n        return new IdentifierToken(this.input, begin, this.p, this.file);\r\n    }\r\n    readTagName() {\r\n        this.skipBlank();\r\n        // Handle inline comment tags\r\n        if (this.input[this.p] === '#')\r\n            return this.input.slice(this.p, ++this.p);\r\n        return this.readIdentifier().getText();\r\n    }\r\n    readHashes(jekyllStyle) {\r\n        const hashes = [];\r\n        while (true) {\r\n            const hash = this.readHash(jekyllStyle);\r\n            if (!hash)\r\n                return hashes;\r\n            hashes.push(hash);\r\n        }\r\n    }\r\n    readHash(jekyllStyle) {\r\n        this.skipBlank();\r\n        if (this.peek() === ',')\r\n            ++this.p;\r\n        const begin = this.p;\r\n        const name = this.readIdentifier();\r\n        if (!name.size())\r\n            return;\r\n        let value;\r\n        this.skipBlank();\r\n        const sep = jekyllStyle ? '=' : ':';\r\n        if (this.peek() === sep) {\r\n            ++this.p;\r\n            value = this.readValue();\r\n        }\r\n        return new HashToken(this.input, begin, this.p, name, value, this.file);\r\n    }\r\n    remaining() {\r\n        return this.input.slice(this.p);\r\n    }\r\n    advance(i = 1) {\r\n        this.p += i;\r\n    }\r\n    end() {\r\n        return this.p >= this.N;\r\n    }\r\n    readTo(end) {\r\n        while (this.p < this.N) {\r\n            ++this.p;\r\n            if (this.rmatch(end))\r\n                return this.p;\r\n        }\r\n        return -1;\r\n    }\r\n    readValue() {\r\n        const value = this.readQuoted() || this.readRange();\r\n        if (value)\r\n            return value;\r\n        if (this.peek() === '[') {\r\n            this.p++;\r\n            const prop = this.readQuoted();\r\n            if (!prop)\r\n                return;\r\n            if (this.peek() !== ']')\r\n                return;\r\n            this.p++;\r\n            return new PropertyAccessToken(prop, [], this.p);\r\n        }\r\n        const variable = this.readIdentifier();\r\n        if (!variable.size())\r\n            return;\r\n        let isNumber = variable.isNumber(true);\r\n        const props = [];\r\n        while (true) {\r\n            if (this.peek() === '[') {\r\n                isNumber = false;\r\n                this.p++;\r\n                const prop = this.readValue() || new IdentifierToken(this.input, this.p, this.p, this.file);\r\n                this.readTo(']');\r\n                props.push(prop);\r\n            }\r\n            else if (this.peek() === '.' && this.peek(1) !== '.') { // skip range syntax\r\n                this.p++;\r\n                const prop = this.readIdentifier();\r\n                if (!prop.size())\r\n                    break;\r\n                if (!prop.isNumber())\r\n                    isNumber = false;\r\n                props.push(prop);\r\n            }\r\n            else\r\n                break;\r\n        }\r\n        if (!props.length && literalValues.hasOwnProperty(variable.content)) {\r\n            return new LiteralToken(this.input, variable.begin, variable.end, this.file);\r\n        }\r\n        if (isNumber)\r\n            return new NumberToken(variable, props[0]);\r\n        return new PropertyAccessToken(variable, props, this.p);\r\n    }\r\n    readRange() {\r\n        this.skipBlank();\r\n        const begin = this.p;\r\n        if (this.peek() !== '(')\r\n            return;\r\n        ++this.p;\r\n        const lhs = this.readValueOrThrow();\r\n        this.p += 2;\r\n        const rhs = this.readValueOrThrow();\r\n        ++this.p;\r\n        return new RangeToken(this.input, begin, this.p, lhs, rhs, this.file);\r\n    }\r\n    readValueOrThrow() {\r\n        const value = this.readValue();\r\n        assert(value, () => `unexpected token ${this.snapshot()}, value expected`);\r\n        return value;\r\n    }\r\n    readQuoted() {\r\n        this.skipBlank();\r\n        const begin = this.p;\r\n        if (!(this.peekType() & QUOTE))\r\n            return;\r\n        ++this.p;\r\n        let escaped = false;\r\n        while (this.p < this.N) {\r\n            ++this.p;\r\n            if (this.input[this.p - 1] === this.input[begin] && !escaped)\r\n                break;\r\n            if (escaped)\r\n                escaped = false;\r\n            else if (this.input[this.p - 1] === '\\\\')\r\n                escaped = true;\r\n        }\r\n        return new QuotedToken(this.input, begin, this.p, this.file);\r\n    }\r\n    *readFileNameTemplate(options) {\r\n        const { outputDelimiterLeft } = options;\r\n        const htmlStopStrings = [',', ' ', outputDelimiterLeft];\r\n        const htmlStopStringSet = new Set(htmlStopStrings);\r\n        // break on ',' and ' ', outputDelimiterLeft only stops HTML token\r\n        while (this.p < this.N && !htmlStopStringSet.has(this.peek())) {\r\n            yield this.match(outputDelimiterLeft)\r\n                ? this.readOutputToken(options)\r\n                : this.readHTMLToken(htmlStopStrings);\r\n        }\r\n    }\r\n    match(word) {\r\n        for (let i = 0; i < word.length; i++) {\r\n            if (word[i] !== this.input[this.p + i])\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    rmatch(pattern) {\r\n        for (let i = 0; i < pattern.length; i++) {\r\n            if (pattern[pattern.length - 1 - i] !== this.input[this.p - 1 - i])\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    peekType(n = 0) {\r\n        return TYPES[this.input.charCodeAt(this.p + n)];\r\n    }\r\n    peek(n = 0) {\r\n        return this.input[this.p + n];\r\n    }\r\n    skipBlank() {\r\n        while (this.peekType() & BLANK)\r\n            ++this.p;\r\n    }\r\n}\n\nclass TagToken extends DelimitedToken {\r\n    constructor(input, begin, end, options, file) {\r\n        const { trimTagLeft, trimTagRight, tagDelimiterLeft, tagDelimiterRight } = options;\r\n        const value = input.slice(begin + tagDelimiterLeft.length, end - tagDelimiterRight.length);\r\n        super(TokenKind.Tag, value, input, begin, end, trimTagLeft, trimTagRight, file);\r\n        const tokenizer = new Tokenizer(this.content, options.operatorsTrie);\r\n        this.name = tokenizer.readTagName();\r\n        if (!this.name)\r\n            throw new TokenizationError(`illegal tag syntax`, this);\r\n        tokenizer.skipBlank();\r\n        this.args = tokenizer.remaining();\r\n    }\r\n}\n\nclass ParseStream {\r\n    constructor(tokens, parseToken) {\r\n        this.handlers = {};\r\n        this.stopRequested = false;\r\n        this.tokens = tokens;\r\n        this.parseToken = parseToken;\r\n    }\r\n    on(name, cb) {\r\n        this.handlers[name] = cb;\r\n        return this;\r\n    }\r\n    trigger(event, arg) {\r\n        const h = this.handlers[event];\r\n        return h ? (h.call(this, arg), true) : false;\r\n    }\r\n    start() {\r\n        this.trigger('start');\r\n        let token;\r\n        while (!this.stopRequested && (token = this.tokens.shift())) {\r\n            if (this.trigger('token', token))\r\n                continue;\r\n            if (isTagToken(token) && this.trigger(`tag:${token.name}`, token)) {\r\n                continue;\r\n            }\r\n            const template = this.parseToken(token, this.tokens);\r\n            this.trigger('template', template);\r\n        }\r\n        if (!this.stopRequested)\r\n            this.trigger('end');\r\n        return this;\r\n    }\r\n    stop() {\r\n        this.stopRequested = true;\r\n        return this;\r\n    }\r\n}\n\n/**\r\n * Key-Value Pairs Representing Tag Arguments\r\n * Example:\r\n *    For the markup `, foo:'bar', coo:2 reversed %}`,\r\n *    hash['foo'] === 'bar'\r\n *    hash['coo'] === 2\r\n *    hash['reversed'] === undefined\r\n */\r\nclass Hash {\r\n    constructor(markup, jekyllStyle) {\r\n        this.hash = {};\r\n        const tokenizer = new Tokenizer(markup, {});\r\n        for (const hash of tokenizer.readHashes(jekyllStyle)) {\r\n            this.hash[hash.name.content] = hash.value;\r\n        }\r\n    }\r\n    *render(ctx) {\r\n        const hash = {};\r\n        for (const key of Object.keys(this.hash)) {\r\n            hash[key] = this.hash[key] === undefined ? true : yield _evalToken(this.hash[key], ctx);\r\n        }\r\n        return hash;\r\n    }\r\n}\n\nfunction isKeyValuePair(arr) {\r\n    return isArray(arr);\r\n}\n\nclass Filter {\r\n    constructor(name, impl, args, liquid) {\r\n        this.name = name;\r\n        this.impl = impl || identify;\r\n        this.args = args;\r\n        this.liquid = liquid;\r\n    }\r\n    *render(value, context) {\r\n        const argv = [];\r\n        for (const arg of this.args) {\r\n            if (isKeyValuePair(arg))\r\n                argv.push([arg[0], yield _evalToken(arg[1], context)]);\r\n            else\r\n                argv.push(yield _evalToken(arg, context));\r\n        }\r\n        return this.impl.apply({ context, liquid: this.liquid }, [value, ...argv]);\r\n    }\r\n}\n\nclass Value {\r\n    /**\r\n     * @param str the value to be valuated, eg.: \"foobar\" | truncate: 3\r\n     */\r\n    constructor(str, liquid) {\r\n        this.filters = [];\r\n        const tokenizer = new Tokenizer(str, liquid.options.operatorsTrie);\r\n        this.initial = tokenizer.readExpression();\r\n        this.filters = tokenizer.readFilters().map(({ name, args }) => new Filter(name, liquid.filters.get(name), args, liquid));\r\n    }\r\n    *value(ctx, lenient) {\r\n        lenient = lenient || (ctx.opts.lenientIf && this.filters.length > 0 && this.filters[0].name === 'default');\r\n        let val = yield this.initial.evaluate(ctx, lenient);\r\n        for (const filter of this.filters) {\r\n            val = yield filter.render(val, ctx);\r\n        }\r\n        return val;\r\n    }\r\n}\n\nvar assign = {\r\n    parse: function (token) {\r\n        const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\r\n        this.key = tokenizer.readIdentifier().content;\r\n        tokenizer.skipBlank();\r\n        assert(tokenizer.peek() === '=', () => `illegal token ${token.getText()}`);\r\n        tokenizer.advance();\r\n        this.value = new Value(tokenizer.remaining(), this.liquid);\r\n    },\r\n    render: function* (ctx) {\r\n        ctx.bottom()[this.key] = yield this.value.value(ctx, this.liquid.options.lenientIf);\r\n    }\r\n};\n\nclass ForloopDrop extends Drop {\r\n    constructor(length, collection, variable) {\r\n        super();\r\n        this.i = 0;\r\n        this.length = length;\r\n        this.name = `${variable}-${collection}`;\r\n    }\r\n    next() {\r\n        this.i++;\r\n    }\r\n    index0() {\r\n        return this.i;\r\n    }\r\n    index() {\r\n        return this.i + 1;\r\n    }\r\n    first() {\r\n        return this.i === 0;\r\n    }\r\n    last() {\r\n        return this.i === this.length - 1;\r\n    }\r\n    rindex() {\r\n        return this.length - this.i;\r\n    }\r\n    rindex0() {\r\n        return this.length - this.i - 1;\r\n    }\r\n    valueOf() {\r\n        return JSON.stringify(this);\r\n    }\r\n}\n\nconst MODIFIERS = ['offset', 'limit', 'reversed'];\r\nvar For = {\r\n    type: 'block',\r\n    parse: function (token, remainTokens) {\r\n        const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\r\n        const variable = tokenizer.readIdentifier();\r\n        const inStr = tokenizer.readIdentifier();\r\n        const collection = tokenizer.readValue();\r\n        assert(variable.size() && inStr.content === 'in' && collection, () => `illegal tag: ${token.getText()}`);\r\n        this.variable = variable.content;\r\n        this.collection = collection;\r\n        this.hash = new Hash(tokenizer.remaining());\r\n        this.templates = [];\r\n        this.elseTemplates = [];\r\n        let p;\r\n        const stream = this.liquid.parser.parseStream(remainTokens)\r\n            .on('start', () => (p = this.templates))\r\n            .on('tag:else', () => (p = this.elseTemplates))\r\n            .on('tag:endfor', () => stream.stop())\r\n            .on('template', (tpl) => p.push(tpl))\r\n            .on('end', () => {\r\n            throw new Error(`tag ${token.getText()} not closed`);\r\n        });\r\n        stream.start();\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const r = this.liquid.renderer;\r\n        let collection = toEnumerable(yield _evalToken(this.collection, ctx));\r\n        if (!collection.length) {\r\n            yield r.renderTemplates(this.elseTemplates, ctx, emitter);\r\n            return;\r\n        }\r\n        const continueKey = 'continue-' + this.variable + '-' + this.collection.getText();\r\n        ctx.push({ continue: ctx.getRegister(continueKey) });\r\n        const hash = yield this.hash.render(ctx);\r\n        ctx.pop();\r\n        const modifiers = this.liquid.options.orderedFilterParameters\r\n            ? Object.keys(hash).filter(x => MODIFIERS.includes(x))\r\n            : MODIFIERS.filter(x => hash[x] !== undefined);\r\n        collection = modifiers.reduce((collection, modifier) => {\r\n            if (modifier === 'offset')\r\n                return offset(collection, hash['offset']);\r\n            if (modifier === 'limit')\r\n                return limit(collection, hash['limit']);\r\n            return reversed(collection);\r\n        }, collection);\r\n        ctx.setRegister(continueKey, (hash['offset'] || 0) + collection.length);\r\n        const scope = { forloop: new ForloopDrop(collection.length, this.collection.getText(), this.variable) };\r\n        ctx.push(scope);\r\n        for (const item of collection) {\r\n            scope[this.variable] = item;\r\n            yield r.renderTemplates(this.templates, ctx, emitter);\r\n            if (emitter['break']) {\r\n                emitter['break'] = false;\r\n                break;\r\n            }\r\n            emitter['continue'] = false;\r\n            scope.forloop.next();\r\n        }\r\n        ctx.pop();\r\n    }\r\n};\r\nfunction reversed(arr) {\r\n    return [...arr].reverse();\r\n}\r\nfunction offset(arr, count) {\r\n    return arr.slice(count);\r\n}\r\nfunction limit(arr, count) {\r\n    return arr.slice(0, count);\r\n}\n\nvar capture = {\r\n    parse: function (tagToken, remainTokens) {\r\n        const tokenizer = new Tokenizer(tagToken.args, this.liquid.options.operatorsTrie);\r\n        this.variable = readVariableName(tokenizer);\r\n        assert(this.variable, () => `${tagToken.args} not valid identifier`);\r\n        this.templates = [];\r\n        const stream = this.liquid.parser.parseStream(remainTokens);\r\n        stream.on('tag:endcapture', () => stream.stop())\r\n            .on('template', (tpl) => this.templates.push(tpl))\r\n            .on('end', () => {\r\n            throw new Error(`tag ${tagToken.getText()} not closed`);\r\n        });\r\n        stream.start();\r\n    },\r\n    render: function* (ctx) {\r\n        const r = this.liquid.renderer;\r\n        const html = yield r.renderTemplates(this.templates, ctx);\r\n        ctx.bottom()[this.variable] = html;\r\n    }\r\n};\r\nfunction readVariableName(tokenizer) {\r\n    const word = tokenizer.readIdentifier().content;\r\n    if (word)\r\n        return word;\r\n    const quoted = tokenizer.readQuoted();\r\n    if (quoted)\r\n        return evalQuotedToken(quoted);\r\n}\n\nvar Case = {\r\n    parse: function (tagToken, remainTokens) {\r\n        this.cond = new Value(tagToken.args, this.liquid);\r\n        this.cases = [];\r\n        this.elseTemplates = [];\r\n        let p = [];\r\n        const stream = this.liquid.parser.parseStream(remainTokens)\r\n            .on('tag:when', (token) => {\r\n            p = [];\r\n            const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\r\n            while (!tokenizer.end()) {\r\n                const value = tokenizer.readValue();\r\n                this.cases.push({\r\n                    val: value,\r\n                    templates: p\r\n                });\r\n                tokenizer.readTo(',');\r\n            }\r\n        })\r\n            .on('tag:else', () => (p = this.elseTemplates))\r\n            .on('tag:endcase', () => stream.stop())\r\n            .on('template', (tpl) => p.push(tpl))\r\n            .on('end', () => {\r\n            throw new Error(`tag ${tagToken.getText()} not closed`);\r\n        });\r\n        stream.start();\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const r = this.liquid.renderer;\r\n        const cond = toValue(yield this.cond.value(ctx, ctx.opts.lenientIf));\r\n        for (const branch of this.cases) {\r\n            const val = yield _evalToken(branch.val, ctx, ctx.opts.lenientIf);\r\n            if (val === cond) {\r\n                yield r.renderTemplates(branch.templates, ctx, emitter);\r\n                return;\r\n            }\r\n        }\r\n        yield r.renderTemplates(this.elseTemplates, ctx, emitter);\r\n    }\r\n};\n\nvar comment = {\r\n    parse: function (tagToken, remainTokens) {\r\n        const stream = this.liquid.parser.parseStream(remainTokens);\r\n        stream\r\n            .on('token', (token) => {\r\n            if (token.name === 'endcomment')\r\n                stream.stop();\r\n        })\r\n            .on('end', () => {\r\n            throw new Error(`tag ${tagToken.getText()} not closed`);\r\n        });\r\n        stream.start();\r\n    }\r\n};\n\nvar BlockMode;\r\n(function (BlockMode) {\r\n    /* store rendered html into blocks */\r\n    BlockMode[BlockMode[\"OUTPUT\"] = 0] = \"OUTPUT\";\r\n    /* output rendered html directly */\r\n    BlockMode[BlockMode[\"STORE\"] = 1] = \"STORE\";\r\n})(BlockMode || (BlockMode = {}));\r\nvar BlockMode$1 = BlockMode;\n\nvar render = {\r\n    parseFilePath,\r\n    renderFilePath,\r\n    parse: function (token) {\r\n        const args = token.args;\r\n        const tokenizer = new Tokenizer(args, this.liquid.options.operatorsTrie);\r\n        this['file'] = this.parseFilePath(tokenizer, this.liquid);\r\n        this['currentFile'] = token.file;\r\n        while (!tokenizer.end()) {\r\n            tokenizer.skipBlank();\r\n            const begin = tokenizer.p;\r\n            const keyword = tokenizer.readIdentifier();\r\n            if (keyword.content === 'with' || keyword.content === 'for') {\r\n                tokenizer.skipBlank();\r\n                // can be normal key/value pair, like \"with: true\"\r\n                if (tokenizer.peek() !== ':') {\r\n                    const value = tokenizer.readValue();\r\n                    // can be normal key, like \"with,\"\r\n                    if (value) {\r\n                        const beforeAs = tokenizer.p;\r\n                        const asStr = tokenizer.readIdentifier();\r\n                        let alias;\r\n                        if (asStr.content === 'as')\r\n                            alias = tokenizer.readIdentifier();\r\n                        else\r\n                            tokenizer.p = beforeAs;\r\n                        this[keyword.content] = { value, alias: alias && alias.content };\r\n                        tokenizer.skipBlank();\r\n                        if (tokenizer.peek() === ',')\r\n                            tokenizer.advance();\r\n                        // matched!\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            /**\r\n             * restore cursor if with/for not matched\r\n             */\r\n            tokenizer.p = begin;\r\n            break;\r\n        }\r\n        this.hash = new Hash(tokenizer.remaining());\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const { liquid, hash } = this;\r\n        const filepath = yield this.renderFilePath(this['file'], ctx, liquid);\r\n        assert(filepath, () => `illegal filename \"${filepath}\"`);\r\n        const childCtx = new Context({}, ctx.opts, { sync: ctx.sync, globals: ctx.globals, strictVariables: ctx.strictVariables });\r\n        const scope = childCtx.bottom();\r\n        __assign(scope, yield hash.render(ctx));\r\n        if (this['with']) {\r\n            const { value, alias } = this['with'];\r\n            scope[alias || filepath] = yield _evalToken(value, ctx);\r\n        }\r\n        if (this['for']) {\r\n            const { value, alias } = this['for'];\r\n            let collection = yield _evalToken(value, ctx);\r\n            collection = toEnumerable(collection);\r\n            scope['forloop'] = new ForloopDrop(collection.length, value.getText(), alias);\r\n            for (const item of collection) {\r\n                scope[alias] = item;\r\n                const templates = yield liquid._parsePartialFile(filepath, childCtx.sync, this['currentFile']);\r\n                yield liquid.renderer.renderTemplates(templates, childCtx, emitter);\r\n                scope['forloop'].next();\r\n            }\r\n        }\r\n        else {\r\n            const templates = yield liquid._parsePartialFile(filepath, childCtx.sync, this['currentFile']);\r\n            yield liquid.renderer.renderTemplates(templates, childCtx, emitter);\r\n        }\r\n    }\r\n};\r\n/**\r\n * @return null for \"none\",\r\n * @return Template[] for quoted with tags and/or filters\r\n * @return Token for expression (not quoted)\r\n * @throws TypeError if cannot read next token\r\n */\r\nfunction parseFilePath(tokenizer, liquid) {\r\n    if (liquid.options.dynamicPartials) {\r\n        const file = tokenizer.readValue();\r\n        if (file === undefined)\r\n            throw new TypeError(`illegal argument \"${tokenizer.input}\"`);\r\n        if (file.getText() === 'none')\r\n            return null;\r\n        if (isQuotedToken(file)) {\r\n            // for filenames like \"files/{{file}}\", eval as liquid template\r\n            const templates = liquid.parse(evalQuotedToken(file));\r\n            return optimize(templates);\r\n        }\r\n        return file;\r\n    }\r\n    const tokens = [...tokenizer.readFileNameTemplate(liquid.options)];\r\n    const templates = optimize(liquid.parser.parseTokens(tokens));\r\n    return templates === 'none' ? null : templates;\r\n}\r\nfunction optimize(templates) {\r\n    // for filenames like \"files/file.liquid\", extract the string directly\r\n    if (templates.length === 1 && isHTMLToken(templates[0].token))\r\n        return templates[0].token.getContent();\r\n    return templates;\r\n}\r\nfunction* renderFilePath(file, ctx, liquid) {\r\n    if (typeof file === 'string')\r\n        return file;\r\n    if (Array.isArray(file))\r\n        return liquid.renderer.renderTemplates(file, ctx);\r\n    return yield _evalToken(file, ctx);\r\n}\n\nvar include = {\r\n    parseFilePath,\r\n    renderFilePath,\r\n    parse: function (token) {\r\n        const args = token.args;\r\n        const tokenizer = new Tokenizer(args, this.liquid.options.operatorsTrie);\r\n        this['file'] = this.parseFilePath(tokenizer, this.liquid);\r\n        this['currentFile'] = token.file;\r\n        const begin = tokenizer.p;\r\n        const withStr = tokenizer.readIdentifier();\r\n        if (withStr.content === 'with') {\r\n            tokenizer.skipBlank();\r\n            if (tokenizer.peek() !== ':') {\r\n                this.withVar = tokenizer.readValue();\r\n            }\r\n            else\r\n                tokenizer.p = begin;\r\n        }\r\n        else\r\n            tokenizer.p = begin;\r\n        this.hash = new Hash(tokenizer.remaining(), this.liquid.options.jekyllInclude);\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const { liquid, hash, withVar } = this;\r\n        const { renderer } = liquid;\r\n        const filepath = yield this.renderFilePath(this['file'], ctx, liquid);\r\n        assert(filepath, () => `illegal filename \"${filepath}\"`);\r\n        const saved = ctx.saveRegister('blocks', 'blockMode');\r\n        ctx.setRegister('blocks', {});\r\n        ctx.setRegister('blockMode', BlockMode$1.OUTPUT);\r\n        const scope = yield hash.render(ctx);\r\n        if (withVar)\r\n            scope[filepath] = yield _evalToken(withVar, ctx);\r\n        const templates = yield liquid._parsePartialFile(filepath, ctx.sync, this['currentFile']);\r\n        ctx.push(ctx.opts.jekyllInclude ? { include: scope } : scope);\r\n        yield renderer.renderTemplates(templates, ctx, emitter);\r\n        ctx.pop();\r\n        ctx.restoreRegister(saved);\r\n    }\r\n};\n\nvar decrement = {\r\n    parse: function (token) {\r\n        const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\r\n        this.variable = tokenizer.readIdentifier().content;\r\n    },\r\n    render: function (context, emitter) {\r\n        const scope = context.environments;\r\n        if (!isNumber(scope[this.variable])) {\r\n            scope[this.variable] = 0;\r\n        }\r\n        emitter.write(stringify(--scope[this.variable]));\r\n    }\r\n};\n\nvar cycle = {\r\n    parse: function (tagToken) {\r\n        const tokenizer = new Tokenizer(tagToken.args, this.liquid.options.operatorsTrie);\r\n        const group = tokenizer.readValue();\r\n        tokenizer.skipBlank();\r\n        this.candidates = [];\r\n        if (group) {\r\n            if (tokenizer.peek() === ':') {\r\n                this.group = group;\r\n                tokenizer.advance();\r\n            }\r\n            else\r\n                this.candidates.push(group);\r\n        }\r\n        while (!tokenizer.end()) {\r\n            const value = tokenizer.readValue();\r\n            if (value)\r\n                this.candidates.push(value);\r\n            tokenizer.readTo(',');\r\n        }\r\n        assert(this.candidates.length, () => `empty candidates: ${tagToken.getText()}`);\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const group = yield _evalToken(this.group, ctx);\r\n        const fingerprint = `cycle:${group}:` + this.candidates.join(',');\r\n        const groups = ctx.getRegister('cycle');\r\n        let idx = groups[fingerprint];\r\n        if (idx === undefined) {\r\n            idx = groups[fingerprint] = 0;\r\n        }\r\n        const candidate = this.candidates[idx];\r\n        idx = (idx + 1) % this.candidates.length;\r\n        groups[fingerprint] = idx;\r\n        const html = yield _evalToken(candidate, ctx);\r\n        emitter.write(html);\r\n    }\r\n};\n\nvar If = {\r\n    parse: function (tagToken, remainTokens) {\r\n        this.branches = [];\r\n        this.elseTemplates = [];\r\n        let p;\r\n        this.liquid.parser.parseStream(remainTokens)\r\n            .on('start', () => this.branches.push({\r\n            predicate: new Value(tagToken.args, this.liquid),\r\n            templates: (p = [])\r\n        }))\r\n            .on('tag:elsif', (token) => this.branches.push({\r\n            predicate: new Value(token.args, this.liquid),\r\n            templates: (p = [])\r\n        }))\r\n            .on('tag:else', () => (p = this.elseTemplates))\r\n            .on('tag:endif', function () { this.stop(); })\r\n            .on('template', (tpl) => p.push(tpl))\r\n            .on('end', () => { throw new Error(`tag ${tagToken.getText()} not closed`); })\r\n            .start();\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const r = this.liquid.renderer;\r\n        for (const { predicate, templates } of this.branches) {\r\n            const value = yield predicate.value(ctx, ctx.opts.lenientIf);\r\n            if (isTruthy(value, ctx)) {\r\n                yield r.renderTemplates(templates, ctx, emitter);\r\n                return;\r\n            }\r\n        }\r\n        yield r.renderTemplates(this.elseTemplates, ctx, emitter);\r\n    }\r\n};\n\nvar increment = {\r\n    parse: function (token) {\r\n        const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\r\n        this.variable = tokenizer.readIdentifier().content;\r\n    },\r\n    render: function (context, emitter) {\r\n        const scope = context.environments;\r\n        if (!isNumber(scope[this.variable])) {\r\n            scope[this.variable] = 0;\r\n        }\r\n        const val = scope[this.variable];\r\n        scope[this.variable]++;\r\n        emitter.write(stringify(val));\r\n    }\r\n};\n\nvar layout = {\r\n    parseFilePath,\r\n    renderFilePath,\r\n    parse: function (token, remainTokens) {\r\n        const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\r\n        this['file'] = this.parseFilePath(tokenizer, this.liquid);\r\n        this['currentFile'] = token.file;\r\n        this.hash = new Hash(tokenizer.remaining());\r\n        this.tpls = this.liquid.parser.parseTokens(remainTokens);\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const { liquid, hash, file } = this;\r\n        const { renderer } = liquid;\r\n        if (file === null) {\r\n            ctx.setRegister('blockMode', BlockMode$1.OUTPUT);\r\n            yield renderer.renderTemplates(this.tpls, ctx, emitter);\r\n            return;\r\n        }\r\n        const filepath = yield this.renderFilePath(this['file'], ctx, liquid);\r\n        assert(filepath, () => `illegal filename \"${filepath}\"`);\r\n        const templates = yield liquid._parseLayoutFile(filepath, ctx.sync, this['currentFile']);\r\n        // render remaining contents and store rendered results\r\n        ctx.setRegister('blockMode', BlockMode$1.STORE);\r\n        const html = yield renderer.renderTemplates(this.tpls, ctx);\r\n        const blocks = ctx.getRegister('blocks');\r\n        // set whole content to anonymous block if anonymous doesn't specified\r\n        if (blocks[''] === undefined)\r\n            blocks[''] = (parent, emitter) => emitter.write(html);\r\n        ctx.setRegister('blockMode', BlockMode$1.OUTPUT);\r\n        // render the layout file use stored blocks\r\n        ctx.push(yield hash.render(ctx));\r\n        yield renderer.renderTemplates(templates, ctx, emitter);\r\n        ctx.pop();\r\n    }\r\n};\n\nclass BlockDrop extends Drop {\r\n    constructor(\r\n    // the block render from layout template\r\n    superBlockRender = () => '') {\r\n        super();\r\n        this.superBlockRender = superBlockRender;\r\n    }\r\n    /**\r\n     * Provide parent access in child block by\r\n     * {{ block.super }}\r\n     */\r\n    super() {\r\n        return this.superBlockRender();\r\n    }\r\n}\n\nvar block = {\r\n    parse(token, remainTokens) {\r\n        const match = /\\w+/.exec(token.args);\r\n        this.block = match ? match[0] : '';\r\n        this.tpls = [];\r\n        this.liquid.parser.parseStream(remainTokens)\r\n            .on('tag:endblock', function () { this.stop(); })\r\n            .on('template', (tpl) => this.tpls.push(tpl))\r\n            .on('end', () => { throw new Error(`tag ${token.getText()} not closed`); })\r\n            .start();\r\n    },\r\n    *render(ctx, emitter) {\r\n        const blockRender = this.getBlockRender(ctx);\r\n        if (ctx.getRegister('blockMode') === BlockMode$1.STORE) {\r\n            ctx.getRegister('blocks')[this.block] = blockRender;\r\n        }\r\n        else {\r\n            yield blockRender(new BlockDrop(), emitter);\r\n        }\r\n    },\r\n    getBlockRender(ctx) {\r\n        const { liquid, tpls } = this;\r\n        const renderChild = ctx.getRegister('blocks')[this.block];\r\n        const renderCurrent = function* (superBlock, emitter) {\r\n            // add {{ block.super }} support when rendering\r\n            ctx.push({ block: superBlock });\r\n            yield liquid.renderer.renderTemplates(tpls, ctx, emitter);\r\n            ctx.pop();\r\n        };\r\n        return renderChild\r\n            ? (superBlock, emitter) => renderChild(new BlockDrop(() => renderCurrent(superBlock, emitter)), emitter)\r\n            : renderCurrent;\r\n    }\r\n};\n\nvar raw = {\r\n    parse: function (tagToken, remainTokens) {\r\n        this.tokens = [];\r\n        const stream = this.liquid.parser.parseStream(remainTokens);\r\n        stream\r\n            .on('token', (token) => {\r\n            if (token.name === 'endraw')\r\n                stream.stop();\r\n            else\r\n                this.tokens.push(token);\r\n        })\r\n            .on('end', () => {\r\n            throw new Error(`tag ${tagToken.getText()} not closed`);\r\n        });\r\n        stream.start();\r\n    },\r\n    render: function () {\r\n        return this.tokens.map((token) => token.getText()).join('');\r\n    }\r\n};\n\nclass TablerowloopDrop extends ForloopDrop {\r\n    constructor(length, cols, collection, variable) {\r\n        super(length, collection, variable);\r\n        this.length = length;\r\n        this.cols = cols;\r\n    }\r\n    row() {\r\n        return Math.floor(this.i / this.cols) + 1;\r\n    }\r\n    col0() {\r\n        return (this.i % this.cols);\r\n    }\r\n    col() {\r\n        return this.col0() + 1;\r\n    }\r\n    col_first() {\r\n        return this.col0() === 0;\r\n    }\r\n    col_last() {\r\n        return this.col() === this.cols;\r\n    }\r\n}\n\nvar tablerow = {\r\n    parse: function (tagToken, remainTokens) {\r\n        const tokenizer = new Tokenizer(tagToken.args, this.liquid.options.operatorsTrie);\r\n        const variable = tokenizer.readIdentifier();\r\n        tokenizer.skipBlank();\r\n        const tmp = tokenizer.readIdentifier();\r\n        assert(tmp && tmp.content === 'in', () => `illegal tag: ${tagToken.getText()}`);\r\n        this.variable = variable.content;\r\n        this.collection = tokenizer.readValue();\r\n        this.hash = new Hash(tokenizer.remaining());\r\n        this.templates = [];\r\n        let p;\r\n        const stream = this.liquid.parser.parseStream(remainTokens)\r\n            .on('start', () => (p = this.templates))\r\n            .on('tag:endtablerow', () => stream.stop())\r\n            .on('template', (tpl) => p.push(tpl))\r\n            .on('end', () => {\r\n            throw new Error(`tag ${tagToken.getText()} not closed`);\r\n        });\r\n        stream.start();\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        let collection = toEnumerable(yield _evalToken(this.collection, ctx));\r\n        const hash = yield this.hash.render(ctx);\r\n        const offset = hash.offset || 0;\r\n        const limit = (hash.limit === undefined) ? collection.length : hash.limit;\r\n        collection = collection.slice(offset, offset + limit);\r\n        const cols = hash.cols || collection.length;\r\n        const r = this.liquid.renderer;\r\n        const tablerowloop = new TablerowloopDrop(collection.length, cols, this.collection.getText(), this.variable);\r\n        const scope = { tablerowloop };\r\n        ctx.push(scope);\r\n        for (let idx = 0; idx < collection.length; idx++, tablerowloop.next()) {\r\n            scope[this.variable] = collection[idx];\r\n            if (tablerowloop.col0() === 0) {\r\n                if (tablerowloop.row() !== 1)\r\n                    emitter.write('</tr>');\r\n                emitter.write(`<tr class=\"row${tablerowloop.row()}\">`);\r\n            }\r\n            emitter.write(`<td class=\"col${tablerowloop.col()}\">`);\r\n            yield r.renderTemplates(this.templates, ctx, emitter);\r\n            emitter.write('</td>');\r\n        }\r\n        if (collection.length)\r\n            emitter.write('</tr>');\r\n        ctx.pop();\r\n    }\r\n};\n\nvar unless = {\r\n    parse: function (tagToken, remainTokens) {\r\n        this.branches = [];\r\n        this.elseTemplates = [];\r\n        let p;\r\n        this.liquid.parser.parseStream(remainTokens)\r\n            .on('start', () => this.branches.push({\r\n            predicate: new Value(tagToken.args, this.liquid),\r\n            test: isFalsy,\r\n            templates: (p = [])\r\n        }))\r\n            .on('tag:elsif', (token) => this.branches.push({\r\n            predicate: new Value(token.args, this.liquid),\r\n            test: isTruthy,\r\n            templates: (p = [])\r\n        }))\r\n            .on('tag:else', () => (p = this.elseTemplates))\r\n            .on('tag:endunless', function () { this.stop(); })\r\n            .on('template', (tpl) => p.push(tpl))\r\n            .on('end', () => { throw new Error(`tag ${tagToken.getText()} not closed`); })\r\n            .start();\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const r = this.liquid.renderer;\r\n        for (const { predicate, test, templates } of this.branches) {\r\n            const value = yield predicate.value(ctx, ctx.opts.lenientIf);\r\n            if (test(value, ctx)) {\r\n                yield r.renderTemplates(templates, ctx, emitter);\r\n                return;\r\n            }\r\n        }\r\n        yield r.renderTemplates(this.elseTemplates, ctx, emitter);\r\n    }\r\n};\n\nvar Break = {\r\n    render: function (ctx, emitter) {\r\n        emitter['break'] = true;\r\n    }\r\n};\n\nvar Continue = {\r\n    render: function (ctx, emitter) {\r\n        emitter['continue'] = true;\r\n    }\r\n};\n\nvar echo = {\r\n    parse: function (token) {\r\n        this.value = new Value(token.args, this.liquid);\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        const val = yield this.value.value(ctx, false);\r\n        emitter.write(val);\r\n    }\r\n};\n\nvar liquid = {\r\n    parse: function (token) {\r\n        const tokenizer = new Tokenizer(token.args, this.liquid.options.operatorsTrie);\r\n        const tokens = tokenizer.readLiquidTagTokens(this.liquid.options);\r\n        this.tpls = this.liquid.parser.parseTokens(tokens);\r\n    },\r\n    render: function* (ctx, emitter) {\r\n        yield this.liquid.renderer.renderTemplates(this.tpls, ctx, emitter);\r\n    }\r\n};\n\nvar inlineComment = {\r\n    parse: function (tagToken, remainTokens) {\r\n        if (tagToken.args.search(/\\n\\s*[^#\\s]/g) !== -1) {\r\n            throw new Error('every line of an inline comment must start with a \\'#\\' character');\r\n        }\r\n    }\r\n};\n\nconst tags = {\r\n    assign, 'for': For, capture, 'case': Case, comment, include, render, decrement, increment, cycle, 'if': If, layout, block, raw, tablerow, unless, 'break': Break, 'continue': Continue, echo, liquid, '#': inlineComment\r\n};\n\nvar index = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    'default': tags\n});\n\nconst filters = new Map();\r\nforOwn(builtinFilters, (conf, name) => {\r\n    filters.set(snakeCase(name), conf);\r\n});\r\nconst defaultOptions = {\r\n    root: ['.'],\r\n    layouts: ['.'],\r\n    partials: ['.'],\r\n    relativeReference: true,\r\n    jekyllInclude: false,\r\n    cache: undefined,\r\n    extname: '',\r\n    fs: fs,\r\n    dynamicPartials: true,\r\n    jsTruthy: false,\r\n    trimTagRight: false,\r\n    trimTagLeft: false,\r\n    trimOutputRight: false,\r\n    trimOutputLeft: false,\r\n    greedy: true,\r\n    tagDelimiterLeft: '{%',\r\n    tagDelimiterRight: '%}',\r\n    outputDelimiterLeft: '{{',\r\n    outputDelimiterRight: '}}',\r\n    preserveTimezones: false,\r\n    strictFilters: false,\r\n    strictVariables: false,\r\n    ownPropertyOnly: false,\r\n    lenientIf: false,\r\n    globals: {},\r\n    keepOutputType: false,\r\n    operators: defaultOperators,\r\n    operatorsTrie: createTrie(defaultOperators)\r\n};\r\nfunction normalize(options) {\r\n    if (options.hasOwnProperty('operators')) {\r\n        options.operatorsTrie = createTrie(options.operators);\r\n    }\r\n    if (options.hasOwnProperty('root')) {\r\n        if (!options.hasOwnProperty('partials'))\r\n            options.partials = options.root;\r\n        if (!options.hasOwnProperty('layouts'))\r\n            options.layouts = options.root;\r\n    }\r\n    if (options.hasOwnProperty('cache')) {\r\n        let cache;\r\n        if (typeof options.cache === 'number')\r\n            cache = options.cache > 0 ? new LRU(options.cache) : undefined;\r\n        else if (typeof options.cache === 'object')\r\n            cache = options.cache;\r\n        else\r\n            cache = options.cache ? new LRU(1024) : undefined;\r\n        options.cache = cache;\r\n    }\r\n    options = Object.assign(Object.assign(Object.assign({}, defaultOptions), (options.jekyllInclude ? { dynamicPartials: false } : {})), options);\r\n    if (!options.fs.dirname && options.relativeReference) {\r\n        console.warn('[LiquidJS] `fs.dirname` is required for relativeReference, set relativeReference to `false` to suppress this warning, or provide implementation for `fs.dirname`');\r\n        options.relativeReference = false;\r\n    }\r\n    options.root = normalizeDirectoryList(options.root);\r\n    options.partials = normalizeDirectoryList(options.partials);\r\n    options.layouts = normalizeDirectoryList(options.layouts);\r\n    options.outputEscape = options.outputEscape && getOutputEscapeFunction(options.outputEscape);\r\n    return options;\r\n}\r\nfunction getOutputEscapeFunction(nameOrFunction) {\r\n    if (isString(nameOrFunction)) {\r\n        const filterImpl = filters.get(nameOrFunction);\r\n        assert(isFunction(filterImpl), `filter \"${nameOrFunction}\" not found`);\r\n        return filterImpl;\r\n    }\r\n    else {\r\n        assert(isFunction(nameOrFunction), '`outputEscape` need to be of type string or function');\r\n        return nameOrFunction;\r\n    }\r\n}\r\nfunction normalizeDirectoryList(value) {\r\n    let list = [];\r\n    if (isArray(value))\r\n        list = value;\r\n    if (isString(value))\r\n        list = [value];\r\n    return list;\r\n}\n\nclass Context {\r\n    constructor(env = {}, opts = defaultOptions, renderOptions = {}) {\r\n        var _a, _b;\r\n        /**\r\n         * insert a Context-level empty scope,\r\n         * for tags like `{% capture %}` `{% assign %}` to operate\r\n         */\r\n        this.scopes = [{}];\r\n        this.registers = {};\r\n        this.sync = !!renderOptions.sync;\r\n        this.opts = opts;\r\n        this.globals = (_a = renderOptions.globals) !== null && _a !== void 0 ? _a : opts.globals;\r\n        this.environments = env;\r\n        this.strictVariables = (_b = renderOptions.strictVariables) !== null && _b !== void 0 ? _b : this.opts.strictVariables;\r\n    }\r\n    getRegister(key) {\r\n        return (this.registers[key] = this.registers[key] || {});\r\n    }\r\n    setRegister(key, value) {\r\n        return (this.registers[key] = value);\r\n    }\r\n    saveRegister(...keys) {\r\n        return keys.map(key => [key, this.getRegister(key)]);\r\n    }\r\n    restoreRegister(keyValues) {\r\n        return keyValues.forEach(([key, value]) => this.setRegister(key, value));\r\n    }\r\n    getAll() {\r\n        return [this.globals, this.environments, ...this.scopes]\r\n            .reduce((ctx, val) => __assign(ctx, val), {});\r\n    }\r\n    /**\r\n     * @deprecated use `_get()` instead\r\n     */\r\n    get(paths) {\r\n        return toValueSync(this._get(paths));\r\n    }\r\n    *_get(paths) {\r\n        const scope = this.findScope(paths[0]);\r\n        return yield this._getFromScope(scope, paths);\r\n    }\r\n    /**\r\n     * @deprecated use `_get()` instead\r\n     */\r\n    getFromScope(scope, paths) {\r\n        return toValueSync(this._getFromScope(scope, paths));\r\n    }\r\n    *_getFromScope(scope, paths) {\r\n        if (isString(paths))\r\n            paths = paths.split('.');\r\n        for (let i = 0; i < paths.length; i++) {\r\n            scope = yield readProperty(scope, paths[i], this.opts.ownPropertyOnly);\r\n            if (isNil(scope) && this.strictVariables) {\r\n                throw new InternalUndefinedVariableError(paths.slice(0, i + 1).join('.'));\r\n            }\r\n        }\r\n        return scope;\r\n    }\r\n    push(ctx) {\r\n        return this.scopes.push(ctx);\r\n    }\r\n    pop() {\r\n        return this.scopes.pop();\r\n    }\r\n    bottom() {\r\n        return this.scopes[0];\r\n    }\r\n    findScope(key) {\r\n        for (let i = this.scopes.length - 1; i >= 0; i--) {\r\n            const candidate = this.scopes[i];\r\n            if (key in candidate)\r\n                return candidate;\r\n        }\r\n        if (key in this.environments)\r\n            return this.environments;\r\n        return this.globals;\r\n    }\r\n}\r\nfunction readProperty(obj, key, ownPropertyOnly) {\r\n    if (isNil(obj))\r\n        return obj;\r\n    obj = toLiquid(obj);\r\n    if (isArray(obj) && key < 0)\r\n        return obj[obj.length + +key];\r\n    const jsProperty = readJSProperty(obj, key, ownPropertyOnly);\r\n    if (jsProperty === undefined && obj instanceof Drop)\r\n        return obj.liquidMethodMissing(key);\r\n    if (isFunction(jsProperty))\r\n        return jsProperty.call(obj);\r\n    if (key === 'size')\r\n        return readSize(obj);\r\n    else if (key === 'first')\r\n        return readFirst(obj);\r\n    else if (key === 'last')\r\n        return readLast(obj);\r\n    return jsProperty;\r\n}\r\nfunction readJSProperty(obj, key, ownPropertyOnly) {\r\n    if (ownPropertyOnly && !Object.hasOwnProperty.call(obj, key))\r\n        return undefined;\r\n    return obj[key];\r\n}\r\nfunction readFirst(obj) {\r\n    if (isArray(obj))\r\n        return obj[0];\r\n    return obj['first'];\r\n}\r\nfunction readLast(obj) {\r\n    if (isArray(obj))\r\n        return obj[obj.length - 1];\r\n    return obj['last'];\r\n}\r\nfunction readSize(obj) {\r\n    if (obj.hasOwnProperty('size') || obj['size'] !== undefined)\r\n        return obj['size'];\r\n    if (isArray(obj) || isString(obj))\r\n        return obj.length;\r\n    if (typeof obj === 'object')\r\n        return Object.keys(obj).length;\r\n}\n\nvar LookupType;\r\n(function (LookupType) {\r\n    LookupType[\"Partials\"] = \"partials\";\r\n    LookupType[\"Layouts\"] = \"layouts\";\r\n    LookupType[\"Root\"] = \"root\";\r\n})(LookupType || (LookupType = {}));\r\nclass Loader {\r\n    constructor(options) {\r\n        this.options = options;\r\n        if (options.relativeReference) {\r\n            const sep = options.fs.sep;\r\n            assert(sep, '`fs.sep` is required for relative reference');\r\n            const rRelativePath = new RegExp(['.' + sep, '..' + sep, './', '../'].map(prefix => escapeRegex(prefix)).join('|'));\r\n            this.shouldLoadRelative = (referencedFile) => rRelativePath.test(referencedFile);\r\n        }\r\n        else {\r\n            this.shouldLoadRelative = (referencedFile) => false;\r\n        }\r\n        this.contains = this.options.fs.contains || (() => true);\r\n    }\r\n    *lookup(file, type, sync, currentFile) {\r\n        const { fs } = this.options;\r\n        const dirs = this.options[type];\r\n        for (const filepath of this.candidates(file, dirs, currentFile, type !== LookupType.Root)) {\r\n            if (sync ? fs.existsSync(filepath) : yield fs.exists(filepath))\r\n                return filepath;\r\n        }\r\n        throw this.lookupError(file, dirs);\r\n    }\r\n    *candidates(file, dirs, currentFile, enforceRoot) {\r\n        const { fs, extname } = this.options;\r\n        if (this.shouldLoadRelative(file) && currentFile) {\r\n            const referenced = fs.resolve(this.dirname(currentFile), file, extname);\r\n            for (const dir of dirs) {\r\n                if (!enforceRoot || this.contains(dir, referenced)) {\r\n                    // the relatively referenced file is within one of root dirs\r\n                    yield referenced;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        for (const dir of dirs) {\r\n            const referenced = fs.resolve(dir, file, extname);\r\n            if (!enforceRoot || this.contains(dir, referenced)) {\r\n                yield referenced;\r\n            }\r\n        }\r\n        if (fs.fallback !== undefined) {\r\n            const filepath = fs.fallback(file);\r\n            if (filepath !== undefined)\r\n                yield filepath;\r\n        }\r\n    }\r\n    dirname(path) {\r\n        const fs = this.options.fs;\r\n        assert(fs.dirname, '`fs.dirname` is required for relative reference');\r\n        return fs.dirname(path);\r\n    }\r\n    lookupError(file, roots) {\r\n        const err = new Error('ENOENT');\r\n        err.message = `ENOENT: Failed to lookup \"${file}\" in \"${roots}\"`;\r\n        err.code = 'ENOENT';\r\n        return err;\r\n    }\r\n}\n\nclass SimpleEmitter {\r\n    constructor() {\r\n        this.buffer = '';\r\n    }\r\n    write(html) {\r\n        this.buffer += stringify(html);\r\n    }\r\n}\n\nclass StreamedEmitter {\r\n    constructor() {\r\n        this.buffer = '';\r\n        this.stream = null;\r\n        throw new Error('streaming not supported in browser');\r\n    }\r\n}\n\nclass KeepingTypeEmitter {\r\n    constructor() {\r\n        this.buffer = '';\r\n    }\r\n    write(html) {\r\n        html = toValue(html);\r\n        // This will only preserve the type if the value is isolated.\r\n        // I.E:\r\n        // {{ my-port }} -> 42\r\n        // {{ my-host }}:{{ my-port }} -> 'host:42'\r\n        if (typeof html !== 'string' && this.buffer === '') {\r\n            this.buffer = html;\r\n        }\r\n        else {\r\n            this.buffer = stringify(this.buffer) + stringify(html);\r\n        }\r\n    }\r\n}\n\nclass Render {\r\n    renderTemplatesToNodeStream(templates, ctx) {\r\n        const emitter = new StreamedEmitter();\r\n        Promise.resolve().then(() => toPromise(this.renderTemplates(templates, ctx, emitter)))\r\n            .then(() => emitter.end(), err => emitter.error(err));\r\n        return emitter.stream;\r\n    }\r\n    *renderTemplates(templates, ctx, emitter) {\r\n        if (!emitter) {\r\n            emitter = ctx.opts.keepOutputType ? new KeepingTypeEmitter() : new SimpleEmitter();\r\n        }\r\n        for (const tpl of templates) {\r\n            try {\r\n                // if tpl.render supports emitter, it'll return empty `html`\r\n                const html = yield tpl.render(ctx, emitter);\r\n                // if not, it'll return an `html`, write to the emitter for it\r\n                html && emitter.write(html);\r\n                if (emitter['break'] || emitter['continue'])\r\n                    break;\r\n            }\r\n            catch (e) {\r\n                const err = RenderError.is(e) ? e : new RenderError(e, tpl);\r\n                throw err;\r\n            }\r\n        }\r\n        return emitter.buffer;\r\n    }\r\n}\n\nclass TemplateImpl {\r\n    constructor(token) {\r\n        this.token = token;\r\n    }\r\n}\n\nclass Tag extends TemplateImpl {\r\n    constructor(token, tokens, liquid) {\r\n        super(token);\r\n        this.name = token.name;\r\n        const impl = liquid.tags.get(token.name);\r\n        this.impl = Object.create(impl);\r\n        this.impl.liquid = liquid;\r\n        if (this.impl.parse) {\r\n            this.impl.parse(token, tokens);\r\n        }\r\n    }\r\n    *render(ctx, emitter) {\r\n        const hash = (yield new Hash(this.token.args).render(ctx));\r\n        const impl = this.impl;\r\n        if (isFunction(impl.render))\r\n            return yield impl.render(ctx, emitter, hash);\r\n    }\r\n}\n\nclass Output extends TemplateImpl {\r\n    constructor(token, liquid) {\r\n        super(token);\r\n        this.value = new Value(token.content, liquid);\r\n        const filters = this.value.filters;\r\n        const outputEscape = liquid.options.outputEscape;\r\n        if (filters.length && filters[filters.length - 1].name === 'raw') {\r\n            filters.pop();\r\n        }\r\n        else if (outputEscape) {\r\n            filters.push(new Filter(toString.call(outputEscape), outputEscape, [], liquid));\r\n        }\r\n    }\r\n    *render(ctx, emitter) {\r\n        const val = yield this.value.value(ctx, false);\r\n        emitter.write(val);\r\n    }\r\n}\n\nclass HTML extends TemplateImpl {\r\n    constructor(token) {\r\n        super(token);\r\n        this.str = token.getContent();\r\n    }\r\n    *render(ctx, emitter) {\r\n        emitter.write(this.str);\r\n    }\r\n}\n\nclass Parser {\r\n    constructor(liquid) {\r\n        this.liquid = liquid;\r\n        this.cache = this.liquid.options.cache;\r\n        this.fs = this.liquid.options.fs;\r\n        this.parseFile = this.cache ? this._parseFileCached : this._parseFile;\r\n        this.loader = new Loader(this.liquid.options);\r\n    }\r\n    parse(html, filepath) {\r\n        const tokenizer = new Tokenizer(html, this.liquid.options.operatorsTrie, filepath);\r\n        const tokens = tokenizer.readTopLevelTokens(this.liquid.options);\r\n        return this.parseTokens(tokens);\r\n    }\r\n    parseTokens(tokens) {\r\n        let token;\r\n        const templates = [];\r\n        while ((token = tokens.shift())) {\r\n            templates.push(this.parseToken(token, tokens));\r\n        }\r\n        return templates;\r\n    }\r\n    parseToken(token, remainTokens) {\r\n        try {\r\n            if (isTagToken(token)) {\r\n                return new Tag(token, remainTokens, this.liquid);\r\n            }\r\n            if (isOutputToken(token)) {\r\n                return new Output(token, this.liquid);\r\n            }\r\n            return new HTML(token);\r\n        }\r\n        catch (e) {\r\n            throw new ParseError(e, token);\r\n        }\r\n    }\r\n    parseStream(tokens) {\r\n        return new ParseStream(tokens, (token, tokens) => this.parseToken(token, tokens));\r\n    }\r\n    *_parseFileCached(file, sync, type = LookupType.Root, currentFile) {\r\n        const cache = this.cache;\r\n        const key = this.loader.shouldLoadRelative(file) ? currentFile + ',' + file : type + ':' + file;\r\n        const tpls = yield cache.read(key);\r\n        if (tpls)\r\n            return tpls;\r\n        const task = this._parseFile(file, sync, type, currentFile);\r\n        // sync mode: exec the task and cache the result\r\n        // async mode: cache the task before exec\r\n        const taskOrTpl = sync ? yield task : toPromise(task);\r\n        cache.write(key, taskOrTpl);\r\n        // note: concurrent tasks will be reused, cache for failed task is removed until its end\r\n        try {\r\n            return yield taskOrTpl;\r\n        }\r\n        catch (err) {\r\n            cache.remove(key);\r\n            throw err;\r\n        }\r\n    }\r\n    *_parseFile(file, sync, type = LookupType.Root, currentFile) {\r\n        const filepath = yield this.loader.lookup(file, type, sync, currentFile);\r\n        return this.liquid.parse(sync ? this.fs.readFileSync(filepath) : yield this.fs.readFile(filepath), filepath);\r\n    }\r\n}\n\nclass TagMap {\r\n    constructor() {\r\n        this.impls = {};\r\n    }\r\n    get(name) {\r\n        const impl = this.impls[name];\r\n        assert(impl, () => `tag \"${name}\" not found`);\r\n        return impl;\r\n    }\r\n    set(name, impl) {\r\n        this.impls[name] = impl;\r\n    }\r\n}\n\nclass FilterMap {\r\n    constructor(strictFilters, liquid) {\r\n        this.strictFilters = strictFilters;\r\n        this.liquid = liquid;\r\n        this.impls = {};\r\n    }\r\n    get(name) {\r\n        const impl = this.impls[name];\r\n        assert(impl || !this.strictFilters, () => `undefined filter: ${name}`);\r\n        return impl;\r\n    }\r\n    set(name, impl) {\r\n        this.impls[name] = impl;\r\n    }\r\n    create(name, args) {\r\n        return new Filter(name, this.get(name), args, this.liquid);\r\n    }\r\n}\n\nconst version = '9.43.0';\r\nclass Liquid {\r\n    constructor(opts = {}) {\r\n        this.options = normalize(opts);\r\n        this.parser = new Parser(this);\r\n        this.renderer = new Render();\r\n        this.filters = new FilterMap(this.options.strictFilters, this);\r\n        this.tags = new TagMap();\r\n        forOwn(tags, (conf, name) => this.registerTag(snakeCase(name), conf));\r\n        forOwn(builtinFilters, (handler, name) => this.registerFilter(snakeCase(name), handler));\r\n    }\r\n    parse(html, filepath) {\r\n        return this.parser.parse(html, filepath);\r\n    }\r\n    _render(tpl, scope, renderOptions) {\r\n        const ctx = new Context(scope, this.options, renderOptions);\r\n        return this.renderer.renderTemplates(tpl, ctx);\r\n    }\r\n    render(tpl, scope, renderOptions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return toPromise(this._render(tpl, scope, Object.assign(Object.assign({}, renderOptions), { sync: false })));\r\n        });\r\n    }\r\n    renderSync(tpl, scope, renderOptions) {\r\n        return toValueSync(this._render(tpl, scope, Object.assign(Object.assign({}, renderOptions), { sync: true })));\r\n    }\r\n    renderToNodeStream(tpl, scope, renderOptions = {}) {\r\n        const ctx = new Context(scope, this.options, renderOptions);\r\n        return this.renderer.renderTemplatesToNodeStream(tpl, ctx);\r\n    }\r\n    _parseAndRender(html, scope, renderOptions) {\r\n        const tpl = this.parse(html);\r\n        return this._render(tpl, scope, renderOptions);\r\n    }\r\n    parseAndRender(html, scope, renderOptions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return toPromise(this._parseAndRender(html, scope, Object.assign(Object.assign({}, renderOptions), { sync: false })));\r\n        });\r\n    }\r\n    parseAndRenderSync(html, scope, renderOptions) {\r\n        return toValueSync(this._parseAndRender(html, scope, Object.assign(Object.assign({}, renderOptions), { sync: true })));\r\n    }\r\n    _parsePartialFile(file, sync, currentFile) {\r\n        return this.parser.parseFile(file, sync, LookupType.Partials, currentFile);\r\n    }\r\n    _parseLayoutFile(file, sync, currentFile) {\r\n        return this.parser.parseFile(file, sync, LookupType.Layouts, currentFile);\r\n    }\r\n    parseFile(file) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return toPromise(this.parser.parseFile(file, false));\r\n        });\r\n    }\r\n    parseFileSync(file) {\r\n        return toValueSync(this.parser.parseFile(file, true));\r\n    }\r\n    renderFile(file, ctx, renderOptions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const templates = yield this.parseFile(file);\r\n            return this.render(templates, ctx, renderOptions);\r\n        });\r\n    }\r\n    renderFileSync(file, ctx, renderOptions) {\r\n        const templates = this.parseFileSync(file);\r\n        return this.renderSync(templates, ctx, renderOptions);\r\n    }\r\n    renderFileToNodeStream(file, scope, renderOptions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const templates = yield this.parseFile(file);\r\n            return this.renderToNodeStream(templates, scope, renderOptions);\r\n        });\r\n    }\r\n    _evalValue(str, scopeOrContext) {\r\n        const value = new Value(str, this);\r\n        const ctx = scopeOrContext instanceof Context ? scopeOrContext : new Context(scopeOrContext, this.options);\r\n        return value.value(ctx, false);\r\n    }\r\n    evalValue(str, scopeOrContext) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return toPromise(this._evalValue(str, scopeOrContext));\r\n        });\r\n    }\r\n    evalValueSync(str, scopeOrContext) {\r\n        return toValueSync(this._evalValue(str, scopeOrContext));\r\n    }\r\n    registerFilter(name, filter) {\r\n        this.filters.set(name, filter);\r\n    }\r\n    registerTag(name, tag) {\r\n        this.tags.set(name, tag);\r\n    }\r\n    plugin(plugin) {\r\n        return plugin.call(this, Liquid);\r\n    }\r\n    express() {\r\n        const self = this; // eslint-disable-line\r\n        let firstCall = true;\r\n        return function (filePath, ctx, callback) {\r\n            if (firstCall) {\r\n                firstCall = false;\r\n                const dirs = normalizeDirectoryList(this.root);\r\n                self.options.root.unshift(...dirs);\r\n                self.options.layouts.unshift(...dirs);\r\n                self.options.partials.unshift(...dirs);\r\n            }\r\n            self.renderFile(filePath, ctx).then(html => callback(null, html), callback);\r\n        };\r\n    }\r\n}\n\nexport { AssertionError, Context, Drop, Expression, Hash, InternalUndefinedVariableError, Liquid, LiquidError, ParseError, ParseStream, RenderError, TagToken, TimezoneDate, Token, TokenKind, TokenizationError, Tokenizer, typeGuards as TypeGuards, UndefinedVariableError, Value, _evalToken, assert, createTrie, defaultOperators, defaultOptions, evalQuotedToken, evalToken, builtinFilters as filters, isFalsy, isTruthy, index as tags, toPromise, toThenable, toValue, toValueSync, version };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}